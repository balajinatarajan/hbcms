jQuery.noConflict();(function(){var a=false,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(g){var f=this.prototype;a=true;var e=new this();a=false;for(var d in g){e[d]=typeof g[d]=="function"&&typeof f[d]=="function"&&b.test(g[d])?(function(h,j){return function(){var l=this._super;this._super=f[h];var k=j.apply(this,arguments);this._super=l;return k}})(d,g[d]):g[d]}function c(){if(!a&&this.init){this.init.apply(this,arguments)}}c.prototype=e;c.constructor=c;c.extend=arguments.callee;return c}})();String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1).toLowerCase()};function compare(g,f){function c(k){var h=0;for(var j in k){if(j!=null){h++}}return h}if(c(g)!=c(f)){return false}for(var e in g){var b=g[e];var a=f[e];if(typeof b!=typeof a){return false}if(b&&b.length&&(b[0]!==undefined&&b[0].tagName)){if(!a||a.length!=b.length||!a[0].tagName||a[0].tagName!=b[0].tagName){return false}}else{if(typeof b=="function"||typeof b=="object"){var d=compare(b,a);if(!d){return d}}else{if(b!=a){return false}}}}return true}jQuery(document).ajaxComplete(function(event,request,settings){var trimmed=jQuery.trim(request.responseText);if(trimmed.charAt(0)=="{"){try{var data=eval("("+request.responseText+")");if(data.error=="true"){window.location=data.redirect}if(data.timeout=="true"){jQuery("#timeout").dialog({autoOpen:true,bgiframe:true,modal:true,draggable:true,resizable:false,width:"650px",minHeight:100,closeOnEscape:false,dialogClass:"ui-dialog-timeout",show:"fade",hide:"fade",title:"Oops, your session has timed out",buttons:[{html:"<strong>OK</strong>",click:function(){jQuery("#timeout").dialog("close");window.location=data.redirect}}]});var overlayName="Overlay:sessiontimeout";jQuery(document).trigger("OVERLAY_OPEN",overlayName)}}catch(ex){}}});UsernameManager=function(a){this.init(a)};jQuery.extend(UsernameManager.prototype,{usernameDialog:null,params:null,validator:null,init:function(d){var a=this;this.params=d;var c=a.params.dialogButton;if(c==null){c="Continue"}this.usernameDialog=d.dialogDiv.dialog({autoOpen:false,bgiframe:true,modal:true,draggable:true,resizable:false,width:"600px",minHeight:100,closeOnEscape:false,dialogClass:"username",show:"fade",hide:"fade",title:d.dialogTitle,buttons:[{id:"uniqueUsernamePopupButton",html:"<strong>"+c+"</strong>",click:function(){a.params.dialogForm.submit()}}],open:function(g,h){jQuery(".ui-dialog .ui-dialog-title").css({"float":"left",margin:"1.1em 16px -0.8em 0.8em",color:"#000000"});var e="Go back and enter a different email address";jQuery(".ui-dialog-buttonpane").css("padding-right","240px");jQuery("div.ui-dialog-buttonset").css({"margin-left":"35px","float":"left"});jQuery("html").find("#usernamegobackmessage").remove();jQuery("<div id='usernamegobackmessage' class='greyGradient' style='margin-right: -170px; margin-top: 15px; float: right;'><a href='#' onClick='return false;'>"+e+"</a></div>").insertAfter(jQuery("div.ui-dialog-buttonset"));var f=jQuery("html").find("#avsgobackmessage");jQuery.each(f,function(){jQuery(this).remove()});var f=jQuery("html").find("#contact");jQuery.each(f,function(){jQuery(this).remove()});jQuery("html").find("#usernamegobackmessage").bind("click",function(){jQuery("html").find("#usernamegobackmessage").remove();jQuery("html").find("#usernamegobackmessage").hide();jQuery("#usernameDialog").dialog("close");jQuery("#email").focus()})}});var b=jQuery(".ui-dialog-buttonset");b.append(jQuery("#usernameProceedDisabled").append('<button type="button" class="ui-button open ui-state-disabled">	<span class="ui-button-text "> <strong>'+c+'</strong> </span></button>	<div class="popup polleft png" style="z-index: 100">		<div class="popup-header png"></div>	<div class="popup-center png">			<div class="text-bar">	<p>Please complete all required information before continuing.</p>		</div>	</div>			<div class="popup-bottom-small png"></div>			</div>'));new Tooltips(b)},validateUser:function(b,d,a){if(d.username!=null){var c=d.username;tracker.performErrorTracking(c);this.showUsernameDialog();delete d.username}},showUsernameDialog:function(){var d=this;var b=d.params.pageId;var c=d.params.flowId;this.validator=new UsernameValidator({submitButton:jQuery("#uniqueUsernamePopupButton"),namePopup:jQuery("#uniqueUsernamePopup"),theForm:this.params.dialogForm,handleSuccess:function(){d.usernameDialog.dialog("close");d.params.successCallback();return true}});var e=jQuery("#emailInUserError").text().replace("{0}",jQuery("#email").val());jQuery("#emailInUserError").text(e);this.usernameDialog.dialog("open");tracker.performDialogTracking("listenerinfo_createusername");var a="Overlay: Enter Username";jQuery(document).trigger("OVERLAY_OPEN",a);jQuery.ajax({url:"faq_view.action",data:{pageId:b,flowId:c},dataType:"json",success:function(h){if(h!=null&&h.list!=null){var g=jQuery("#faqDiv2");g.empty();var f=jQuery("#faqTemplate").tmpl(h.list);g.append(f);jQuery("#top-faqs2").show()}else{jQuery("#top-faqs2").hide()}}})}});EVSValidatorManager=function(a){this.init(a)};jQuery.extend(EVSValidatorManager.prototype,{evsValidatorDialog:null,params:null,validator:null,status:null,flow:null,init:function(f){var c=this;var b;var a;this.params=f;var e=c.params.dialogButton;if(e==null){e="Continue"}this.evsValidatorDialog=f.dialogDiv.dialog({autoOpen:false,bgiframe:true,modal:true,draggable:true,resizable:false,width:"520px",height:"auto",closeOnEscape:false,dialogClass:"evsValidator",show:"fade",hide:"fade",buttons:[{id:"evsValidatorPopupButton",html:"<strong>"+e+"</strong>",click:function(){c.params.dialogForm.submit()}}],open:function(g,h){jQuery(".ui-dialog .ui-dialog-title").css({"float":"left",margin:"1.1em 16px -0.8em 0.8em",color:"#000000"});jQuery(".ui-dialog-buttonpane").css({"padding-right":"200px","margin-top":"0px"});jQuery("div.ui-dialog-buttonset").css({"margin-left":"35px","float":"right"});jQuery(".ui-dialog-titlebar-close").hide();jQuery(".ui-dialog-titlebar").remove();jQuery("#evsValidatorPopupButton").bind("click",function(){var j=c.getEmailUsernameId();a=jQuery("input[type=radio][name=evs]:checked").val();if(a=="0"||a=="3"){j.val(jQuery("#suggestedEmailID").val());if(jQuery("#confirmationEmail")!=null){jQuery("#confirmationEmail").val(jQuery("#suggestedEmailID").val())}if(jQuery("#reenterEmailAddress")!=null){jQuery("#reenterEmailAddress").val(jQuery("#suggestedEmailID").val())}}if(a=="1"||status=="CSM"){j.val("");if(jQuery("#confirmationEmail")!=null){jQuery("#confirmationEmail").val("")}if(jQuery("#reenterEmailAddress")!=null){jQuery("#reenterEmailAddress").val("")}}if(a=="0"||a=="1"||a=="2"||a=="3"||status=="CSM"){jQuery("#evsValidatorDialog").dialog("close");if(a=="0"){jQuery("#radio_1").attr("checked",false)}else{if(a=="1"){jQuery("#radio_2").attr("checked",false)}else{if(a=="2"){jQuery("#radio_3").attr("checked",false)}else{if(a=="3"){jQuery("#radio_4").attr("checked",false)}}}}if(status=="CSM"){status:null}if(a=="1"||status=="CSM"){j.focus()}else{if(flow=="accountcenter"||flow=="accountsummary"){jQuery("#proceedButton").click()}else{if(flow=="oemsetup"){jQuery("#userInformationForm").submit()}else{jQuery("#continueButton").click()}}}}})}});var d=jQuery(".ui-dialog-buttonset");new Tooltips(d)},validateEmail:function(g){if(g.verificationStatus!=null){var e=g.submittedEmail;var d=g.suggestedEmail;var c=g.verificationStatus;var f=g.responseCodeError;var a=g.suggestedEmailMessage;var b=g.userName;updateUserName=b;status=c;tracker.performErrorTracking(e);tracker.performErrorTracking(d);tracker.performErrorTracking(c);tracker.performErrorTracking(f);tracker.performErrorTracking(a);tracker.performErrorTracking(b);this.showEVSDialog(e,d,c,f,a);delete g.submittedEmail;delete g.suggestedEmail;delete g.verificationStatus;delete g.responseCodeError;delete g.suggestedEmailMessage;delete g.userName}},showEVSDialog:function(d,e,f,a,c){var j=this;var g=this.getEmailUsernameId();this.validator=new EVSValidator({submitButton:jQuery("#evsValidatorPopupButton"),namePopup:jQuery("#evsValidatorPopup"),theForm:this.params.dialogForm,handleSuccess:function(){j.evsValidatorDialog.dialog("close");j.params.successCallback();return true}});this.clearAll();if(f=="CSM"){jQuery("#evsValidatorError1").html(a);jQuery("#suggested").html(c);var k=jQuery("#evsValidatorError1").html().replace("{0}",g.val());jQuery("#evsValidatorError1").html(k);jQuery("#evsValidatorError1").show();if(a.indexOf(".coms")>=0){jQuery("#invalidDifferentEmail").show();jQuery("#differentEmailRadio").show();jQuery("#invalidWithRecommendation").show();jQuery("#differentEmail").show()}else{jQuery("#invalidEmailwithNoRecommendationMessage").show()}}else{if(e==null||e==""){jQuery("#evsValidatorError1").html(a);var k=jQuery("#evsValidatorError1").html().replace("{0}",g.val());jQuery("#evsValidatorError1").html(k);jQuery("#evsValidatorError1").show();jQuery("#invalidWithRecommendation").show();jQuery("#differentEmailRadio").show();jQuery("#differentEmail").show();if(a.indexOf(".coms")>=0){jQuery("#invalidDifferentEmail").show()}else{jQuery("#invalidEmailwithNoRecommendationMessage").show();jQuery("#radio_2").attr("checked","checked")}}}if(e!=null&&e!=""){if(f=="VALIDWITHRECOMMENDATION"){jQuery("#evsValidatorError2").show();jQuery("#validWithRecommendation").show();jQuery("#enteredEmailID").show();jQuery("#emailEnteredRadio").show();jQuery("#emailEntered").html("<strong>"+g.val()+"</strong>");jQuery("#emailEntered").show();jQuery("#suggestedEmailID").show();jQuery("#suggestedReplacementRadio").show();jQuery("#suggestedReplacement").html("<strong>"+e+"</strong>");jQuery("#suggestedReplacement").show()}else{if(f=="INVALID"||f=="INVALIDWITHRECOMMENDATION"){jQuery("#evsValidatorError1").html(a);jQuery("#suggested").html(c);var k=jQuery("#evsValidatorError1").html().replace("{0}",g.val());jQuery("#evsValidatorError1").html(k);jQuery("#evsValidatorError1").show();var b=jQuery("#suggested").html().replace("{0}",e);jQuery("#suggested").html(b);jQuery("#invalidWithRecommendation").show();if(f=="INVALIDWITHRECOMMENDATION"){jQuery("#invalidSuggestedEmail").show();jQuery("#suggestedRadio").show();jQuery("#suggested").show();jQuery("#invalidDifferentEmail").show();jQuery("#differentEmailRadio").show();jQuery("#differentEmail").show()}if(f=="INVALID"){if(a.indexOf(".coms")>=0){jQuery("#invalidDifferentEmail").show();jQuery("#differentEmailRadio").show();jQuery("#differentEmail").show()}else{jQuery("#invalidEmailwithNoRecommendationMessage").show();jQuery("#radio_2").attr("checked","checked")}}}}jQuery("#suggestedEmailID").val(e)}this.evsValidatorDialog.dialog("open");var h="Overlay: Email Verification System";jQuery(document).trigger("OVERLAY_OPEN",h)},clearAll:function(){jQuery("#evsValidatorError1").hide();jQuery("#evsValidatorError2").hide();jQuery("#suggestedRadio").hide();jQuery("#suggested").hide();jQuery("#differentEmailRadio").hide();jQuery("#differentEmail").hide();jQuery("#emailEnteredRadio").hide();jQuery("#emailEntered").hide();jQuery("#suggestedReplacementRadio").hide();jQuery("#suggestedReplacement").hide();jQuery("#customerServiceMessage").hide();jQuery("#validWithRecommendation").hide();jQuery("#enteredEmailID").hide();jQuery("#suggestedEmailID").hide();jQuery("#invalidWithRecommendation").hide();jQuery("#invalidSuggestedEmail").hide();jQuery("#invalidDifferentEmail").hide();jQuery("#invalidEmailwithNoRecommendationMessage").hide()},getEmailUsernameId:function(){var a=this.params.flowId;var b=null;if(this.params.step!=null){b=this.params.step}flow=a;if(updateUserName=="user"){return jQuery("#user-name")}else{if(a=="accountcenter"){return jQuery("#card-number")}else{if(a=="pii_intercept"||a=="emailintercept"){return jQuery("#emailAddress")}else{if((a=="changeoemconverttrial"||a=="oemtrialended")&&b!=null&&b=="listener"){return jQuery("input[name='email']")}else{return jQuery("#email")}}}}}});var OEMAccountWithCCDialogManager=function(a){this.init(a)};jQuery.extend(OEMAccountWithCCDialogManager.prototype,{dialog:null,params:null,validator:null,init:function(d){var a=this;this.params=d;var c=a.params.dialogButton;if(c==null){c="Continue"}this.dialog=d.dialogDiv.dialog({autoOpen:false,bgiframe:true,modal:true,draggable:true,resizable:false,width:"690px",minHeight:100,closeOnEscape:false,dialogClass:"username",show:"fade",hide:"fade",title:d.dialogTitle,buttons:[{id:"uniqueVerifyAcctPopupButton",html:"<strong>"+c+"</strong>",click:function(){a.params.dialogForm.submit()}}],open:function(e,f){}});this.validator=new UsernameValidator({theForm:this.params.dialogForm,submitButton:jQuery("#uniqueVerifyAcctPopupButton"),namePopup:jQuery("#oemDialogLastname"),phone1:jQuery("#servicePhone1"),phone2:jQuery("#servicePhone2"),phone3:jQuery("#servicePhone3"),handleSuccess:function(){a.dialog.dialog("close");a.params.successCallback();return true}});var b=jQuery(".ui-dialog-buttonset");b.append(jQuery("#usernameProceedDisabled").append('<button type="button" class="ui-button open ui-state-disabled">	<span class="ui-button-text "> <strong>'+c+'</strong> </span></button>	<div class="popup polleft png" style="z-index: 100">		<div class="popup-header png"></div>	<div class="popup-center png">			<div class="text-bar">	<p>Please complete all required information before continuing.</p>		</div>	</div>			<div class="popup-bottom-small png"></div>			</div>'));new Tooltips(b)},showDialog:function(){var b=this;for(i=0;i<this.params.fields.length;i++){var d=jQuery("#"+this.params.fields[i]);d.val("");this.validator.unhighlight(d)}var c=jQuery("div[htmlfor]");for(i=0;i<c.length;i++){jQuery(c[i]).remove()}jQuery("#"+this.params.errorParagraph).hide();this.validator.processSubmitButton();this.dialog.dialog("open");var a="Overlay:Verify Your Account";jQuery(document).trigger("OVERLAY_OPEN",a);tracker.performDialogTracking("identify_account")}});var hideSelectedQuestions=function(c){var a=jQuery("select","#securityQuestionsFieldset");var b=jQuery("#securityQuestionsCache > option");a.each(function(d,e){if(c&&c.target==this){return}var g=jQuery(this);var h=g.val();var f=b.clone();a.each(function(j,k){if(g[0]==this){return}var l=jQuery(this).val();if(l==""){return}f=f.filter(function(){return jQuery(this).val()!=l});g.html(f);g.val(h)})})};hideSelectedQuestions.cache={};RadioNicknameEditManager=function(a){this.init(a)};jQuery.extend(RadioNicknameEditManager.prototype,{radioNicknameEditDialog:null,params:null,validator:null,init:function(c){var a=this;this.params=c;var b=a.params.dialogButton;if(b==null){b="Save"}this.radioNicknameEditDialog=c.dialogDiv.dialog({autoOpen:false,bgiframe:true,modal:true,draggable:true,resizable:false,width:"550px",minHeight:200,closeOnEscape:false,dialogClass:"username",show:"fade",hide:"fade",title:c.dialogTitle,buttons:[{id:"radioNicknameEditPopupButton",html:"<strong>"+b+"</strong>",click:function(){a.params.dialogForm.submit()}}],open:function(d,e){},close:function(d,e){if(jQuery("#isDialogSaved").val()=="false"){tracker.performTracking("/careclick/nickname/edit_nickname/cancel")}jQuery("#isDialogSaved").val("false")}})},showRadioNicknameEditDialog:function(a){var e=this;var c=e.params.pageId;var d=e.params.flowId;if(d=="view"){e.params.dialogForm.get(0).setAttribute("action","updatenickname_updateSecure.action")}else{if(d=="newaccount"||d=="addradio"||d=="oemtrialended"){e.params.dialogForm.get(0).setAttribute("action","updatenickname_update.action")}}jQuery("#editFlowId").val(d);jQuery("#editEsn").val(a);jQuery("#editRadioNicknameEsn").val(a);this.validator=new SiriusValidator({submitButton:jQuery("#radioNicknameEditPopupButton"),namePopup:jQuery("#radioNicknameEditPopup"),theForm:this.params.dialogForm,handleSuccess:function(f){if(jQuery("#verifyPageRadioNickname")!=null){jQuery("#verifyPageRadioNickname").val(jQuery("#radioNicknameEditPopup").val());jQuery(document).trigger("NICKNAME_CHANGE")}jQuery("#isDialogSaved").val("true");e.radioNicknameEditDialog.dialog("close");e.params.successCallback(f);return true}});this.radioNicknameEditDialog.dialog("open");jQuery(document).trigger("SHOW_OVERLAY",["edit_nickname","nickname"]);var b="Overlay: Nickname";jQuery(document).trigger("OVERLAY_OPEN",b)}});RadioNicknameManager=function(a){this.init(a)};jQuery.extend(RadioNicknameManager.prototype,{radioNicknameDialog:null,params:null,validator:null,init:function(c){var a=this;this.params=c;var b=a.params.dialogButton;if(b==null){b="Submit"}this.radioNicknameDialog=c.dialogDiv.dialog({autoOpen:false,bgiframe:true,modal:true,draggable:true,resizable:false,width:"550px",minHeight:200,closeOnEscape:false,dialogClass:"username",show:"fade",hide:"fade",title:c.dialogTitle,buttons:[{id:"radioNicknamePopupButton",html:"<strong>"+b+"</strong>",click:function(){a.params.dialogForm.submit()}}],open:function(d,e){},close:function(d,e){if(jQuery("#isDialogSaved").val()=="false"){tracker.performTracking("/careclick/nickname/manage_nickname/cancel")}jQuery("#isDialogSaved").val("false")}})},showRadioNicknameDialog:function(a){var e=this;var c=e.params.pageId;var d=e.params.flowId;if(d=="view"||d=="accountcenter"){e.params.dialogForm.get(0).setAttribute("action","updatenickname_updateSecure.action")}else{if(d=="newaccount"||d=="addradio"||d=="oemtrialended"){e.params.dialogForm.get(0).setAttribute("action","updatenickname_update.action");jQuery("#radioNicknamePopup").val("")}}jQuery("#manageFlowId").val(d);jQuery("#esnLabel").html(a);jQuery("#manageRadioNicknameEsn").val(a);this.validator=new SiriusValidator({submitButton:jQuery("#radioNicknamePopupButton"),namePopup:jQuery("#radioNicknamePopup"),theForm:this.params.dialogForm,handleSuccess:function(f){if(jQuery("#verifyPageRadioNickname")!=null){jQuery("#verifyPageRadioNickname").val(jQuery("#radioNicknamePopup").val());jQuery(document).trigger("NICKNAME_CHANGE")}jQuery("#isDialogSaved").val("true");e.radioNicknameDialog.dialog("close");e.params.successCallback(f);return true}});this.radioNicknameDialog.dialog("open");jQuery(document).trigger("SHOW_OVERLAY",["manage_nickname","nickname"]);var b="Overlay: Nickname";jQuery(document).trigger("OVERLAY_OPEN",b);if(d=="accountcenter"){tracker.setIds("accountcenter","myaccounttab")}}});NCOACPackageFeatures=function(a){this.init(a)};jQuery.extend(NCOACPackageFeatures.prototype,{NCOACPackageFeaturesDialog:null,params:null,validator:null,init:function(a){this.params=a;this.NCOACPackageFeaturesDialog=a.dialogDiv.dialog({autoOpen:false,bgiframe:true,modal:true,draggable:true,resizable:false,width:"725px",minHeight:200,closeOnEscape:false,dialogClass:"username",show:"fade",open:function(b,c){jQuery("span.ui-icon.ui-icon-closethick").css("margin-top","10px");jQuery("#NCOACPackageFeatures").css("border-top","0px")}})},showNCOACPackageFeaturesDialog:function(){this.NCOACPackageFeaturesDialog.dialog("open");var a="Overlay: NCOAC Package Features";jQuery(document).trigger("OVERLAY_OPEN",a)}});avsAddressValidatorManager=function(a){this.init(a)};jQuery.extend(avsAddressValidatorManager.prototype,{avsAddressValidatorDialog:null,params:null,validator:null,init:function(g){var e=this;this.params=g;var c=e.params.isConfirmAddressRequired;var d=e.params.contactMessage;var a=e.params.continueButtonId;if(a==null){a="avsAddressValidatorContinueButton"}var f=(c)?"Yes, proceed with this address":"Continue with this address";var b=(c)?"No, go back and change address":"Go back and enter a different address";this.avsAddressValidatorDialog=g.dialogDiv.dialog({autoOpen:false,bgiframe:true,modal:true,draggable:true,resizable:false,width:"660px",minHeight:300,closeOnEscape:false,dialogClass:"avs",show:"fade",hide:"fade",title:g.dialogTitle,buttons:[{id:a,html:"<strong>"+f+"</strong>",click:function(){e.params.dialogForm.submit();tracker.performLinkTracking(jQuery(this))}}],open:function(h,j){if(c){jQuery(".avs > .ui-dialog-buttonpane > div.ui-dialog-buttonset").css({"margin-left":"40px","float":"left"})}else{jQuery(".avs > .ui-dialog-buttonpane > div.ui-dialog-buttonset").css({"margin-left":"30px","float":"left"})}jQuery("#avsgobackmessage").remove();var k="<div style='width:540px; margin-left:20px; padding-bottom:10px;'>"+d+"</div>";jQuery("<div id='avsgobackmessage' class='greyGradient'><a href='#' onClick='return false;'>"+b+"</a></div>").insertBefore(jQuery(".avs > div.ui-dialog-buttonpane"));if(!c){jQuery(k).insertAfter(jQuery(".avs > div.ui-dialog-buttonpane"))}if(c){jQuery("#avsgobackmessage").css({position:"absolute","text-align":"left","margin-left":"400px","margin-top":"22px"})}else{jQuery("#avsgobackmessage").css({position:"absolute","text-align":"left","margin-left":"355px","margin-top":"22px"})}jQuery("#avsgobackmessage").bind("click",function(){jQuery("#avsAddressValidatorDialog").dialog("close");if(jQuery("#updatebillingaddress_execute_action_activation_account_billingContact_address_address").length){jQuery("#updatebillingaddress_execute_action_activation_account_billingContact_address_address").focus().select()}else{if(jQuery("#updateserviceaddress_execute_action_activation_account_serviceContact_address_address").length){jQuery("#updateserviceaddress_execute_action_activation_account_serviceContact_address_address").focus().select()}else{if(jQuery("#updatecontactinformation_execute_action_activation_account_serviceContact_address_address").length){jQuery("#updatecontactinformation_execute_action_activation_account_serviceContact_address_address").focus().select()}else{if(jQuery("#updateContactInformationForm_activation_account_serviceContact_address_address").length){jQuery("#updateContactInformationForm_activation_account_serviceContact_address_address").focus().select()}else{if(jQuery("#updatebillingaddressform_activation_account_billingContact_address_address").length){jQuery("#updatebillingaddressform_activation_account_billingContact_address_address").focus().select()}else{if(jQuery("#updateccprocess_activation_creditCard_billingAddress_address").length){jQuery("#updateccprocess_activation_creditCard_billingAddress_address").focus().select()}else{if(jQuery("#creditcarddetails_activation_creditCard_billingAddress_address").length){jQuery("#creditcarddetails_activation_creditCard_billingAddress_address").focus().select()}else{if(jQuery("#winbackprocess_execute_action_activation_creditCard_billingAddress_address").length){jQuery("#winbackprocess_execute_action_activation_creditCard_billingAddress_address").focus().select()}}}}}}}}tracker.performLinkTracking(jQuery(this))})}})},showavsAddressValidatorDialog:function(){var c=this;var a=c.params.pageId;var b=c.params.flowId;this.avsAddressValidatorDialog.dialog("open");tracker.performErrorTracking("usps_validation")}});AddSubscriptionManager=function(a){this.init(a)};jQuery.extend(AddSubscriptionManager.prototype,{addSubscriptionDialog:null,params:null,validator:null,init:function(b){var a=this;this.params=b;this.addSubscriptionDialog=b.dialogDiv.dialog({autoOpen:false,bgiframe:true,modal:true,draggable:true,resizable:false,width:"330px",minHeight:70,closeOnEscape:false,dialogClass:"username",show:"fade",title:b.dialogTitle,open:function(c,d){}})},showAddSubscriptionDialog:function(){var b=this;this.addSubscriptionDialog.dialog("open");var a="Overlay: Add Radio Selector";jQuery(document).trigger("OVERLAY_OPEN",a)}});CurrentPlanCannotRetainManager=function(a){this.init(a)};jQuery.extend(CurrentPlanCannotRetainManager.prototype,{currentPlanCannotRetainDialog:null,params:null,validator:null,init:function(b){var a=this;this.params=b;this.currentPlanCannotRetainDialog=b.dialogDiv.dialog({autoOpen:false,bgiframe:true,modal:true,draggable:true,resizable:false,width:"525px",minHeight:100,position:"left",closeOnEscape:false,dialogClass:"username",show:"fade",title:b.dialogTitle,open:function(c,d){}})},showCurrentPlanCannotRetainDialog:function(){var a=this;this.currentPlanCannotRetainDialog.dialog("open")}});RemoveRadioManager=function(a){this.init(a)};jQuery.extend(RemoveRadioManager.prototype,{removeRadioDialog:null,params:null,init:function(c){var a=this;this.params=c;var b=a.params.dialogButton;if(b==null){b="Remove Radio"}this.removeRadioDialog=c.dialogDiv.dialog({autoOpen:false,bgiframe:true,modal:true,draggable:true,resizable:false,width:"550px",minHeight:100,closeOnEscape:false,dialogClass:"username",show:"fade",hide:"fade",title:c.dialogTitle,buttons:[{id:"removeRadioPopupButton",html:"<strong>"+b+"</strong>",click:function(){a.params.dialogForm.submit()}}],open:function(d,e){},close:function(d,e){jQuery("#isDialogSaved").val("false")}})},showRemoveRadioDialog:function(a){var e=this;var c=e.params.pageId;var d=e.params.flowId;jQuery("#esn").val(a);jQuery("input[name='reasonCode']").attr("checked",false);jQuery("#removeRadioPopupButton").addClass("ui-state-disabled");this.validator=new SiriusValidator({submitButton:jQuery("#removeRadioPopupButton"),theForm:this.params.dialogForm,handleSuccess:function(f){e.removeRadioDialog.dialog("close");e.params.successCallback(f);return true}});this.removeRadioDialog.dialog("open");var b="Overlay: Remove Radio Select Reason";jQuery(document).trigger("OVERLAY_OPEN",b);jQuery(document).trigger("SHOW_OVERLAY",["accountcenter","myaccounttab"])}});ReactivateRadioManager=function(a){this.init(a)};jQuery.extend(ReactivateRadioManager.prototype,{reactivateRadioDialog:null,params:null,init:function(c){var a=this;this.params=c;var b=a.params.dialogButton;if(b==null){b="OK"}this.reactivateRadioDialog=c.dialogDiv.dialog({autoOpen:false,bgiframe:true,modal:true,draggable:true,resizable:false,width:"375px",minHeight:100,closeOnEscape:false,dialogClass:"username",show:"fade",hide:"fade",title:c.dialogTitle,buttons:[{id:"reactivateRadioPopupButton",html:"<strong>"+b+"</strong>",click:function(){a.reactivateRadioDialog.dialog("close")}}],open:function(d,e){},close:function(d,e){jQuery("#isDialogSaved").val("false")}})},showReactivateRadioDialog:function(){var d=this;var b=d.params.pageId;var c=d.params.flowId;this.reactivateRadioDialog.dialog("open");var a="Overlay:Please Call";jQuery(document).trigger("OVERLAY_OPEN",a);jQuery(document).trigger("SHOW_OVERLAY",["accountcenter","myaccounttab"])}});UpsellOverlayManager=function(a){this.init(a)};jQuery.extend(UpsellOverlayManager.prototype,{upsellOverlayDialog:null,params:null,validator:null,init:function(b){var a=this;this.params=b;this.upsellOverlayDialog=b.dialogDiv.dialog({autoOpen:false,bgiframe:true,modal:true,draggable:true,resizable:false,width:"725px",minHeight:200,closeOnEscape:false,dialogClass:"upsellOverlay",show:"fade",hide:"fade",title:b.dialogTitle,buttons:[{id:"overlayUpgradeButton",click:function(){var c=jQuery("#all-plans #pricing-module .bold-small").text();var d=jQuery("#overlayUpgradeButton");if(d.text().indexOf("Select")>-1){jQuery("#mmUpsellOverlay").dialog("close");jQuery("#all-plans input[value*='SIR_AUD_EVT']").click().click();jQuery("#all-plans input[value*='SIR_AUD_EVT']").parent().find('a[class="radio"]').addClass("checked");if(c.indexOf("MULTI-RADIO DISCOUNT")>-1){d.attr("tracking-info-link",'{"id":"upgradetoselectmrd","pos":"upselltoselectmrdoverlay", "pageName":"overlay_mmupsell"}')}else{d.attr("tracking-info-link",'{"id":"upgradetoselect","pos":"upselltoselectoverlay", "pageName":"overlay_mmupsell"}')}}else{jQuery("#mmUpsellOverlay").dialog("close");jQuery("#all-plans input[value*='SIR_AUD_ALLACCESS']:first").click().click();jQuery("#all-plans input[value*='SIR_AUD_ALLACCESS']:first").parent().find('a[class="radio"]').addClass("checked");if(c.indexOf("MULTI-RADIO DISCOUNT")>-1){d.attr("tracking-info-link",'{"id":"upgradetoallaccessmrd","pos":"upselltoallaccessmrdoverlay", "pageName":"overlay_mmupsell"}')}else{d.attr("tracking-info-link",'{"id":"upgradetoallaccess","pos":"upselltoallaccessoverlay", "pageName":"overlay_mmupsell"}')}}jQuery("#all-plans input[value*='SIR_AUD_PKG_MM']").parent().find('a[class="radio checked"]').removeClass("checked");jQuery("div.ui-dialog-titlebar").show();flowManager.proceedToNextStep()}},{id:"overlayKeepButton",click:function(){var e=jQuery("#overlayUpgradeButton").text();var c=jQuery("#overlayKeepButton");var d=jQuery("#all-plans #pricing-module .bold-small").text();if(e.indexOf("Select")>-1){if(d.indexOf("MULTI-RADIO DISCOUNT")>-1){c.attr("tracking-info-link",'{"id":"keepmostlymusic","pos":"upselltoselectmrdoverlay", "pageName":"overlay_mmupsell"}')}else{c.attr("tracking-info-link",'{"id":"keepmostlymusic","pos":"upselltoselectoverlay", "pageName":"overlay_mmupsell"}')}}else{if(d.indexOf("MULTI-RADIO DISCOUNT")>-1){c.attr("tracking-info-link",'{"id":"keepmostlymusic","pos":"upselltoallaccessmrdoverlay", "pageName":"overlay_mmupsell"}')}else{c.attr("tracking-info-link",'{"id":"keepmostlymusic","pos":"upselltoallaccessoverlay", "pageName":"overlay_mmupsell"}')}}jQuery("#mmUpsellOverlay").dialog("close");jQuery("div.ui-dialog-titlebar").show();flowManager.proceedToNextStep()}}],open:function(f,h){var c;var e=jQuery("#overlayUpgradeButton").text();var d=jQuery("#all-plans #pricing-module .bold-small").text();if(e.indexOf("Select")>-1){if(d.indexOf("MULTI-RADIO DISCOUNT")>-1){c="Overlay:upselltoselectmrd"}else{c="Overlay:upselltoselect"}}else{if(d.indexOf("MULTI-RADIO DISCOUNT")>-1){c="Overlay:upselltoallaccessmrd"}else{c="Overlay:upselltoallaccess"}}var g={event:"event25",flowName:flowManager.getCurrentStep().flow};jQuery("div.ui-dialog-titlebar").hide();jQuery("#overlayUpgradeButton").removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-state-focus");jQuery("#overlayUpgradeButton").addClass("overlay-btn-blue");jQuery("#overlayKeepButton").removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-state-focus");jQuery("#overlayKeepButton").addClass("overlay-btn-grey");jQuery(document).trigger("OVERLAY_OPEN",[c,g])}})},showMMUpsellOverlay:function(){var c=this;var a=c.params.pageId;var b=c.params.flowId;this.upsellOverlayDialog.dialog("open");tracker.performDialogTracking("overlay_mmupsell")}});var shopURL="";function openShop(b,a){if(b==undefined||b==null||b==""){if(a!==undefined||a==""){window.open(shopURL,a)}else{window.location.href=shopURL}return}b=b.split("?");if(b.length>1){tempShopURL=shopURL+"?"+b[1]}else{tempShopURL=shopURL}if(a!==undefined&&a!=""){window.open(tempShopURL,a)}else{window.location.href=tempShopURL}}function updateShopElement(c,d){if(c!==undefined){var a=c.href;var e=c.target===undefined?"":c.target;var b=a;if(d!==undefined&&d){jQuery(c).attr("href","");jQuery(c).removeAttr("target")}else{jQuery(c).attr("href","#");jQuery(c).attr("target",e)}jQuery(c).click(function(){openShop(b,e)})}}function updateShopURLs(){updateShopElement(jQuery("a:contains('Shop All')")[0]);var b=jQuery("a:contains('Radios')")[0];if(b!==undefined){var a="http://shop.siriusxm.com/edealinv/servlet/ExecMacro?nurl=control/CategoryHome.vm&ctl_nbr=10600&catParentID=49759";jQuery(b).attr("href","#");jQuery(b).attr("target","");jQuery(b).click(function(){openShop(a)})}updateShopElement(jQuery("a:contains('Accessories')")[0]);updateShopElement(jQuery("#shopRadioArea")[0],true);updateShopElement(jQuery("a:contains('Shop Radio Deals.')")[0],true)}Step=function(){this.init()};jQuery.extend(Step.prototype,{number:null,dependencies:null,complete:false,loaded:true,urlToLoad:null,urlToSubmit:null,formData:null,init:function(){},validateSuccess:function(a){return true},validateFail:function(a,b){},onForward:function(){return true},onBack:function(){return true},onLoad:function(){}});var FlowManager=Class.extend({stepsMap:null,steps:null,formWizard:null,params:null,mainForm:null,menu:null,validator:null,subflow:null,hiddenStep:null,hiddenStepHtml:null,skipToStep:null,init:function(b){if(b){var a=this;this.params=b;this.steps=b.steps;this.stepsMap=new Array();this.mainForm=b.mainForm;this.menu=b.menu;if(b.skipToStep!=null){this.skipToStep=b.skipToStep}jQuery.each(a.steps,function(){a.stepsMap[this.name]=this});this.mainForm.find(":submit").click(function(c){a.beforeValidate(c);if(a.getCurrentStep()!=null&&a.getCurrentStep().name!=null&&a.getCurrentStep().name=="order"){jQuery("#backLabel").show();jQuery("#backLink").hide()}});this.mainForm.find("#backLink").click(function(d){if(a.getCurrentStep().number>0){var c=null;var e=null;if((a.getCurrentStep().flow=="newaccount"||a.getCurrentStep().flow=="addradio")&&a.hiddenStep==null){e=a.getCurrentStep().number;if(a.getCurrentStep().number==1){e=e-1;c=a.steps[e]}else{var g=a.getCurrentStep().name;for(var f=0;f<a.steps.length;f++){if(a.steps[f].name==g){e=f;break}}c=a.steps[e-1]}}else{var g=a.getCurrentStep().name;for(var f=0;f<a.steps.length;f++){if(a.steps[f].name==g){e=f;break}}c=a.steps[e-1]}a.loadStep(c);if(c.name=="plan"){a.updateShoppingCart()}d.stopImmediatePropagation();d.preventDefault()}else{a.beforeBack(d)}});this.setupFormWizard();this.initialiseMenu();this.additionalInit()}},beforeValidate:function(a){if(!this.getCurrentStep().onForward()){a.stopImmediatePropagation();a.preventDefault()}},beforeBack:function(a){if(!this.getCurrentStep().onBack()){a.stopImmediatePropagation();a.preventDefault()}},proceedToNextStep:function(){this.mainForm.formwizard("state").nextButton.click()},additionalInit:function(){if(this.skipToStep!=null){flowManager.mainForm.formwizard("show",this.skipToStep)}},gotoStep:function(b){for(var a=0;a<b.number;a++){if(!this.steps[a].complete){return false}}this.loadStep(b)},loadStep:function(a){this.mainForm.formwizard("show",a.name)},getExtraFormData:function(a){return null},processResult:function(d){var c=this;var b=this.getCurrentStep();if(d.result==null||!d.result.success){var e=this.validator.organiseErrors(d.result.fieldErrors);b.validateFail(this.validator,e,d.result.result);this.validator.processResult(d,e);this.updateCCDisplay(b);this.mainForm.formwizard("state").nextButton.removeAttr("disabled").removeClass("ui-state-disabled").addClass("ui-state-active");this.mainForm.formwizard("state").backButton.removeAttr("disabled").removeClass("ui-state-disabled").addClass("ui-state-active");jQuery("#backLabel").hide();jQuery("#backLink").show();return false}var b=this.getCurrentStep();b.complete=true;var a=c.getNextStep();if(a!=null&&!a.loaded){jQuery("#"+a.name).css("opacity",0)}return b.validateSuccess(d.result)},saveFormData:function(b,a){b.formData=a},getCurrentStep:function(){var b=this.mainForm.formwizard("state");var a=this.stepsMap[b.currentStep];return a},getNextStep:function(){var c=this.getCurrentStep();var b=-1;for(var a=0;a<(this.steps.length-1);a++){if(c==this.steps[a]){b=a}}if(b!=-1){return this.steps[b+1]}return null},hasFormChanged:function(a,b){return !compare(b,a.formData)},getFormDataFromPage:function(a){return jQuery("#"+a.name).formToArray(true)},checkForChanges:function(){var a=this.getCurrentStep();var b=this.getFormDataFromPage(a);if(!this.hasFormChanged(a,b)){return false}this.saveFormData(a,b);this.resetFutureSteps(a);return true},resetFutureSteps:function(c){var a=0;for(var b=0;b<this.steps.length;b++){if(this.steps[b].name==c.name){a=b}}for(var b=(a+1);b<this.steps.length;b++){this.steps[b].complete=false;this.steps[b].loaded=false}},setupFormWizard:function(){var b=this;var a=new Array();jQuery.each(b.steps,function(){var d=this;if(this.submitUrl!=null){var c={url:this.submitUrl,dataType:"json",success:function(e){return b.processResult(e)},beforeSend:function(){if(d.hyperlink){window.location=d.submitUrl;return false}var e=b.checkForChanges();if(e){}return e}};a[this.name]=c}});this.mainForm.bind("step_shown",function(e,g){var d=b.stepsMap[g.currentStep];b.highlightStep(d.number);document.title=d.pageTitle;jQuery("#floatChat").val("");jQuery("#floatlayer").hide();jQuery("#divId").remove();var c="";if(!d.loaded){jQuery("#flatloader").fadeIn("fast",function(){jQuery.ajax({url:d.viewUrl,async:false,success:function(h){jQuery("#"+d.name).html(h);jQuery("#flatloader").fadeOut("fast",function(){jQuery("#"+d.name).fadeTo(800,1)});f();if(d.callBackUrl!=null){jQuery(".subheaderAccountInfo").load(d.callBackUrl)}}})})}else{f();if(d.callBackUrl!=null){jQuery(".subheaderAccountInfo").load(d.callBackUrl)}}function f(){jQuery(document).trigger("PAGE_CHANGE",[d.name,b.params.flowId,jQuery("#"+d.name),b.subflow]);if(d.pageIdOverride!=null){jQuery(document).trigger("PAGE_LOAD",[d.pageIdOverride,b.params.flowId,d.event,d.ignitionOneConversion])}else{jQuery(document).trigger("PAGE_LOAD",[d.name,b.params.flowId,d.event,d.ignitionOneConversion])}var k=jQuery("#enableQualtricsVerification").attr("value");if(k=="1"&&typeof QSI!="undefined"){QSI.API.unload();QSI.API.load()}b.updateButtons(d);b.updateCCDisplay(d);d.onLoad();jQuery("#content-body").css("height","auto").css("visibility","visible");jQuery(":input:visible:not([type=image])").each(function(l){jQuery(this).attr("tabindex",l+1)});if(jQuery.browser.msie&&jQuery("#content-body").children().size()>0){jQuery("#content-body").children().find("h1, h2, h3, h4, p, label, dt.bold, a, dd.bold, span.bold").not(".exemptBG").each(function(){if(jQuery(this).parent().css("backgroundColor")=="transparent"){jQuery(this).addClass("backgroundColorFiller")}})}b.validator.addListeners();proactiveurlgen="";enableProactiveChatGeneral="no";enableProactiveChatPriority="no";if(d.isChatEnabled){b.chatWidgetExecute()}else{if(typeof offerEventBasedProactiveChat!="undefined"&&offerEventBasedProactiveChat==true){isChatEnabledForStep=false;clearInterval(idleInterval)}}var j=jQuery("#hastoupgrade").val();if(d.name=="package"&&(b.params.flowId=="changesubscription"||b.params.flowId=="changeoemsubscription"||b.params.flowId=="changeoemconverttrial")&&j=="true"){jQuery("#hasToUpgradeToAllAccessAlert").show();var h=jQuery("#subheaderAlertMessage").val();jQuery("#subheadermessage").text(h)}else{jQuery("#hasToUpgradeToAllAccessAlert").hide()}d.loaded=true}});this.formWizard=this.mainForm.formwizard({formPluginEnabled:true,validationEnabled:true,focusFirstInput:false,historyEnabled:true,remoteAjax:a,textNext:null,next:"#proceed > button",formOptions:{dataType:"json",resetForm:true,data:b.getExtraFormData()},validationOptions:{messages:new Object(),rules:new Object(),groups:new Object(),meta:"rules",ignore:":hidden",invalidHandler:function(d,c){if(b.validator!=null&&b.validator.invalidHandler!=null){b.validator.invalidHandler(d,c)}}}});this.validator=new FlowManagerValidator({validator:jQuery.data(this.formWizard[0],"validator"),submitButton:this.mainForm.formwizard("state").nextButton,backButton:this.mainForm.formwizard("state").backButton,theForm:this.mainForm})},updateButtons:function(e){if(e.name=="order"||e.name=="activate-complete"){jQuery(".vertical-space").not(":last").each(function(){jQuery(this).css({height:"10px",width:"10px"})});var g=jQuery(".volatileHeader:eq(2)");var b=jQuery('<h3 class="column-645 left" style="margin-bottom:5px"></h3>').append(g.text());g.replaceWith(b)}if(e.name=="plan"){jQuery("dl.total").css("width","180px");jQuery("a.close").trigger("click");var d=0;jQuery(".content-grey.left-block").each(function(){if(d<jQuery(this).height()){d=jQuery(this).height()}});jQuery(".content-grey.left-block").css("height",d+"px")}if(e.name=="plan"||e.name=="package"){this.alignCurrentAndNewSubscriptionBoxes()}if(e.backLink!=null){jQuery("#back > button").bind("click.backLink",function(){document.location.href=e.backLink});jQuery("#back > button").removeAttr("disabled").removeClass("ui-state-disabled").addClass("ui-state-active");jQuery("#back").show()}else{jQuery("#back > button").unbind("click.backLink");if(e.number==0||(e.removeBackLink!=null&&e.removeBackLink==true)){jQuery("#back").hide()}else{jQuery("#back").show()}}jQuery("#backLink").css("text-decoration","none").blur();var c=this.mainForm.formwizard("state");if(e.nextButtonText!=null&&e.nextButtonText!=""){var c=this.mainForm.formwizard("state");var a=c.nextButton.find("div");a.html(e.nextButtonText);jQuery("#proceedDisabled > button").find("div").html(e.nextButtonText)}else{c.nextButton.find("div").html("Continue");jQuery("#proceedDisabled > button").find("div").html("Continue")}if(e.nextButtonTooltip!=null&&e.nextButtonTooltip!=""){jQuery("#proceedDisabled").find(".text-bar").html(e.nextButtonTooltip)}else{if(jQuery("#proceedDisabled").find(".text-bar").html()==null){jQuery("#proceedDisabled").find(".text-bar").html("<p>Please complete all required information before continuing.</p>")}}if(e.proceedFlag==false){jQuery("#proceed").hide();jQuery("#proceedDisabled").hide()}if(e.specialOfferPageProceedFlag==false){jQuery("#proceed").hide();jQuery("#proceedDisabled").show();jQuery('input[name="internet-listening"]').click(function(){e.specialOfferPageProceedFlag=true;jQuery("#proceed").show();jQuery("#proceedDisabled").hide()})}if(jQuery("#showFollowonButton")){if(e.name=="plan"&&jQuery("#showFollowonButton").val()=="true"){jQuery("#proceed").hide()}else{if(e.name=="package"&&jQuery("#showFollowonButton").val()=="true"){jQuery("#proceed").show()}}}if(e.hyperlink){jQuery("#back").hide();var f=this.mainForm.formwizard("state").nextButton;f.unbind();f.bind("click",function(){window.location=e.submitUrl;return false})}if(e.cancelLink!=null){if(e.name!="order"){jQuery(".total").css({width:"430px"});jQuery("#cancelLink").show();if(e.cancelLink!=null){jQuery("a.open-modal").bind("click",function(){document.location.href=e.cancelLink})}}}else{jQuery("#cancelLink").hide()}},updateCCDisplay:function(a){if(a.name=="order"||a.name=="verifyswap"){if(a.pageErrorMessage!=null){if(jQuery("#nameOnCard").val()!=""&&jQuery("#activation_account_paymentProfile_creditCardOnFile_type").val()!=""&&jQuery("#activation_account_paymentProfile_creditCardOnFile_expMonth").val()!=""&&jQuery("#activation_account_paymentProfile_creditCardOnFile_expYear").val()!=""){jQuery("#pageErrorMessage").hide()}else{jQuery("#pageErrorMessage").text(a.pageErrorMessage);jQuery(document).trigger("TRACK_ERROR",[null,a.pageErrorMessage,null]);jQuery("#pageErrorMessage").show()}}if(a.currentCardReusable!=null){if(jQuery("#cardOptionnew").is(":checked")){jQuery("#nameOnCard").removeAttr("disabled");jQuery("#activation_account_paymentProfile_creditCardOnFile_type").removeAttr("disabled");jQuery("#card-number").removeAttr("disabled");jQuery("#activation_account_paymentProfile_creditCardOnFile_expMonth").removeAttr("disabled");jQuery("#activation_account_paymentProfile_creditCardOnFile_expYear").removeAttr("disabled");jQuery("#activation_account_paymentProfile_creditCardOnFile_expirationDate").removeAttr("disabled")}else{jQuery("#nameOnCard").attr("disabled","disabled");jQuery("#activation_account_paymentProfile_creditCardOnFile_type").attr("disabled","disabled");jQuery("#card-number").attr("disabled","disabled");jQuery("#activation_account_paymentProfile_creditCardOnFile_expMonth").attr("disabled","disabled");jQuery("#activation_account_paymentProfile_creditCardOnFile_expYear").attr("disabled","disabled");jQuery("#activation_account_paymentProfile_creditCardOnFile_expirationDate").attr("disabled","disabled")}jQuery("#currentNameOnCard").attr("disabled","disabled");jQuery("#activation_currentCardOnFile_type").attr("disabled","disabled");jQuery("#current-card-number").attr("disabled","disabled");jQuery("#activation_currentCardOnFile_expMonth").attr("disabled","disabled");jQuery("#activation_account_currentCardOnFile_expYear").attr("disabled","disabled")}}},updateValidatorOptions:function(){this.validator.validator.settings.messages=this.messages},initialiseMenu:function(){var a=this;this.menu.find("a").click(function(){var c=a.getCurrentStep();var d=jQuery(this).attr("rel");var b=a.stepsMap[d];if(c.number>b.number||!a.hasFormChanged(c,a.getFormDataFromPage(c))){a.gotoStep(b)}});this.highlightStep(0)},highlightStep:function(h){var j=this.menu.find("li").removeClass("active");this.menu.find("li").removeClass("passed");this.menu.find("span").removeClass("arrow-complete");this.menu.find("span").removeClass("arrow-active");for(var f=0;f<h;f++){var g=j[f];jQuery(g).addClass("passed");var a=j[f+1];if(a){var d=jQuery(a).find(".arrow");if(d){jQuery(d).addClass("arrow-complete")}}}var c=j[h];jQuery(c).addClass("active");var b=j[h+1];if(b){var e=jQuery(b).find(".arrow");if(e){jQuery(e).addClass("arrow-active")}}},reloadCurrentStep:function(){var b=this;var a=this.getCurrentStep();jQuery("#flatloader").fadeIn("fast",function(){jQuery.ajax({url:a.viewUrl,async:false,success:function(d){jQuery("#"+a.name).html("");jQuery("#"+a.name).html(d);jQuery("#flatloader").fadeOut("fast",function(){jQuery("#"+a.name).fadeTo(800,1);c();if(a.callBackUrl!=null){jQuery(".subheaderAccountInfo").load(a.callBackUrl)}})}})});function c(){jQuery(document).trigger("PAGE_CHANGE",[a.name,b.params.flowId,jQuery("#"+a.name),b.subflow]);if(a.pageIdOverride!=null){jQuery(document).trigger("PAGE_LOAD",[a.pageIdOverride,b.params.flowId,a.event,a.ignitionOneConversion])}else{jQuery(document).trigger("PAGE_LOAD",[a.name,b.params.flowId,a.event,a.ignitionOneConversion])}b.updateButtons(a);b.updateCCDisplay(a);a.onLoad();jQuery("#content-body").css("height","auto").css("visibility","visible");jQuery(":input:visible:not([type=image])").each(function(d){jQuery(this).attr("tabindex",d+1)});alert("HI  second");if(jQuery.browser.msie&&jQuery("#content-body").children().size()>0){jQuery("#content-body").children().find("h1, h2, h3, h4, p, label, dt.bold, a, dd.bold, span.bold").not(".exemptBG").each(function(){if(jQuery(this).parent().css("backgroundColor")=="transparent"){jQuery(this).css("backgroundColor","#ffffff")}})}b.validator.addListeners();a.loaded=true}},hideStep:function(a,b){this.hiddenStep=this.steps[a];this.steps.splice(a,1);this.stepsMap.splice(a,1);this.hiddenStepHtml=b;b.remove()},showHiddenStep:function(a,b){this.steps.splice(a,0,this.hiddenStep);this.stepsMap.splice(a,0,this.hiddenStep);this.hiddenStepHtml.insertAfter(b)},chatWidgetExecute:function(){var chatPgId=this.getCurrentStep().name;if(jQuery("#chatPageIdOverride").val()!=null&&jQuery("#chatPageIdOverride").val()!=""){chatPgId=jQuery("#chatPageIdOverride").val()}if(typeof offerEventBasedProactiveChat!="undefined"&&offerEventBasedProactiveChat==true){isflowManagerFlow=true;isChatEnabledForStep=true}jQuery.ajax({url:"chatwidgettype_execute.action",type:"POST",data:{pageId:chatPgId,flowId:this.getCurrentStep().flow},dataType:"json",success:function(data){gotAjaxResponse="yes";if(data!=null&&data.result!=null){if(data.result.chatEnabled=="yes"){if(data.result.enableStaticChat=="yes"){jQuery("#chatlive").show()}if(data.result.enableFloatingChat=="yes"){jQuery("#floatChat").val("true")}if(data.result.enableProactivePriority=="yes"){proactivePriority="yes";enableProactiveChatPriority="yes";enableProactive="yes";defaultIdleTime=data.result.idleTime;clearproactive=setInterval("invokeProactiveChatWidget()",1000)}if(data.result.enableProactiveGeneral=="yes"){proactiveGeneral="yes";enableProactiveChatGeneral="yes";enableProactive="yes";defaultIdleTime=data.result.idleTime;clearproactive=setInterval("invokeProactiveChatWidget()",1000)}if(data.result.enableFloatingChat=="yes"){eval(setFloatLayers())}}}},failure:function(data){gotAjaxResponse="yes"}});if(typeof offerEventBasedProactiveChat!="undefined"&&offerEventBasedProactiveChat==true){if(isChatAlreadyOffered==false){clearInterval(idleInterval);idleInterval=setInterval("incrementTimer()",60000)}}},addSpaceBetweenHeaderAndContent:function(){$=jQuery;var c;c=document.getElementById("package-display");if(c==null){return}else{var a;if($(".dark-purple")&&$(".dark-purple").is(":visible")){$(".typeHeader").each(function(d){if($(this).next().next().next().next().is(".dark-purple")){$(this).css("padding-bottom","9px")}});a=$("[id*=_DATA]");var b=0;while(b<a.length){if(($(a[b]).is(":visible"))){$(a[b]).css("padding-top","9px");break}b++}}}},reconcileHeaderSectionHeights:function(){this.addSpaceBetweenHeaderAndContent();$=jQuery;var a=0;var b=new Array();$(".headerContainerNew").each(function(){var c=$(this).attr("class").split(/\s+/);$.each(c,function(h,f){if(f!="headerContainerNew"&&f!=""){var l="."+f+".headerContainerCurrent";var d="."+f+".headerContainerNew";b.push(l);var k=null;var m=null;if($(".yourcurrentsubscription").first().is(":visible")){k=$(l).first();m=$(d).first()}else{if($(".yourcurrentsubscription").last().is(":visible")){k=$(l).last();m=$(d).last()}}if(k!=null&&m!=null){k.css("padding-bottom",0);m.css("padding-bottom",0);var j=k.outerHeight(true);var e=m.outerHeight(true);if(j<e){padding=e-j;k.css("padding-bottom",padding);if(j==null&&e!=null){var g=l.replace(/\./g," ").trim();if(a>0){jQuery(b[a-1]).after("<div class='"+g+"' style='padding-bottom:"+padding+"px;'><div class='typeHeader'></div></div>")}}}else{if(e<j){padding=j-e;m.css("padding-bottom",padding)}}}a++}})})},alignCurrentAndNewSubscriptionBoxes:function(){this.reconcileHeaderSectionHeights();var c=0;var a;var b;if(jQuery(".yourcurrentsubscription").first().is(":visible")){a=jQuery(".yourcurrentsubscription").first();b=jQuery(".yournewsubscription").first()}else{if(jQuery(".yourcurrentsubscription").last().is(":visible")){a=jQuery(".yourcurrentsubscription").last();b=jQuery(".yournewsubscription").last()}}if(a!=null&&b!=null){var d=a.height();var e=b.height();if(d<e){b.css("padding-bottom",10);a.css("padding-bottom",10+e-d)}else{a.css("padding-bottom",10);b.css("padding-bottom",10+d-e)}}}});var SwapRadioFlowManager=FlowManager.extend({packageSelection:null,getExtraFormData:function(c){var b=jQuery("#common-form-data").formToArray(true);return b},additionalInit:function(){var c=this;var b=false;var a=null;var d=false;jQuery(document).bind("PACKAGE_CHANGE",function(f){});jQuery(document).bind("TERM_CHANGE",function(f){c.updateShoppingCart()});jQuery(document).bind("SIR_CHANGE",function(f){});jQuery(document).bind("RADIO_CHANGE",function(f){c.updateYourRadio()});jQuery(document).bind("NICKNAME_CHANGE",function(f){c.updateYourNickname()});jQuery(document).bind("PACKAGE_SELECTION_COMPLETE",function(f){c.checkIfAlc()});jQuery(document).bind("LOAD_CONFIRMATION_SIDEBAR",function(f){c.loadConfirmationSidebar()});jQuery(document).bind("PAGE_CHANGE",function(f){c.showHideRightModules()});jQuery(document).bind("GIFT_CARD_APPLIED",function(g){var f=c.params.quoteUrl+"?viewType=NON_SC";jQuery("#quote-details-section").load(f,null)})},setNickNameFlag:function(b,a){this.nickNameFlag=b;this.nickNameErrorMsg=a},processResult:function(e){var d=this;var c=this.getCurrentStep();if(e.result.success&&this.nickNameFlag==true){e.result.errors=new Array();e.result.fieldErrors=new Array();e.result.fieldErrors.push(["activation.nickname",this.nickNameErrorMsg]);e.result.success=false;this.nickNameFlag=false;this.skipErrors=true}if(e.result==null||!e.result.success){if(this.nickNameFlag==true){var b=e.result.fieldErrors.slice(0);e.result.fieldErrors.push(["activation.nickname",this.nickNameErrorMsg]);var f=this.validator.organiseErrors(b)}else{if(this.skipErrors){var f=false;this.skipErrors=false}else{var f=this.validator.organiseErrors(e.result.fieldErrors)}}c.validateFail(this.validator,f,e.result.result);this.validator.processResult(e,f);this.updateCCDisplay(c);this.mainForm.formwizard("state").nextButton.removeAttr("disabled").removeClass("ui-state-disabled").addClass("ui-state-active");this.mainForm.formwizard("state").backButton.removeAttr("disabled").removeClass("ui-state-disabled").addClass("ui-state-active");jQuery("#backLabel").hide();jQuery("#backLink").show();return false}if(this.nickNameFlag==true){this.mainForm.formwizard("state").nextButton.removeAttr("disabled").removeClass("ui-state-disabled").addClass("ui-state-active");this.mainForm.formwizard("state").backButton.removeAttr("disabled").removeClass("ui-state-disabled").addClass("ui-state-active");jQuery("#backLabel").hide();jQuery("#backLink").show();return false}var c=this.getCurrentStep();c.complete=true;var a=d.getNextStep();if(!a.loaded){jQuery("#"+a.name).css("opacity",0)}return c.validateSuccess(e.result)},showHideRightModules:function(){if(this.getCurrentStep().showMiddleRightBox){jQuery("#middle-right-box").show()}else{jQuery("#middle-right-box").hide()}if(this.getCurrentStep().showTopRightBox){jQuery("#top-right-box").show()}else{jQuery("#top-right-box").hide()}},updateYourRadio:function(){jQuery("#yourRadioId").html("");jQuery("#radioIDDiv").hide();jQuery("#yourVIN").html("");jQuery("#vinDiv").hide();var c=jQuery("#radioId");var d=jQuery("input[name='subscribe']:checked").val();if(c.val()!=null&&c.val()!=""&&d!="2"){if(c.val().length<17){jQuery("#radioIDDiv").show();jQuery("#yourRadioId").html(c.val())}else{jQuery("#vinDiv").show();jQuery("#yourVIN").html(c.val())}this.getNextStep().showTopRightBox=true;this.stepsMap.plan.showTopRightBox=true}else{jQuery("#top-right-box").hide()}var a=jQuery("#nickname");var b=a.val();if(b!=null&&b!=""){b=b.replace(/(^[\s\xA0]+|[\s\xA0]+$)/g,"");if(a.val()!=null&&a.val()!=""&&b!=""&&d!="2"){jQuery("#break").empty();jQuery("#yourNickname").html(a.val());jQuery("#yourNickname").append(jQuery("<br/>"));jQuery("#yourNickname").append(jQuery("<br/>"))}else{jQuery("#break").empty();jQuery("#yourNickname").html(a.val())}}},updateYourNickname:function(){var c=jQuery("input[name='subscribe']:checked").val();var a=jQuery("#verifyPageRadioNickname");var b=a.val();b=b.replace(/^\s+|\s+$/g,"");if(a!=null&&a.val()!=null&&b!=""&&c!="2"){jQuery("#break").empty();jQuery("#yourNickname").html(b);jQuery("#yourNickname").append(jQuery("<br/><br/>"))}else{jQuery("#break").empty();jQuery("#yourNickname").html(b)}},updateShoppingCart:function(){var a=this.getExtraFormData();jQuery.each(a,function(){if(this.name=="struts.enableJSONValidation"){this.value=false}});a["struts.enableJSONValidation"]=false;if(this.checkFormDataForQuoteDetails()){jQuery.ajax({url:this.params.quoteUrl,data:a,async:false,success:function(b){jQuery("#middle-right-box").html(b)}})}else{}},checkFormDataForQuoteDetails:function(){var a=jQuery("#selectedPackagePlanKey").val();var c=jQuery("#selectedTermLengthKey").val();if(a!=""){if(this.packageSelection!=null){a=a.split(",");var b=this.packageSelection;jQuery.each(a,function(){var d=b.packages[this];if(d==null){return false}});return true}}return false},checkIfAlc:function(){if(this.packageSelection!=null){return this.packageSelection.processAlc()}return true},loadConfirmationSidebar:function(){jQuery("#back").hide();jQuery("#right-side-modules").addClass("sidebar");jQuery(".content-box").addClass("complete");jQuery("#right-side-modules").load("orderconfirmation_sidebar.action")}});var AddSubscriptionFlowManager=FlowManager.extend({packageSelection:null,unsecureAccount:null,getExtraFormData:function(c){var b=jQuery("#common-form-data").formToArray(true);return b},additionalInit:function(){var a=this;jQuery(document).bind("PACKAGE_CHANGE",function(b){});jQuery(document).bind("TERM_CHANGE",function(b){a.updateShoppingCart()});jQuery(document).bind("SIR_CHANGE",function(b){});jQuery(document).bind("LISTENER_INFO_COMPLETE",function(b){a.updateShoppingCart()});jQuery(document).bind("RADIO_CHANGE",function(b){a.updateYourRadio()});jQuery(document).bind("NICKNAME_CHANGE",function(b){a.updateYourNickname()});jQuery(document).bind("PACKAGE_SELECTION_COMPLETE",function(b){a.checkIfAlc()});jQuery(document).bind("LOAD_CONFIRMATION_SIDEBAR",function(b){a.loadConfirmationSidebar()});jQuery(document).bind("PAGE_CHANGE",function(b){a.showHideRightModules()});jQuery(document).bind("GIFT_CARD_APPLIED",function(c){var b=a.params.quoteUrl+"?viewType=NON_SC";jQuery("#quote-details-section").load(b,null)});if(this.skipToStep!=null){flowManager.mainForm.formwizard("show",this.skipToStep)}},showHideRightModules:function(){if(this.getCurrentStep().showMiddleRightBox){jQuery("#middle-right-box").show()}else{jQuery("#middle-right-box").hide()}if(this.getCurrentStep().showTopRightBox){jQuery("#top-right-box").show()}else{jQuery("#top-right-box").hide()}},updateYourRadio:function(){var c=jQuery("#yourRadioId").html();if(c!=null){c=c.replace(/^\s+|\s+$/g,"")}var d=jQuery("#yourVIN").html();if(d!=null){d=d.replace(/^\s+|\s+$/g,"")}jQuery("#yourRadioId").html("");jQuery("#radioIDDiv").hide();jQuery("#yourVIN").html("");jQuery("#vinDiv").hide();var j=null;if((c!=null&&c!="")||(d!=null&&d!="")){var f=jQuery("#radioId");if(f.val()!=null&&f.val()!=""){if(c!=null&&c!=""&&c!=f.val()){c=f.val()}if(d!=null&&d!=""&&d!=f.val()){d=f.val()}}j=true}else{c=jQuery("#radioId");j=false}var h=jQuery("input[name='subscribe']:checked").val();if(!j&&c.val()!=null&&c.val()!=""&&h!="2"){if(c.val().length<17){jQuery("#radioIDDiv").show();var a=c.val();if(a.indexOf("i")!=-1){a=a.replace(new RegExp("i","gm"),"1")}if(a.indexOf("I")!=-1){a=a.replace(new RegExp("I","gm"),"1")}if(a.indexOf("o")!=-1){a=a.replace(new RegExp("o","gm"),"0")}if(a.indexOf("O")!=-1){a=a.replace(new RegExp("O","gm"),"0")}if(a.indexOf("s")!=-1){a=a.replace(new RegExp("s","gm"),"5")}if(a.indexOf("S")!=-1){a=a.replace(new RegExp("S","gm"),"5")}jQuery("#yourRadioId").html(a)}else{jQuery("#vinDiv").show();jQuery("#yourVIN").html(c.val())}this.getNextStep().showTopRightBox=true;this.stepsMap.plan.showTopRightBox=true;this.stepsMap.order.showTopRightBox=true}else{if(h!="2"&&j==true){this.getNextStep().showTopRightBox=true;this.stepsMap.plan.showTopRightBox=true;this.stepsMap.order.showTopRightBox=true;if(c!=null&&c!=""){if(c.length<17){jQuery("#radioIDDiv").show();var a=c;if(a.indexOf("i")!=-1){a=a.replace(new RegExp("i","gm"),"1")}if(a.indexOf("I")!=-1){a=a.replace(new RegExp("I","gm"),"1")}if(a.indexOf("o")!=-1){a=a.replace(new RegExp("o","gm"),"0")}if(a.indexOf("O")!=-1){a=a.replace(new RegExp("O","gm"),"0")}if(a.indexOf("s")!=-1){a=a.replace(new RegExp("s","gm"),"5")}if(a.indexOf("S")!=-1){a=a.replace(new RegExp("S","gm"),"5")}jQuery("#yourRadioId").html(a)}else{jQuery("#vinDiv").show();jQuery("#yourVIN").html(c)}}if(d!=null&&d!=""){jQuery("#vinDiv").show();jQuery("#yourVIN").html(d)}}else{jQuery("#top-right-box").hide();jQuery("#yourRadio").hide()}}var e=jQuery("#nickname");var g=e.val();var b=jQuery("#yourNickname").html();if(b!=null){b=b.replace(/(^[\s\xA0]+|[\s\xA0]+$)/g,"")}if(g!=null){g=g.replace(/(^[\s\xA0]+|[\s\xA0]+$)/g,"")}jQuery("#yourNickname").hide();jQuery("#yourRadio").addClass("body-new-noNickname");if(h!="2"&&(b!=null&&b!=""||e.val()!=null&&e.val()!=""&&g!="")){jQuery("#break").empty();jQuery("#yourNickname").show();jQuery("#yourNickname").html(e.val());jQuery("#yourNickname").addClass("sm-label-new");jQuery(".body-new.body-new-noNickname").removeClass("body-new-noNickname")}},updateYourNickname:function(){var c=jQuery("input[name='subscribe']:checked").val();var a=jQuery("#verifyPageRadioNickname");var b=a.val();b=b.replace(/^\s+|\s+$/g,"");if(a!=null&&a.val()!=null&&b!=""&&c!="2"){jQuery("#break").empty();jQuery("#yourNickname").html(b);jQuery("#yourNickname").append(jQuery("<br/><br/>"))}else{jQuery("#break").empty();jQuery("#yourNickname").html(b)}},updateShoppingCart:function(){var a=this.getExtraFormData();jQuery.each(a,function(){if(this.name=="struts.enableJSONValidation"){this.value=false}});a["struts.enableJSONValidation"]=false;if(this.checkFormDataForQuoteDetails()){jQuery.ajax({url:this.params.quoteUrl,data:a,async:false,success:function(c){var b=tryParseJSON(c);if(!b){jQuery("#middle-right-box").html(c)}else{if(b.result.statusCode=="1550"){jQuery("#error-status-1550").show();jQuery("#terms-header").hide();jQuery("#terms-sub-header").hide();jQuery("#terms").hide();jQuery("#renew-header").hide();jQuery("div.gr-box-rounded.custom-radio.marginFiller").hide();jQuery("#proceed").hide();jQuery("#proceedDisabled").show()}}}})}else{}},checkFormDataForQuoteDetails:function(){var a=jQuery("#selectedPackagePlanKey").val();var d=jQuery("#selectedTermLengthKey").val();var b="modnewaccount";if(this.params.flowId==b){return true}if(a!=""){if(this.packageSelection!=null){a=a.split(",");var c=this.packageSelection;jQuery.each(a,function(){var e=c.packages[this];if(e==null){return false}});return true}}return false},checkIfAlc:function(){if(this.packageSelection!=null){return this.packageSelection.processAlc()}return true},loadConfirmationSidebar:function(){jQuery("#back").hide();jQuery("#right-side-modules").addClass("sidebar");jQuery(".content-box").addClass("complete");if(this.unsecureAccount!=null){jQuery("#right-side-modules").load("orderconfirmationunsecure_sidebar.action")}else{jQuery("#right-side-modules").load("orderconfirmation_sidebar.action")}},checkForIdleTime:function(){jQuery(window).keypress(function(a){if(isChatAlreadyOffered==false&&isChatEnabledForStep==true){resetTimer()}});jQuery(window).mousemove(function(a){if(isChatAlreadyOffered==false&&isChatEnabledForStep==true){resetTimer()}});jQuery(window).scroll(function(){if(isChatAlreadyOffered==false&&isChatEnabledForStep==true){resetTimer()}})}});var EnhancementFlowManager=AddSubscriptionFlowManager.extend({});ConfirmationPage=function(a){this.init(a)};jQuery.extend(ConfirmationPage.prototype,{flowManager:null,init:function(a){this.flowManager=a;jQuery(".edit-button").click(function(){var c=jQuery(this).attr("rel");var b=a.stepsMap[c];a.gotoStep(b)})}});var WinbackFlowManager=FlowManager.extend({packageSelection:null,getExtraFormData:function(c){var b=jQuery("#common-form-data").formToArray(true);return b},additionalInit:function(){var a=this;jQuery(document).bind("WINBACK_PACKAGE_CHANGE",function(b){});jQuery(document).bind("PROMO_CHANGE",function(c,b){a.updateNewSubscription(b)});jQuery(document).bind("LOAD_CONFIRMATION_SIDEBAR",function(b){a.loadConfirmationSidebar()});flowManager.mainForm.formwizard("show","paymentinfo")},updateNewSubscription:function(b){var c=b.split("||");var e=c[0]+"||"+c[1];var a=c[2];var d=this.getExtraFormData();jQuery.each(d,function(){if(this.name=="activation.selectedPackagePlanKey.planDescriptors"){this.value=e}if(this.name=="activation.selectedPackagePlanKey.termLength"){this.value=a}if(this.name=="struts.enableJSONValidation"){this.value=false}});jQuery.ajax({url:this.params.quoteUrl,data:d,async:false,success:function(f){jQuery("#new-subcription-details").html(f)}});this.alignCurrentAndNewSubscriptionBoxes()},checkFormDataForQuoteDetails:function(){var a=jQuery("#selectedPackagePlanKey").val();var c=jQuery("#selectedTermLengthKey").val();if(a!=""){if(this.packageSelection!=null){a=a.split(",");var b=this.packageSelection;jQuery.each(a,function(){var d=b.packages[this];if(d==null){return false}});return true}}return false},loadConfirmationSidebar:function(){jQuery("#back").hide();jQuery("#right-side-modules").addClass("sidebar");jQuery(".content-box").addClass("complete");jQuery("#right-side-modules").load("winbackthankyou_sidebar.action")}});function tryParseJSON(a){try{var c=JSON.parse(a);if(c&&typeof c==="object"&&c!==null){return c}}catch(b){}return false}var PackageSelection=Class.extend({packageTabs:null,packages:null,alcManager:null,alcDone:false,dataNoThanks:false,isNewAccountFlow:true,isSXIRLoginSameAsAccountCredentials:false,isSameAsAccountCredentialOnCurrentService:false,linkedSirExists:false,isDataAddOnExists:false,isTelematicsAddOnExists:false,isTelematicsTrialExists:false,isSiriusXMIR:false,init:function(j,g,k,f,h,n,b,m,a,q,d,e){var o=this;this.packageTabs=j;this.packages=g;this.alcManager=k;this.isNewAccountFlow=f;this.isSXIRLoginSameAsAccountCredentials=h;this.isSameAsAccountCredentialOnCurrentService=n;this.linkedSirExists=b;this.isDataAddOnExists=m;this.isTelematicsAddOnExists=a;this.isTelematicsTrialExists=q;this.isInitialPageLoad=d;this.isSiriusXMIR=e;var l=new RadioButtons();var c=new CheckBoxes();var p=false;if(jQuery(".add-sir")&&jQuery(".add-sir").css("display")!="block"&&jQuery(".data-addons")&&jQuery(".data-addons").css("display")!="block"&&jQuery(".telematics-addons")&&jQuery(".telematics-addons").css("display")!="block"){jQuery(".add-ons").hide();jQuery("#addonHeaderText").hide()}jQuery("input.package-select").click(function(){var A=jQuery("div[class*='sirloss']");if(A!=null&&A!=""){A.hide()}if(jQuery(this).is(".infotainment")){if(jQuery(this).is(".bundle")){var w=jQuery(this).attr("infotainment-bundle");if(w!=null){jQuery("input.infotainment[infotainment-component~=' "+w+" ']:checkbox:checked").each(function(){this.checked=false;jQuery(this).next("a.checkbox").removeClass("checked")})}}else{var C=jQuery(this).attr("infotainment-component");if(C!=null){var r=C.split(" ");jQuery.each(r,function(D,E){jQuery("input.infotainment.bundle[infotainment-bundle='"+jQuery.trim(E)+"']:checkbox:checked").each(function(){this.checked=false;jQuery(this).next("a.checkbox").removeClass("checked")})})}}}if(!jQuery(this).is(".upsell")){jQuery("input.package-select.upsell:checkbox:checked").each(function(){this.checked=false;jQuery(this).next("a.checkbox").removeClass("checked")})}if(jQuery(this).is(".addon")){jQuery(document).trigger("ADDON_CHANGE");if(jQuery(this).is(".telematics")){var v=g[this.value];o.showAudioAddOnAlert(v)}else{if(jQuery(this).is(".telematics-nothanks")&&q){o.showTelematicsNoThanksAlert()}}}else{if(jQuery(this).is(".upsell")){o.setPackageSelections();jQuery(document).trigger("UPSELL_PACKAGE_CHANGE")}else{if(jQuery(this).is(".infotainment")&&jQuery(this).is(".checkbox")){var B=jQuery("input[name='radio-package'].styled:radio:checked");B.attr("checked",false);B.next("a.radio").removeClass("checked")}else{if(jQuery(this).is(".audio")||jQuery(this).is(".telematics")){var x=[];var u=jQuery("input[name='radio-package'].infotainment.base.radio.styled:checked");if(u.val()!=null){x.push(u.val())}jQuery("input[name='radio-package'].infotainment.base.styled:checkbox:checked").each(function(){var D=g[this.value];x.push(this.value);this.checked=false;jQuery(this).next("a.checkbox").removeClass("checked")});if(x!=null){jQuery.each(x,function(){var E=jQuery('input[name="infotainment-options"].styled.package-select[value="'+this+'"]').next();E.click();var D=g[this];if(D.isPartOfTrial=="true"){jQuery(".addon-nothanks").hide()}})}}}var t=o.getBasePackage();if(!t){o.setPackageSelections();o.setPackageSelectionsDisplay()}else{jQuery(document).trigger("PACKAGE_CHANGE")}}}});jQuery(document).bind("UPSELL_PACKAGE_CHANGE",function(v){if(!f&&(h&&!n)&&!b){var u=flowManager.packageSelection.packages;var w=jQuery("input.styled.package-select:checked");var r=false;jQuery.each(w,function(){var x=u[this.value];if(x!=null&&x.isSIRRequired){r=true}});var t=jQuery("#upsell-linked-sir-form");if(t){if(r){jQuery("#upsell-linked-sir-form").show()}else{jQuery("#upsell-linked-sir-form").hide()}}}});jQuery(document).bind("PACKAGE_CHANGE",function(A){var v=o.getBasePackage();var u=jQuery("#selectedPackagePlanKey").val();if(!v.isSirOnly){var x=(v.isEligibleForLinkedSIR&&!v.isSIRRequired)||(v.isSIRRequired);if(v.isAudioPackage){jQuery(".add-ons").show();jQuery(".add-on-header").show();if(x){jQuery(".add-sir").show()}if(o.isTelematicsAddOnExists){jQuery(".telematics-addons").show()}if(o.isDataAddOnExists){jQuery(".data-addons").show()}if(x){if(jQuery(".add-sir")&&jQuery(".add-sir").css("display")!="block"&&jQuery(".data-addons")&&jQuery(".data-addons").css("display")!="block"&&jQuery(".telematics-addons")&&jQuery(".telematics-addons").css("display")!="block"){jQuery(".add-ons").hide();jQuery("#addonHeaderText").hide()}if(v.isSIRRequired){if(v.isPartOfTrial=="true"){jQuery("#addOnSubtitle").hide()}jQuery("#internet-radio-options").hide();jQuery(".sir-not-required").hide();jQuery("input[name='internet-listening']:radio:checked").each(function(){this.checked=false;jQuery(this).next("a.radio").removeClass("checked")});jQuery("#sir-included").show();jQuery("[id=package_name]").each(function(){jQuery(this).html(v.name)});jQuery("#is-login-same-as-account-credentials").hide();jQuery("#linked-sir-info").hide();jQuery("#linked-sir-form").hide();if(f){jQuery("#sir-included-userid").show()}else{jQuery("#sir-included-userid").hide();if(((!h)||(h&&n))){jQuery("#is-login-same-as-account-credentials").show()}else{if(b){jQuery("#linked-sir-info").show()}else{jQuery("#linked-sir-form").show()}}}}else{jQuery("#internet-radio-options").show();jQuery(".sir-not-required").show();jQuery("#sir-included").hide();var t=jQuery('input[name="internet-listening"].styled:radio:checked').val();if(t){jQuery('input[name="internet-listening"].styled:radio:checked').trigger("click")}else{jQuery("#linked-sir-form").hide();jQuery("#is-login-same-as-account-credentials").hide();jQuery("#linked-sir-info").hide()}jQuery("#addOnSubtitle").show()}}}if(v.isTelematics){if(o.isDataAddOnExists){jQuery(".add-ons").show();jQuery(".add-on-header").show();jQuery(".data-addons").show()}}if(!x){var t=jQuery('input[name="internet-listening"].styled:radio:checked').val();if((t!=null&&t!=0)||o.linkedSirExists){if(jQuery(".sirloss"+v.type)!=null){jQuery(".sirloss"+v.type).show()}}o.hideSIRAddOn()}if(!o.isDataAddOnExists||(!v.isAudioPackage&&!v.isTelematics)){o.hideInfotainmentAddOn()}if(!o.isTelematicsAddOnExists||!v.isAudioPackage){o.hideTelematicsAddOn()}if(!x&&!o.isDataAddOnExists&&!o.isTelematicsAddOnExists){jQuery(".add-ons").hide();jQuery("#addonHeaderText").hide()}}else{o.hideSIRAddOn()}o.setPackageSelections();o.setPackageSelectionsDisplay();var w=jQuery("#selectedPackagePlanKey").val();if((u!="SIR_IP_SA")&&(u!=w)){o.showAudioAddOnAlert(v)}var B=jQuery("input[name='radio-package'].audio.styled:radio:checked").val();var r=flowManager.packageSelection.packages[B];if(currentSubscriptionhasFreeSIR=="true"&&currentSubscriptionhasLifeTimeSelect=="true"&&null!=r&&r.isSelect){jQuery("input[name='internet-listening']:radio:checked").each(function(){this.checked=false;jQuery(this).next("a.radio").removeClass("checked")});jQuery("[id=package_name]").each(function(){jQuery(this).html(v.name)});jQuery("#sir-included").show();jQuery("#is-login-same-as-account-credentials").show();jQuery("#internet-radio-options").hide();jQuery(".sir-not-required").hide();jQuery("#internet-selection").html(fSIRMessage).addClass("bold");o.setPackageSelections();o.setPackageSelectionsDisplay()}});jQuery(document).bind("ADDON_CHANGE",function(r){if(flowManager!=null&&flowManager.packageSelection!=null){flowManager.packageSelection.dataNoThanks=null}o.setPackageSelections();o.setPackageSelectionsDisplay()});jQuery(document).bind("TAB_CHANGE",function(v,t){var r=jQuery(t.panel);if(r.attr("id")=="tabs-5"){jQuery(".add-ons").hide();jQuery("#addonHeaderText").hide();jQuery(".add-on-header").hide()}else{if(r.attr("id")=="tabs-3"){o.hideSIRAddOn();o.hideTelematicsAddOn();if(!o.isDataAddOnExists){jQuery(".add-ons").hide();jQuery("#addonHeaderText").hide();jQuery(".add-on-header").hide()}else{var w=jQuery("input[name='radio-package'].infotainment.styled:checked").val();if(w==null||!w){jQuery(".add-ons").show();jQuery("#addonHeaderText").show();jQuery(".add-on-header").show();jQuery(".data-addons").show()}}}else{var u=jQuery("input[name='radio-package'].telematics.styled:checked").val();var w=jQuery("input[name='radio-package'].infotainment.styled:checked").val();if((u==null||!u)&&(w==null||!w)){jQuery(".add-ons").show();jQuery("#addonHeaderText").show();jQuery(".add-on-header").show();if(o.isDataAddOnExists){jQuery(".data-addons").show()}if(o.isTelematicsAddOnExists){jQuery(".telematics-addons").show()}}}}});jQuery("#package-tabs").tabs({select:function(t,u){jQuery("#package-tabs").find("a").removeClass("active");jQuery(u.tab).addClass("active");jQuery(document).trigger("TAB_CHANGE",[u]);var r=jQuery(u.panel);o.preselectPackages(r)},show:function(r,t){jQuery("#package-tabs").find("a").removeClass("active");jQuery(t.tab).addClass("active")}})},setPackageSelections:function(){var b=flowManager.packageSelection.packages;var a="";var c=jQuery("input.styled.package-select:checked");jQuery.each(c,function(){var d=b[this.value];if(d!=null){if(a==""){a=d.package_name}else{a=a+","+d.package_name}}});jQuery("#selectedPackagePlanKey").val(a)},getPackageSelections:function(){if(jQuery("#selectedPackagePlanKey").val()!=null&&jQuery("#selectedPackagePlanKey").val()!=""){var a=jQuery("#selectedPackagePlanKey").val().split(",");var c=new Array();var b=flowManager.packageSelection.packages;jQuery.each(a,function(){c[this]=b[this]});return c}return null},getBasePackage:function(){var b=jQuery('input[name="radio-package"].styled:radio:checked').val();if(b==null){jQuery('input[name="telematics-package"].styled:radio:checked').each(function(){b=this.value})}if(b==null){jQuery('input[name="radio-package"].infotainment.styled:checkbox:checked').each(function(){b=this.value})}var a=flowManager.packageSelection.packages[b];return a},hideSIRAddOn:function(){jQuery("input[name='internet-listening']:radio:checked").each(function(){this.checked=false;jQuery(this).next("a.radio").removeClass("checked")});jQuery(".add-sir").hide()},hideInfotainmentAddOn:function(){jQuery("input[name='infotainment-options'].infotainment.addon.styled:checkbox:checked").each(function(){this.checked=false;jQuery(this).next("a.checkbox").removeClass("checked")});var a=jQuery("input[name='infotainment-options'].infotainment.addon.styled:radio:checked");a.attr("checked",false);a.next("a.radio").removeClass("checked");jQuery(".data-addons").hide()},hideTelematicsAddOn:function(){var a=jQuery("input[name='telematics-package'].telematics.addon.styled:radio:checked");a.attr("checked",false);a.next("a.radio").removeClass("checked");jQuery(".telematics-addons").hide()},setPackageSelectionsDisplay:function(){jQuery("[id$=_fName]").addClass("hiddentypeSubscription");jQuery("[id$=_fName]").removeClass("typeSubscription");jQuery("[id$=_fstartDate]").addClass("hiddentypeSubscription");jQuery("[id$=_fstartDate]").removeClass("typeSubscriptionDate");jQuery("[id$=_fstartDate]").removeClass("typeSubscription");jQuery("[id$=_fTerm]").addClass("hiddentypeSubscription");jQuery("[id$=_fTerm]").removeClass("typeSubscription");var l=jQuery("input[name='radio-package'].audio.styled:radio:checked").val();var u=flowManager.packageSelection.packages[l];var w=jQuery("input[name='radio-package'].infotainment.styled:checked");var m=jQuery("input[name='infotainment-options'].infotainment.styled:checked");var a=jQuery('input[name="telematics-package"].styled:radio:checked').val();if(a==null&&l==null&&(w==null||w.length==0)){a=jQuery('input[name="radio-package"].styled:radio:checked').val()}var c=flowManager.packageSelection.packages[a];var b=jQuery('input[name="internet-listening"].styled:radio:checked').val();if(!b&&this.linkedSirExists){b=sirPackageName}var e=flowManager.packageSelection.packages[b];if(u!=null){if(u.isSirOnly){jQuery("#internet-selection").html(u.name).addClass("bold")}else{if(u.isEligibleForLinkedSIR||u.isSIRRequired){jQuery(".yournewsubscription").find("#sir-selection").first().css("visibility","visible");if(u.isTelematicsRequired){jQuery("#telematics-selection").html(u.telematicsIncludedMsg).removeClass("bold")}if(u.isSIRRequired){jQuery("#internet-selection").html(u.sirIncludedMsg).removeClass("bold")}else{if(e!=null&&e.isPartOfTrial=="false"){jQuery("#internet-selection").html(e.name);jQuery("#internet-selection").addClass("bold");jQuery("#internet_fName").addClass("typeSubscription bold").removeClass("hiddentypeSubscription");jQuery("#internet_fName").html(e.name);jQuery("#internet_fstartDate").addClass("typeSubscriptionDate").addClass("typeSubscription").removeClass("hiddentypeSubscription");jQuery("#internet_fTerm").addClass("typeSubscription").removeClass("hiddentypeSubscription")}else{if(e!=null&&e.isPartOfTrial=="true"){jQuery("#internet-selection").html("")}else{jQuery("#internet-selection").html(noSIRMessage).removeClass("bold");jQuery("#internet-subselection").html("")}}}}else{jQuery("#internet-selection").html("");jQuery(".yournewsubscription").find("#sir-selection").first().css("visibility","hidden")}}jQuery("#special-offer-selection").html("");jQuery("#audio-selection").html("");if(jQuery("#isTrialWithPremierOrPremierFF").val()=="true"){var B=jQuery(".yournewsubscription").find("#audio-selection").last();if(!B.is(":empty")){B.html("")}}if(u.isPartOfTrial=="false"){jQuery("#audio-selection").addClass("bold");if(u.isAddOnUpgrade&&jQuery("#isTrialWithPremierOrPremierFF").val()!="true"){jQuery("#audio-selection").html(u.name+"&nbsp;"+upgradeSuffix)}else{jQuery("#audio-selection").html(u.name)}}jQuery("#audio_fName").addClass("typeSubscription bold").removeClass("hiddentypeSubscription");jQuery("#audio_fName").html(u.name);jQuery("#audio_fstartDate").addClass("typeSubscriptionDate").addClass("typeSubscription").removeClass("hiddentypeSubscription");jQuery("#audio_fTerm").addClass("typeSubscription").removeClass("hiddentypeSubscription");var v=jQuery("#audio-selection");var f=jQuery(".yournewsubscription").find(".your_subscription_audio_heading").find(".typeSubscriptionDate");var k=jQuery("#audio_fName").html();if(k==""||k==null){if(!u.isAddOnFamilyFriendly){if(!v.is(":empty")){v.insertAfter(f)}}else{if(!f.is(":empty")){f.insertAfter(v)}}}else{if(!u.isAddOnFamilyFriendly&&!v.is(":empty")){v.html("")}}var r=jQuery("#audio-selection").html();if(r==""||r==null){jQuery("#audio-selection").css({height:"0px"})}else{jQuery("#audio-selection").css({height:"18px"})}}else{jQuery("#audio-selection").html(noAudioMessage).removeClass("bold")}if(c!=null){if(c.isPartOfTrial=="false"&&(!c.isAddOnDowngrade||c.isAddOnFamilyFriendly)){jQuery("#telematics-selection").addClass("bold");if(c.isAddOnUpgrade){jQuery("#telematics-selection").html(c.name+"&nbsp;"+upgradeSuffix)}else{jQuery("#telematics-selection").html(c.name)}}else{if(c.isPartOfTrial=="true"){jQuery("#telematics-selection").html("")}else{jQuery("#telematics-selection").html(c.name).addClass("bold")}}jQuery("#telematics_fName").addClass("typeSubscription bold").removeClass("hiddentypeSubscription");jQuery("#telematics_fName").html(c.name);jQuery("#telematics_fstartDate").addClass("typeSubscriptionDate").addClass("typeSubscription").removeClass("hiddentypeSubscription");jQuery("#telematics_fTerm").addClass("typeSubscription").removeClass("hiddentypeSubscription");var A=jQuery("#telematics-selection").html();if(A==""||A==null){jQuery("#telematics-selection").css({height:"0px"})}else{jQuery("#telematics-selection").css({height:"18px"})}}else{if(u==null||!u.isTelematicsRequired){jQuery("#telematics-selection").html(noTelematicsMessage).removeClass("bold");jQuery("#telematics-selection").css({height:"18px"})}}var g=false;var t=false;var n=flowManager.packageSelection.packages;var j="";if(w&&w.length>0){jQuery.each(w,function(){var x=n[this.value];if(x!=null&&x.isPartOfTrial=="false"){j=j+"<div>"+x.name+"</div>";t=true}if(x.isPartOfTrial=="true"){g=true}var C="#data_"+this.value+"_fName";jQuery(C).addClass("typeSubscription").removeClass("hiddentypeSubscription");var E="#data_"+this.value+"_fstartDate";jQuery(E).addClass("typeSubscriptionDate").addClass("typeSubscription").removeClass("hiddentypeSubscription");var D="#data_"+this.value+"_fTerm";jQuery(D).addClass("typeSubscription").removeClass("hiddentypeSubscription")})}else{if(m){jQuery.each(m,function(){var C=n[this.value];if(C!=null&&C.isPartOfTrial=="false"){j=j+"<div>"+C.name+"</div>";t=true}if(C!=null&&C.isPartOfTrial=="true"){g=true}var D="#data_"+this.value+"_fName";jQuery(D).addClass("typeSubscription").removeClass("hiddentypeSubscription");var F="#data_"+this.value+"_fstartDate";jQuery(F).addClass("typeSubscriptionDate").addClass("typeSubscription").removeClass("hiddentypeSubscription");var E="#data_"+this.value+"_fTerm";jQuery(E).addClass("typeSubscription").removeClass("hiddentypeSubscription");var G=jQuery("input[name='radio-package'].audio.styled:radio:checked").val();var x=flowManager.packageSelection.packages[G];if(currentSubscriptionhasFreeSIR=="true"&&currentSubscriptionhasLifeTimeSelect=="true"&&null!=x&&x.isSelect){jQuery("#internet-selection").html(fSIRMessage).addClass("bold")}})}}jQuery("#data-selection").html("");if(jQuery.browser.msie&&parseInt(jQuery.browser.version,10)<8){jQuery("#data-selection").css({height:"18px"})}if(j!=""){if(g&&!t){jQuery("#data-selection").html("")}else{jQuery("#data-selection").html(j).addClass("bold")}if(jQuery.browser.msie&&parseInt(jQuery.browser.version,10)<8){var o=(j.match(/div/g)).length/2;for(var h=1;h<o;h++){jQuery("#data-selection").height($("#data-selection").height()+18)}}}else{if(!g&&this.isDataAddOnExists){jQuery("#data-selection").html("You have not selected any Infotainment options.").removeClass("bold");var q=jQuery("#data-selection");var p=jQuery(".yournewsubscription").find(".your_subscription_data_heading").find(".typeSubscriptionDate");if(null!=p&&!p.is(":empty")){q.insertAfter(p)}}}var d=jQuery("#data-selection").html();if(jQuery.browser.msie){if(d==null||d==""){jQuery("#data-selection").css({height:"0px"});jQuery("#data-selection").css({"min-height":"0px"})}}flowManager.alignCurrentAndNewSubscriptionBoxes()},preSelectTabs:function(){if(jQuery("#selectedPackagePlanKey").val()!=null&&jQuery("#selectedPackagePlanKey").val()!=""){var a=jQuery("#selectedPackagePlanKey").val().split(",");var f=flowManager.packageSelection.packages;var e=false;var g=false;var d=false;var b=false;var c=false;jQuery.each(a,function(){var h=f[this];if(this.match("_ESP")){c=true}else{if(h.offerType=="FEATURED_PACKAGES"||h.offerType=="PROMO_PACKAGES"){e=true}else{if(h.offerType=="ALL_PACKAGES"){var j=jQuery("#package-selections").find('#all-plans input.styled.package-select[value="'+this+'"]').next();if(j!=null&&j.length==1){e=true}else{g=true}}else{if(h.offerType=="DATA_PACKAGES"&&!jQuery("#isPurchaseAudioWithDataTrial").val()=="true"){d=true}else{if(h.offerType=="TELEMATICS_PACKAGES"){b=true}}}}}});if(e){jQuery("a[href=#tabs-2]").click()}else{if(g){jQuery("a[href=#tabs-2]").click()}else{if(b){jQuery("a[href=#tabs-3]").click()}else{if(c){jQuery("a[href=#tabs-4]").click()}else{if(d){jQuery("a[href=#tabs-5]").click()}}}}}}},preselectPackages:function(a){packagesSelected=true;var k=this;if(a==null){a=jQuery("#package-selections")}if(jQuery("#selectedPackagePlanKey").val()!=null&&jQuery("#selectedPackagePlanKey").val()!=""){var e=jQuery("#selectedPackagePlanKey").val().split(",");var g=flowManager.packageSelection.packages;var d=false;var j=false;var c=false;var b=false;jQuery.each(e,function(){var l=g[this];if(this.match("_ESP")){b=true}else{if(l.offerType=="FEATURED_PACKAGES"||l.offerType=="ALL_PACKAGES"||l.offerType=="PROMO_PACKAGES"){d=true}}if(l.offerType=="INTERNET_PACKAGES"){j=true}if(l.offerType=="TELEMATICS_PACKAGES"){c=true}});jQuery.each(e,function(){var l=g[this];if(l.offerType=="DATA_PACKAGES"||l.offerType=="DATA_ADDON_PACKAGES"){if(d||c){var o=null;o=a.find('input[name="infotainment-options"].styled.package-select[value="'+this+'"]').next();o.click();if(l.isPartOfTrial=="true"){jQuery(".addon-nothanks").hide()}}else{var n=a.find('#package-tabs input.styled.package-select[value="'+this+'"]').next();n.click()}}else{if(l.offerType=="TELEMATICS_PACKAGES"||l.offerType=="TELEMATICS_ADDON_PACKAGES"){if(d){var o=null;o=a.find('input[name="telematics-package"].styled.package-select[value="'+this+'"]').next();o.click()}else{var n=a.find('#package-tabs input.styled.package-select[value="'+this+'"]').next();n.click()}}else{var m=a.find('#all-plans input.styled.package-select[value="'+this+'"]').next();if(m!=null&&m.length==1){m.click()}else{var p=a.find('input.styled.package-select[value="'+this+'"]').next();if(p!=null&&p.length>0){p.click()}else{jQuery(document).trigger("PACKAGE_CHANGE")}}}}});var f=jQuery("#showInternetOptionSelected").val();if(f=="true"&&!j){var h=a.find('input[name="internet-listening"].styled.radio.package-select[value="0"]').next();h.click()}}else{jQuery("input.styled.package-select:checked").each(function(){this.click()});if(!jQuery("input.styled.package-select:checked").val()){k.hideSIRAddOn();if(!k.isDataAddOnExists&&!k.isTelematicsAddOnExists){jQuery(".add-ons").hide();jQuery("#addonHeaderText").hide()}}}},showAudioAddOnAlert:function(a){if((a.isAudioPackage&&a.audioAddOnAlertMsg!=null&&a.audioAddOnAlertMsg!="")||(a.isTelematics&&a.telematicsAddOnAlertMsg!=null&&a.telematicsAddOnAlertMsg!="")){if(a.isAudioPackage){jQuery("#addon-dialog-msg").html(a.audioAddOnAlertMsg)}else{if(a.isTelematics){jQuery("#addon-dialog-msg").html(a.telematicsAddOnAlertMsg)}}jQuery("#addon-dialog").dialog({resizable:false,height:"auto",width:660,modal:true,open:function(b,c){jQuery(".ui-dialog-titlebar-close").show()},close:function(b,c){tracker.performTracking(tracker.buildFullTrackingId(null,null,null,"package","nochangetotrialpopupcontinue",null))}});jQuery("#addon-dialog").dialog("open")}},showTelematicsNoThanksAlert:function(){jQuery("#addon-dialog-msg").html(telematicsNoThanksAlertMessage);jQuery("#addon-dialog").dialog({resizable:false,height:130,width:660,modal:true,open:function(a,b){},close:function(a,b){tracker.performTracking(tracker.buildFullTrackingId(null,null,null,"package","nochangetotrialpopupcontinue",null))}});jQuery("#addon-dialog").dialog("open")},processAlc:function(){var b=this.getPackageSelections();if(b!=null&&(!this.alcDone||jQuery("#payload").val()=="")){this.alcDone=true;var a=jQuery("#selectedPackagePlanKey").val().split(",");return this.alcManager.onSubmitPackageSelection(a,b,this)}else{this.alcDone=false;return true}},completeAlc:function(){flowManager.proceedToNextStep()},showRenewalFlow:function(){jQuery(".RenewalFlowPackagePrice").each(function(){jQuery(this).css("display","block")});jQuery(".EnhancementFlowPackagePrice").each(function(){jQuery(this).css("display","none")});flowManager.alignCurrentAndNewSubscriptionBoxes()},hideRenewalFlow:function(){jQuery(".RenewalFlowPackagePrice").each(function(){jQuery(this).css("display","none")});jQuery(".EnhancementFlowPackagePrice").each(function(){jQuery(this).css("display","block")});if(jQuery.browser.mozilla||/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())){jQuery("#pricing-module .EnhancementFlowPackagePrice .renewat").each(function(){jQuery(this).css("margin-top",0+"px")})}},bindTrialClickEvents:function(g,d,f,a,e,c){g.unbind("click");g.bind("click",function(){var k="newaccount";var h="newtrialactivation";var m="changeoemconverttrial";var u="oemtrialended";var j=false;if(flowManager.isEnhancedConversionFlow!=null){j=flowManager.isEnhancedConversionFlow}var p=flowManager.getCurrentStep().flow;var n=jQuery("input:radio[name=trialActivation]:checked").val();var t=flowManager.getCurrentStep().name;if(t!="package"){g.unbind("click");jQuery.each(f,function(w,x){g.bind("click",x.handler)});jQuery("#continueButton").trigger("click");return false}if(n=="renew"){jQuery("input[name=activation.email]").val(jQuery("input[name=trialEmail]").val());jQuery("input[name=activation.user.userName]").val(jQuery("input[name=trialUserName]").val());jQuery("input[name=activation.user.password]").val(jQuery("input[name=trialUserPassword]").val());jQuery("input[name=activation.user.password2]").val(jQuery("input[name=trialUserPassword2]").val());var v=true;if(jQuery("#activation-linked-sir-form").is(":visible")){var o=jQuery("#trialPackageDialog").formToArray(true);jQuery.ajax({url:"addradioselectpackage_validateSirCredentials.action",data:o.concat(flowManager.getExtraFormData()),dataType:"json",async:false,success:function(A){tracker.pageIdOverride=null;omnituretracker.pageIdOverride=null;jQuery("#chatPageIdOverride").val("");if(A.result==null||!A.result.success){var w=new Object();jQuery.each(A.result.fieldErrors,function(){w[this[0]]=this[1][0]});if(w.trialUserName!=null){var x=w.trialUserName;tracker.performErrorTracking(x)}}if(!flowManager.processResult(A)){v=false}}})}if(v){jQuery("#trialPackageDialog").fadeOut(400,function(){jQuery("#packageSelection").fadeIn();if(oemVal=="renewal"){flowManager.packageSelection.showRenewalFlow()}else{flowManager.packageSelection.hideRenewalFlow()}tracker.pageIdOverride=null;omnituretracker.pageIdOverride=null;jQuery("#chatPageIdOverride").val("");jQuery(document).trigger("PAGE_CHANGE",["package",flowManager.getCurrentStep().flow]);jQuery(document).trigger("PAGE_LOAD",["package",flowManager.getCurrentStep().flow]);var w=jQuery("input.styled.package-select[value]").next("a.radio.checked");if(w==null||w.length==0){flowManager.packageSelection.preselectPackages();flowManager.packageSelection.preSelectTabs()}flowManager.chatWidgetExecute();if(flowManager.hiddenStep!=null){var B="order";if(p==k||p==h||j){B="listener"}var x=null;for(var A=0;A<flowManager.steps.length;A++){if(flowManager.steps[A].name==B){x=A;break}}if(x!=null){flowManager.showHiddenStep(x,jQuery("#package"))}flowManager.hiddenStep=null}g.unbind("click");jQuery.each(f,function(C,D){g.bind("click",D.handler)});d.unbind("click");jQuery.each(c,function(C,D){d.bind("click",D.handler)})})}return false}else{if(n=="activate"){oemVal="";flowManager.packageSelection.hideRenewalFlow();flowManager.getCurrentStep().complete=true;var l="plan";var r=null;for(var q=0;q<flowManager.steps.length;q++){if(flowManager.steps[q].name==l){r=q;break}}if(r!=null){flowManager.hideStep(r,jQuery("#plan"))}var o=jQuery("#trialPackageDialog").formToArray(true);jQuery.ajax({url:flowManager.getCurrentStep().submitUrl,data:o.concat(flowManager.getExtraFormData()),dataType:"json",success:function(B){tracker.pageIdOverride=null;omnituretracker.pageIdOverride=null;jQuery("#chatPageIdOverride").val("");if(B.result==null||!B.result.success){var w=new Object();jQuery.each(B.result.fieldErrors,function(){w[this[0]]=this[1][0]});if(w.trialUserName!=null){var A=w.trialUserName;tracker.performErrorTracking(A)}}if(flowManager.processResult(B)){var x=flowManager.checkForChanges();if(x){jQuery.ajax({url:flowManager.params.quoteUrl+"?viewType="+jQuery("#viewType").val()});setTimeout(function(){if(j&&(p==m||p==u)){flowManager.mainForm.formwizard("show","verify")}else{if(p==k||p==h||j){flowManager.mainForm.formwizard("show","listener")}else{flowManager.mainForm.formwizard("show","order")}}},3000)}else{if(j&&(p==m||p==u)){flowManager.mainForm.formwizard("show","verify")}else{if(p==k||p==h||j){flowManager.mainForm.formwizard("show","listener")}else{flowManager.mainForm.formwizard("show","order")}}}g.unbind("click");jQuery.each(f,function(C,D){g.bind("click",D.handler)});d.unbind("click");jQuery.each(e,function(C,D){d.bind("click",D.handler)})}}});return false}}});a=jQuery.extend(true,{},g.data("events").click);d.unbind("click");d.bind("click",function(){if(oemVal=="renewal"){flowManager.packageSelection.showRenewalFlow()}else{flowManager.packageSelection.hideRenewalFlow()}var j=flowManager.getCurrentStep().name;if(j!="package"){d.unbind("click");jQuery.each(e,function(k,l){d.bind("click",l.handler)});jQuery("#backLink").trigger("click");d.unbind("click");jQuery.each(c,function(k,l){d.bind("click",l.handler)});return false}else{var h=jQuery("#packageSelection").css("display");if(h==null||h==""||h=="block"){jQuery("#packageSelection").fadeOut(400,function(){jQuery("#trialPackageDialog").fadeIn();jQuery(document).trigger("PAGE_CHANGE",["activationopt",flowManager.getCurrentStep().flow]);jQuery(document).trigger("PAGE_LOAD",["activationopt",flowManager.getCurrentStep().flow]);jQuery("#chatPageIdOverride").val("activationopt");flowManager.chatWidgetExecute()});g.unbind("click");jQuery.each(a,function(k,l){g.bind("click",l.handler)});d.unbind("click");jQuery.each(e,function(k,l){d.bind("click",l.handler)});return false}else{g.unbind("click");jQuery.each(f,function(k,l){g.bind("click",l.handler)});d.unbind("click");jQuery.each(e,function(k,l){d.bind("click",l.handler)});jQuery("#backLink").trigger("click");return false}}});c=jQuery.extend(true,{},d.data("events").click);var b=new Object();b.clickEvent=a;b.backClickEvent=c;return b},trialActivation:function(){var g=this;var h=flowManager.mainForm.formwizard("state").nextButton;var j=flowManager.mainForm.formwizard("state").backButton;new RadioButtons();var e=jQuery.extend(true,{},h.data("events").click);var f=null;var a=null;var b=jQuery.extend(true,{},j.data("events").click);var c=jQuery("input:radio[name=trialActivation]:checked").val();if(c=="renew"||c=="activate"){var d=g.bindTrialClickEvents(h,j,e,f,b,a);f=d[0];a=d[1]}jQuery("input:radio[name=trialActivation]").bind("click",function(){if(g.isSXIRLoginSameAsAccountCredentials){jQuery("#activation-linked-sir-form").show()}if(jQuery(this).val()=="activate"&&jQuery(this).is(":checked")){jQuery("input:hidden[id=viewType]").val("activate_trial")}else{jQuery("input:hidden[id=viewType]").val("")}var k=g.bindTrialClickEvents(h,j,e,f,b,a);f=k[0];a=k[1]})},bindPromoClickEvents:function(g,d,f,a,e,c){g.unbind("click");g.bind("click",function(){var k="newaccount";var h="newtrialactivation";var t="modnewaccount";var m="changeoemconverttrial";var r="oemtrialended";var j=false;if(flowManager.isEnhancedConversionFlow!=null){j=flowManager.isEnhancedConversionFlow}var u=jQuery("input:radio[name=promoActivation]:checked").val();var q=flowManager.getCurrentStep().name;if(q!="package"){g.unbind("click");jQuery.each(f,function(v,w){g.bind("click",w.handler)});jQuery("#continueButton").trigger("click");return false}oemVal="";flowManager.packageSelection.hideRenewalFlow();flowManager.getCurrentStep().complete=true;var l="plan";var p=null;for(var o=0;o<flowManager.steps.length;o++){if(flowManager.steps[o].name==l){p=o;break}}if(p!=null){flowManager.hideStep(p,jQuery("#plan"))}var n=jQuery("#promoPackageDialog").formToArray(true);n=n.concat(jQuery(jQuery(".add-ons")[0]).formToArray(true));jQuery.ajax({url:flowManager.getCurrentStep().submitUrl,data:n.concat(flowManager.getExtraFormData()),dataType:"json",success:function(B){tracker.pageIdOverride=null;omnituretracker.pageIdOverride=null;jQuery("#chatPageIdOverride").val("");if(B.result==null||!B.result.success){var v=new Object();jQuery.each(B.result.fieldErrors,function(){v[this[0]]=this[1][0]});if(v.trialUserName!=null){var A=v.trialUserName;tracker.performErrorTracking(A)}}if(flowManager.processResult(B)){var x=flowManager.checkForChanges();var w=flowManager.getCurrentStep().flow;if(x){jQuery.ajax({url:flowManager.params.quoteUrl});setTimeout(function(){if(j&&(w==m||w==r)){flowManager.mainForm.formwizard("show","verify")}else{if(w==k||w==h||w==t||j){flowManager.mainForm.formwizard("show","listener")}else{flowManager.mainForm.formwizard("show","order")}}},3000)}else{if(j&&(w==m||w==r)){flowManager.mainForm.formwizard("show","verify")}else{if(w==k||w==h||w==t||j){flowManager.mainForm.formwizard("show","listener")}else{flowManager.mainForm.formwizard("show","order")}}}g.unbind("click");jQuery.each(f,function(C,D){g.bind("click",D.handler)});d.unbind("click");jQuery.each(e,function(C,D){d.bind("click",D.handler)})}}});return false});a=jQuery.extend(true,{},g.data("events").click);d.unbind("click");d.bind("click",function(){if(oemVal=="renewal"){flowManager.packageSelection.showRenewalFlow()}else{flowManager.packageSelection.hideRenewalFlow()}var j=flowManager.getCurrentStep().name;if(j!="package"){d.unbind("click");jQuery.each(e,function(k,l){d.bind("click",l.handler)});jQuery("#backLink").trigger("click");d.unbind("click");jQuery.each(c,function(k,l){d.bind("click",l.handler)});return false}else{var h=jQuery("#packageSelection").css("display");if(h==null||h==""||h=="block"){jQuery("#packageSelection").fadeOut(400,function(){jQuery("#trialPackageDialog").fadeIn();jQuery(document).trigger("PAGE_CHANGE",["activationopt",flowManager.getCurrentStep().flow]);jQuery(document).trigger("PAGE_LOAD",["activationopt",flowManager.getCurrentStep().flow]);jQuery("#chatPageIdOverride").val("activationopt");flowManager.chatWidgetExecute()});g.unbind("click");jQuery.each(a,function(k,l){g.bind("click",l.handler)});d.unbind("click");jQuery.each(e,function(k,l){d.bind("click",l.handler)});return false}else{g.unbind("click");jQuery.each(f,function(k,l){g.bind("click",l.handler)});d.unbind("click");jQuery.each(e,function(k,l){d.bind("click",l.handler)});jQuery("#backLink").trigger("click");return false}}});c=jQuery.extend(true,{},d.data("events").click);var b=new Object();b.clickEvent=a;b.backClickEvent=c;return b},promoActivation:function(){var e=this;var h=flowManager.mainForm.formwizard("state").nextButton;var d=flowManager.mainForm.formwizard("state").backButton;new RadioButtons();var g=jQuery.extend(true,{},h.data("events").click);var a=null;var c=null;var f=jQuery.extend(true,{},d.data("events").click);var b=e.bindPromoClickEvents(h,d,g,a,f,c);a=b[0];c=b[1]}});var LinkExistingRadioToSir=Class.extend({init:function(g,b,f,a){this.radioServices=g;this.email=b;this.userName=f;this.isSXIRLoginSameAsAccountCredentials=a;var c=this;var e=new RadioButtons();var d=new CheckBoxes();if(g==null||g.length==0){if(a=="false"){jQuery("#is-login-same-as-account-credentials").show();jQuery("#addinternetform").hide()}else{jQuery("#is-login-same-as-account-credentials").hide();jQuery("#addinternetform").show()}}jQuery(".link-existing-radio").click(function(){var h=jQuery(this).val();jQuery("#linkedExistingRadio").val(h);if(h!=null&&h!=""){jQuery("#pricing-module").html(jQuery("#pricing-module-internetradio").html());jQuery("#standaloneHeaderText").hide();jQuery("#linkedHeaderText").show();jQuery("#pricing-module-internetradio-change").show()}else{jQuery("#pricing-module").html(jQuery("#pricing-module-main").html());jQuery("#standaloneHeaderText").show();jQuery("#linkedHeaderText").hide();jQuery("#pricing-module-internetradio-change").hide()}if(""!=h){if(a=="false"){jQuery("#addinternetform").hide();jQuery("#is-login-same-as-account-credentials").show();if(b!=null&&b!=""){jQuery("#emailform").hide();return}else{jQuery("#emailform").show();return}}else{jQuery("#usernametaken").hide()}}else{if(a=="false"){jQuery("#addinternetform").hide();jQuery("#is-login-same-as-account-credentials").show();return}jQuery("#usernametaken").hide()}jQuery("#addinternetform").show();jQuery("#emailform").hide();jQuery("#is-login-same-as-account-credentials").hide()})},validateUserName:function(b){var a="";jQuery.ajax({url:b,dataType:"json",async:false,data:"struts.enableJSONValidation=true",success:function(c){a=c.result.result.$}});return a}});var LinkSirToRadio=Class.extend({init:function(h,l,b,j,k,g,f,e,d,a,n){this.isSXIRLoginSameAsAccountCredentials=h;this.isSameAsAccountCredentialOnCurrentService=l;this.linkedSirExists=b;this.email=j;this.sirLossMessage=k;var m=this;this.packages=g;this.hasToUpgradeToAllAccess=f;this.hasTrialWithSIR=e;this.isTrialWithPremierOrPremierFF=n;var c=false;jQuery('input[name="internet-listening"].styled:radio').click(function(){var o=jQuery('input[name="internet-listening"].styled:radio:checked').val();var r=m.packages[o];if(r!=null||d){c=false;if(!h||l){jQuery("#linked-sir-form").hide();jQuery("#is-login-same-as-account-credentials").show();jQuery("#is-login-same-as-account-credentials").find(".spacer-vert20").show();jQuery("#is-login-same-as-account-credentials").find(".divider-line").show();if((j!=null&&j!="")||a){jQuery("#primary-email-form").hide();return}else{jQuery("#primary-email-form").show();return}}else{if(b){jQuery("#linked-sir-info").show();jQuery("#linked-sir-info").find(".spacer-vert20").show();jQuery("#linked-sir-info").find(".divider-line").show()}else{jQuery("#linked-sir-form").show();jQuery("#linked-sir-form").find(".spacer-vert20").show();jQuery("#linked-sir-form").find(".divider-line").show()}}}else{if(!c){if(b&&!f&&!e&&!n){jQuery("#removeSIR-dialog-msg").html(k);var p="OK";var q="Cancel";jQuery("#removeSIR-dialog").dialog({resizable:false,height:200,width:430,modal:true,buttons:[{id:"removeSirOkButton",html:"<strong>"+p+"</strong>",click:function(){c=true;jQuery(this).dialog("close")}},{id:"removeSirCancelButton",html:"<strong>"+q+"</strong>",click:function(){jQuery(jQuery("a[rel='internet-listening']")[0]).click();jQuery(this).dialog("close")}}],open:function(t,u){jQuery(".ui-dialog-titlebar-close").hide()},});jQuery("#removeSIR-dialog").dialog("open");jQuery("#removeSirOkButton").parent().css("float","none");jQuery("#removeSirOkButton").parent().css("text-align","center");jQuery("#removeSirOkButton").parent().css("margin-bottom","8px");jQuery("#removeSirOkButton").css("margin-right","14px");jQuery("#removeSIR-dialog").css("margin-bottom","-10px");jQuery("#removeSIR-dialog").prev("div").removeClass("ui-dialog-titlebar")}}jQuery("#linked-sir-form").hide();jQuery("#is-login-same-as-account-credentials").hide();jQuery("#primary-email-form").hide();jQuery("#linked-sir-info").hide()}})}});var SCodeLoader=function(a){this.init(a)};var prototypeSCodeLoader={otContext:null,sCodeLoadInterval:-1,init:function(a){this.otContext=a;var b=this;b.sCodeLoadInterval=setInterval("window.checkSCodeLoaded()",500);window.checkSCodeLoaded=function(){if(s!=undefined&&s.t!=undefined){clearInterval(b.sCodeLoadInterval);b.loadCompleteHandler()}};this.loadSCode()},loadSCode:function(){var b=document.createElement("script");b.type="text/javascript";b.src="js/s_code.js";var a=document.getElementsByTagName("head")[0];a.appendChild(b)},loadCompleteHandler:function(){var a=this.otContext;jQuery(document).ready(function(){a.sCodeLoadedFlag=true;a.processPendingCallsQueue()})}};jQuery.extend(SCodeLoader.prototype,prototypeSCodeLoader);var SiriusXMWebtracker=function(a){this.params=a;this.init(a)};var prototypeSiriusXMWebtracker={sCodeLoadedFlag:false,pendingCallsQueue:new Array(),flowId:null,pageId:null,pageIdOverride:null,siteName:null,reportSuiteId:null,event:null,ignitionOneEnabled:null,props:null,ignitionOneConversion:null,init:function(b){var a=this;this.reportSuiteId=b.reportSuiteId;this.flowId=b.flowId;this.pageId=b.pageId;this.siteName=b.siteName;this.event=b.event;this.ignitionOneEnabled=b.ignitionOneEnabled;this.ignitionOneConversion=b.ignitionOneConversion;this.props=b.props;this.sCodeLoader=new SCodeLoader(a);this.setupElementEventListeners();this.setupCustomEventListeners();jQuery(document).trigger("PAGE_LOAD",[a.pageId,a.flowId])},processPendingCallsQueue:function(){var b=this;var a=b.pendingCallsQueue;b.pendingCallsQueue=null;jQuery.each(a,function(){var d=this;var e=d.method;var c=d.args;e.apply(b,c)})},setupElementEventListeners:function(){var b=this;var a="tracking-info-link";if(vMinMet("1.7",jQuery.fn.jquery)){jQuery("["+a+"]").on("click",function(e){var d=jQuery(this).attr(a);b.performElementEventTracking(d)});jQuery(".trackTab").on("tabsselect",function(e,f){var d=jQuery(f.tab).attr("tracking-info-tab");b.performElementEventTracking(d)})}else{jQuery("["+a+"]").live("click",function(e){var d=jQuery(this).attr(a);b.performElementEventTracking(d)});jQuery(".trackTab").live("tabsselect",function(e,f){var d=jQuery(f.tab).attr("tracking-info-tab");b.performElementEventTracking(d)})}if(jQuery().livequery){var c="tracking-info-checkbox";jQuery("["+c+"]").livequery("click",function(e){var f=jQuery(this).attr("checked");if(f){var d=jQuery(this).attr(c);b.performElementEventTracking(d)}})}},performElementEventTracking:function(b){if(b!=null&&b!=""){var a=jQuery.parseJSON(b);this.performCustomLinkTracking(a)}},setupCustomEventListeners:function(){var a=this;jQuery(document).bind("PAGE_LOAD",function(g,b,d,f,c){a.pageId=b;if(f!=null&&f!=""){a.event=f}if(a.pageIdOverride!=null&&a.pageIdOverride.length>0){a.pageId=a.pageIdOverride}if(d!=null){a.flowId=d}if(c!=null){a.ignitionOneConversion=c}a.performPageTracking()});jQuery(document).bind("TRACK_ERROR",function(k,g,j,c,h,f,d){var b=d;if(b==null){b=a.pageId}a.performErrorTracking(b,g,j,c,h,f)});jQuery(document).bind("OVERLAY_OPEN",function(d,b,c){a.performOverlayTracking(b,c)});jQuery(document).bind("TIMEOUT_ERROR",function(d,b,c){a.performOverlayTracking(b,c)})},performOverlayTracking:function(b,c){var a=this;if(!a.sCodeLoadedFlag){a.pendingCallsQueue.push({method:a.performOverlayTracking,args:[b,c]});return}var d=s.pageName;this.performTracking(null,null,null,b,c);s.pageName=d},performPageTracking:function(){var a=this;if(!a.sCodeLoadedFlag){a.pendingCallsQueue.push({method:a.performPageTracking,args:[]});return}this.performTracking()},performTracking:function(d,a,f,c,g,j){if(d==null){d=this.reportSuiteId}if(a==null){a=this.flowId}if(f==null){f=this.siteName}if(c==null){c=this.pageId}if(c!=null){jQuery("#chatPageId").val(c)}if(c!=null&&f!=null){pageName=f+":"+a+":"+c}if(c!=null&&c!=""){s.manageVars("clearVars","eVar5,eVar7,eVar8,eVar14,eVar15,eVar12,eVar43,eVar42,eVar16,eVar17,eVar18,eVar53",1);var e=s.events;if(g==null){g=this.event}this.populateEventTracking(g);if(g!=null&&g.esn_Vin!=null&&g.esn_Vin!=""){if(g.esn_Failed){s.eVar42=g.esn_Vin}else{s.eVar43=g.esn_Vin}}if(g!=null&&g.flepz_result!=null&&g.flepz_result!=""){s.eVar53=g.flepz_result}if(g!=null&&g.inactiveRadioType!=null&&g.inactiveRadioType!=""){s.eVar16=g.inactiveRadioType}this.event=null;this.populateProps(this.props);this.props=null;s.channel=a;s.pageName=pageName;s.server=f;s_account=d;var h=s.doSetupLinkTrack;s.doSetupLinkTrack=false;var b=s.t();if(b){document.write(b)}s.doSetupLinkTrack=h;if(this.ignitionOneEnabled!=null&&this.ignitionOneEnabled=="1"){if(this.ignitionOneConversion!=null){this.performIgnitionOneConversionTracking(pageName,this.ignitionOneConversion.subscriptionID,this.ignitionOneConversion.zipCode,g.sProducts);this.ignitionOneConversion=null}else{this.performIgnitionPageTracking(pageName)}}}},performCustomLinkTracking:function(j){var h=this;if(!h.sCodeLoadedFlag){h.pendingCallsQueue.push({method:h.performCustomLinkTracking,args:[j]});return}var d=j.id;var c=j.pos;var a=j.pageName;var g=this.pageId;var b=s.pageName;var e=this.siteName;s.manageVars("clearVars","prop6,prop7,prop8,prop9,eVar5,eVar6,events",1);if(j.event!=null){s.linkTrackVars="prop6,prop7,prop8,prop9,eVar5,eVar6,events"}else{s.setupLinkTrack("prop6,prop7,prop8,prop9")}if(s.pageName!=null&&s.pageName!=""){g=s.pageName}if(a!=null&&a!=""){g=e+":"+this.flowId+":"+a;s.pageName=g}this.populateEventTracking(j);j.event=null;s.prop6=g;s.prop7=d;s.prop8=g+" | "+d;s.prop9=c;var f=s.doSetupLinkTrack;s.doSetupLinkTrack=false;s.tl(this,"o",d);s.doSetupLinkTrack=f;s.pageName=b},performErrorTracking:function(c,g,l,m,b,h){var k=this;if(!k.sCodeLoadedFlag){k.pendingCallsQueue.push({method:k.performErrorTracking,args:[c,g,l,m,b,h]});return}s.manageVars("clearVars","eVar43,eVar42,eVar53",1);if(c.length>21){c=c.substring(0,21)}var j=this.siteName+":"+this.flowId+":"+c;var d="";var f="";if(g==null||g==""){g="NO SYSTEM ERROR"}else{g=this.cleanString(g);if(g.length>80){g=jQuery.trim(g.substring(0,80))}}if(m!=null&&m.length>0&&l==null){for(var e=0;e<m.length;e++){var n=this.cleanString(htmlDecode(m[e][1].toString()));if(n.length>120){m[e][1]=jQuery.trim(n.substring(0,120))}else{m[e][1]=n}n=this.cleanString(m[e][0].toString());if(n.lastIndexOf(".")!=-1){m[e][0]=n.substring(n.lastIndexOf(".")+1)}else{m[e][0]=n}d=d+f+j+":"+m[e][0]+":"+m[e][1]+":"+g;f="|"}}else{l=this.cleanString(l);if(l.length>120){l=jQuery.trim(l.substring(0,120))}d=j+":NO FORM FIELD:"+l+":"+g}if(h!=null&&h!=""){this.populateProps(h)}var o=s.list1;s.events="event16";s.list1=d;if(b!=null&&b!=""){s.eVar42=b}var a=s.t();if(a){document.write(a)}},cleanString:function(a){if(a!=null){return jQuery.trim(a.replace(/<(.|\n)*?>/g," ").replace(new RegExp("\\s\\s","gm")," ").replace(new RegExp("\n","gm")," ").replace(":","-").replace("|","-"))}return""},populateEventTracking:function(a){if(a!=null){if(a.event!=null){s.events=a.event}if(a.flowName!=null){if(a.flowName.indexOf("oem")!=-1){s.eVar5="oemtrial"}else{s.eVar5=a.flowName}}if(a.registrationStatus!=null){s.eVar6=a.registrationStatus}if(a.planName!=null){s.eVar7=a.planName}if(a.deviceBrand!=null){s.eVar8=a.deviceBrand}if(a.deviceCapabilities!=null){s.eVar14=a.deviceCapabilities}if(a.sxir!=null){s.eVar15="SXIR"}if(a.sProducts!=null){s.products=a.sProducts}if(a.verify!=null){s.eVar12=a.verify}if(a.devicePromoCode!=null){s.eVar17=a.devicePromoCode}if(a.mrdEligible!=null){s.eVar18=a.mrdEligible}if(a.flepz_result!=null){s.eVar53=a.flepz_result}}},populateProps:function(a){if(a!=null){if(a.prop17!=null){s.prop17=this.siteName+":"+this.flowId+":"+this.pageId+":"+a.prop17}if(a.prop15!=null){s.prop15=this.siteName+":"+this.flowId+":"+this.pageId+":"+a.prop15}if(a.prop18!=null){s.prop18=this.siteName+":"+this.flowId+":"+this.pageId+":"+a.prop18}if(a.prop19!=null){s.prop19=a.prop19}if(a.prop20!=null){s.prop20=a.prop20}if(a.instructionalText!=null&&a.instructionalText!=""){s.prop16=this.siteName+":"+this.flowId+":"+this.pageId+":"+a.instructionalText}if(a.captchaCounter!=null&&a.captchaCounter!=""){s.prop19=a.captchaCounter}if(a.captchaLoginCounter!=null&&a.captchaLoginCounter!=""){s.prop20=a.captchaLoginCounter}}},getSubTypeRevs:function(c){if(c!=null){var b="";if(c.indexOf(",")>-1){var a=c.split(",");if(a.length>2){b={subTypeRev1:this.getPackageAndPrice(a[0]),subTypeRev2:this.getPackageAndPrice(a[1]),subTypeRev3:this.getPackageAndPrice(a[2])}}else{b={subTypeRev1:this.getPackageAndPrice(a[0]),subTypeRev2:this.getPackageAndPrice(a[1])}}}else{b={subTypeRev1:this.getPackageAndPrice(c)}}return b}return null},getPackageAndPrice:function(c){if(c!=null){var b=c.split(":");var a=b[1].split(";");var d=a[0]+";"+a[2];return d}return null},performIgnitionPageTracking:function(j){var f="com-siriusxm.netmng.com";var g="238";var k=document.createElement("script");k.type="text/javascript";k.async=true;var c="https:"==document.location.protocol?"https://":"http://";var d=document.referrer.match(/https?:\/\/([^/]+)/i);var b=(d&&d[1]!=document.location.hostname)?("&ref="+escape(document.referrer)):"";var e="&pagename="+j;k.src=c+f+"/?async=1&aid="+g+b+e;var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(k,l)},performIgnitionOneConversionTracking:function(n,g,b,e){subTypeRev1="NULL";subTypeRev2="NULL";subTypeRev3="NULL";if(e!=null){var c=this.getSubTypeRevs(e);if(c!=null){if(c.subTypeRev1!=null){subTypeRev1=c.subTypeRev1}if(c.subTypeRev2!=null){subTypeRev2=c.subTypeRev2}if(c.subTypeRev3!=null){subTypeRev3=c.subTypeRev3}}}var f={Pagename:n,OrderID:"NULL",SKU:"NULL",Zip:b,Radio_Count:"NULL",Radio_Revenue:"NULL",Accessory_Count:"NULL",Accessory_Revenue:"NULL",Sub_Type_Rev1:subTypeRev1,Sub_Type_Rev2:subTypeRev2,Sub_Type_Rev3:subTypeRev3,Activation_Fee:"NULL",Shipping:"NULL",Subid:"NULL",SubscriptionID:g},k=f,l=document,o=encodeURIComponent,m=z="",h=l.createElement("script"),a=l.referrer,p=l.getElementsByTagName("script")[0];h.type="text/javascript";h.async=!0;a&&a.split(/[/:?]/)[3]!=l.location.hostname&&(k.ref=a);for(y in k){m+="&"+y+"="+o(k[y])}h.src="//com-siriusxm.netmng.com/conv/?aid=238&siclientid=&cpid=306358864"+m;p.parentNode.insertBefore(h,p)}};function htmlDecode(a){var b=document.createElement("div");b.innerHTML=a;return b.childNodes.length===0?"":b.childNodes[0].nodeValue}function parseVersionString(e){if(typeof(e)!="string"){return false}var a=e.split(".");var c=parseInt(a[0])||0;var d=parseInt(a[1])||0;var b=parseInt(a[2])||0;return{major:c,minor:d,patch:b}}function vMinMet(a,b){minimum=parseVersionString(a);running=parseVersionString(b);if(running.major!=minimum.major){return(running.major>minimum.major)}else{if(running.minor!=minimum.minor){return(running.minor>minimum.minor)}else{if(running.patch!=minimum.patch){return(running.patch>minimum.patch)}else{return true}}}}jQuery.extend(SiriusXMWebtracker.prototype,prototypeSiriusXMWebtracker);var TermSelection=Class.extend({planHolder:null,init:function(c,b){var a=this;this.setupForm(c);this.setupChangeListener(b)},setupForm:function(c){var a=this;var b=new RadioButtons();this.planHolder=c;a.hideFollowOnSelectionsDisplay();jQuery(".term-selection").click(function(){var e=jQuery(this).val();a.planHolder.val(e);jQuery(document).trigger("TERM_CHANGE",[e]);jQuery(".term-description").hide();jQuery(".custom-radio").find("input:radio:checked").parentsUntil(".center").next(".term-description").show();var f=jQuery("#plan").find("input:radio:checked").parent().next().children("label.radio-label").text();if(f==""){a.hideFollowOnSelectionsDisplay()}else{var g="";if(jQuery("#selectedFollowOnPackagePlanKey")!=null&&jQuery("#selectedFollowOnPackagePlanKey").val()!=null){g=jQuery("#selectedFollowOnPackagePlanKey").val().split(",")}if(g&&g!=""){jQuery.each(g,function(){var j="#"+this+"_fName";jQuery(j).removeClass("hiddentypeSubscription");jQuery(j).addClass("typeSubscription");var h="#"+this+"_fstartDate";jQuery(h).removeClass("hiddentypeSubscription");jQuery(h).addClass("typeSubscriptionDate");var k="#"+this+"_fTerm";jQuery(k).removeClass("hiddentypeSubscription");jQuery(k).addClass("typeSubscription");jQuery(k).html(f)})}else{if(jQuery(this).attr("ispromo")!=undefined&&jQuery(this).attr("ispromo")=="true"){jQuery("#termLength").html("")}else{jQuery("#termLength").html(f)}var d=jQuery(".lifetime");if(d){d.show();if(e==0){d.hide()}}}flowManager.alignCurrentAndNewSubscriptionBoxes()}});jQuery(".gift-card").click(function(){var d=jQuery("input[name='radioone']:checked").val();a.planHolder.val(d);jQuery(document).trigger("TERM_CHANGE",[d])})},setupChangeListener:function(d){var c=this;var a=this.planHolder.val();if(a==null||a==""||a=="999"){a=d}if(a!=null&&a!=""){var b=jQuery('input.styled.term-selection:radio[value="'+a+'"]').next();if(b.length==1){b.click()}else{jQuery(document).trigger("TERM_CHANGE",[a])}}else{if(jQuery("input.styled.term-selection:checked")){jQuery(".term-selection:checked").click()}}},trialPlanSetup:function(b){var a=this;jQuery(".followon-select").click(function(){a.handleDataBundle(this);a.loadFollowOnPlans(b)});a.preSelectFollowOnPackages(b)},updateRenewShoppingCart:function(b){var a=this;jQuery(".followon-select").click(function(){a.updateFollowOnSelections();jQuery(document).trigger("TERM_CHANGE")})},updateFollowOnSelections:function(){var b="";var a=jQuery("input.styled.followon-select:checked");jQuery.each(a,function(){if(b==""){b=this.value}else{b=b+","+this.value}});jQuery("#selectedFollowOnPackagePlanKey").val(b);return jQuery("#selectedFollowOnPackagePlanKey").val()},hideFollowOnSelectionsDisplay:function(){jQuery("[id$=_fName]").addClass("hiddentypeSubscription");jQuery("[id$=_fName]").removeClass("typeSubscription");jQuery("[id$=_fTerm]").addClass("hiddentypeSubscription");jQuery("[id$=_fTerm]").removeClass("typeSubscription");jQuery("[id$=_fstartDate]").addClass("hiddentypeSubscription");jQuery("[id$=_fstartDate]").removeClass("typeSubscriptionDate");jQuery("[id$=_fstartDate]").removeClass("typeSubscription");flowManager.alignCurrentAndNewSubscriptionBoxes()},updateFollowOnSelectionsDisplay:function(){this.hideFollowOnSelectionsDisplay();var c="";if(jQuery("#selectedFollowOnPackagePlanKey")!=null&&jQuery("#selectedFollowOnPackagePlanKey").val()!=null){c=jQuery("#selectedFollowOnPackagePlanKey").val().split(",")}if(c&&c!=""){var b=jQuery("#plan").find("input:radio:checked").parent().next().children("label.radio-label").text();jQuery.each(c,function(){var e="#"+this+"_fName";jQuery(e).removeClass("hiddentypeSubscription");jQuery(e).addClass("typeSubscription");if(this.toLowerCase().indexOf("data")>0){var d="#followOnData_fstartDate";jQuery(d).removeClass("hiddentypeSubscription");jQuery(d).addClass("typeSubscriptionDate")}var e="#"+this+"_fstartDate";jQuery(e).removeClass("hiddentypeSubscription");jQuery(e).addClass("typeSubscriptionDate");var f="#"+this+"_fTerm";jQuery(f).removeClass("hiddentypeSubscription");jQuery(f).addClass("typeSubscription");jQuery(f).html(b)})}else{var a="#followOnData_fstartDate";jQuery(a).addClass("hiddentypeSubscription");jQuery(a).removeClass("typeSubscriptionDate")}flowManager.alignCurrentAndNewSubscriptionBoxes()},loadFollowOnPlans:function(d){var c=jQuery("#loading-dialog");c.dialog({resizable:false,height:164,width:260,modal:true,open:function(e,f){jQuery(".ui-dialog-titlebar-close").hide()}});var b=this.updateFollowOnSelections();if(b!=null&&b!=""){jQuery("#renewlater").hide();jQuery("#proceed").show();jQuery("#showFollowonButton").val(false)}else{jQuery("#renewlater").show();jQuery("#proceed").hide();jQuery("#showFollowonButton").val(true)}c.dialog("open");var a=this;jQuery.ajax({url:d,timeout:1500000,cache:false,data:{followOnSelections:b},success:function(g){c.dialog("close");jQuery("#term-selections").html(g);var f=new RadioButtons();var e=jQuery("input[name='radioone']:checked").val();a.planHolder.val(e);a.updateFollowOnSelectionsDisplay();jQuery(document).trigger("TERM_CHANGE",[e])}})},handleDataBundle:function(d){var c=jQuery(d).attr("infotainment-bundle");if(c!=null){jQuery("input.followon-select[infotainment-component~=' "+c+" ']:checkbox:checked").each(function(){this.checked=false;jQuery(this).next("a.checkbox").removeClass("checked")})}var a=jQuery(d).attr("infotainment-component");if(a!=null){var b=a.split(" ");jQuery.each(b,function(e,f){jQuery("input.followon-select[infotainment-bundle='"+jQuery.trim(f)+"']:checkbox:checked").each(function(){this.checked=false;jQuery(this).next("a.checkbox").removeClass("checked")})})}},preSelectFollowOnPackages:function(c){var a=this;if(jQuery("#selectedFollowOnPackagePlanKey").val()!=null&&jQuery("#selectedFollowOnPackagePlanKey").val()!=""){var b=jQuery("#selectedFollowOnPackagePlanKey").val().split(",");jQuery.each(b,function(){var e=this;if(e.indexOf("_ADDON")>0){e=e.substring(0,e.indexOf("_ADDON"))}var d=jQuery('input[name="followon"].styled.followon-select[value="'+e+'"]');d.attr("checked","checked");d.next("a.checkbox").addClass("checked");a.handleDataBundle(d)});a.loadFollowOnPlans(c)}}});Tracker=function(a){this.init(a)};jQuery.extend(Tracker.prototype,{flowId:null,pageId:null,accountId:null,accounts:null,subflowId:null,mediaplexSiriusUrl:null,googleTrackingDomain:null,pageIdOverride:null,init:function(b){var a=this;this.accounts=b.accounts;this.flowId=b.flowId;this.pageId=b.pageId;this.accountId=b.accountId||"SIRIUS";this.mediaplexSiriusUrl=b.mediaplexSiriusUrl;this.googleTrackingDomain=b.googleTrackingDomain;this.setupElementListeners();this.setupEventListeners();jQuery(document).ready(function(){jQuery(document).trigger("PAGE_CHANGE",[a.pageId,a.flowId])})},setupElementListeners:function(){var a=this;jQuery("a").livequery("click",function(){a.performLinkTracking(jQuery(this))});jQuery("button").livequery("click",function(){a.performLinkTracking(jQuery(this))});jQuery("#button-login").livequery("click",function(){a.performLinkTracking(jQuery(this))});jQuery("#backLink").livequery("click",function(){a.performLinkTracking(jQuery(this))})},setupEventListeners:function(){var a=this;jQuery(document).bind("PAGE_CHANGE",function(g,b,d,c,f){a.pageId=b;if(a.pageIdOverride!=null&&a.pageIdOverride.length>0){a.pageId=a.pageIdOverride}a.subflowId=f;a.performPageTracking()});jQuery(document).bind("SHOW_OVERLAY",function(d,b,c){a.pageId=b;a.flowId=c;a.performPageTracking()});jQuery(document).bind("SUCCESSFUL_LOGIN",function(b,c){a.performMediaplexLoginTrack()});jQuery(document).bind("ACTIVATE_ACCOUNT",function(c,d,b){a.performMediaplexActivateTrack(b)});jQuery(document).bind("ADD_LINKED_SIR",function(c,d,b){a.performMediaplexSIRTrack(b)})},performMediaplexTrack:function(c,e,a){var b=this.mediaplexSiriusUrl+"?page_name="+c+"&"+e+"=1&mpuid="+((a==null)?"":a);var d=jQuery("<iframe onload='return tracker.iframeLoaded()'/>").appendTo("body");d.attr("src",b);d.css("display","none")},performMediaplexSIRTrack:function(a){var b="linked_internet_add-on";var c="SIR_LINKED_Confirmation";a=this.trimServicePoid(a);this.performMediaplexTrack(b,c,a)},performMediaplexActivateTrack:function(a){var b=this.accountId.toLowerCase()+"_radio_activation";var c=this.accountId.capitalize()+"_Radio_Activation";a=this.trimServicePoid(a);this.performMediaplexTrack(b,c,a)},performMediaplexLoginTrack:function(){var a=this.accountId.toLowerCase()+"_my_account_page";var b=this.accountId.capitalize()+"_My_Account_Page";this.performMediaplexTrack(a,b)},performTracking:function(a){if(this.accounts!=null){for(var b=0;b<this.accounts.length;b++){_gaq.push(["_setAccount",this.accounts[b]]);_gaq.push(["_setAllowHash",false]);_gaq.push(["_setDomainName",this.googleTrackingDomain]);_gaq.push(["_trackPageview",a.replace(/ /g,"_")])}}},performPageTracking:function(){this.performTracking(this.buildTrackingId())},performErrorTracking:function(a){this.performTracking(this.buildTrackingId(null,a))},performDialogTracking:function(a){this.performTracking(this.buildFullTrackingId(null,this.flowId,this.subflowId,a))},buildTrackingId:function(b,a){return this.buildFullTrackingId(this.accountId,this.flowId,this.subflowId,this.pageId,b,a)},buildFullTrackingId:function(g,d,e,b,f,c){if(g==null){g=this.accountId}if(d==null){d=this.flowId}if(e==null){e=this.subflowId}if(b==null){b=this.pageId}if(b!=null){jQuery("#chatPageId").val(b)}var a="";if(g!=null&&g!=""){a="/"+g}if(d!=null&&d!=""){a=a+"/"+d}if(b!=null&&b!=""){a=a+"/"+b}if(c!=null&&c!=""){a=a+"/error/"+c}if(f!=null&&f!=""){a="/careclick"+a+"/"+f}return a},performLinkTracking:function(b){var d;var c=null;if(!vMinMet("1.4.3",jQuery.fn.jquery)){c=b.metadata()}if(c!=null&&c.trackingId!=null){d=c.trackingId;if(c.trackingId2){c.trackingId=c.trackingId2;c.trackingId2=d}}if(d==null||d==""){d=b.attr("id")}if(d!=null&&d!=""){var a=this.buildTrackingId(d);this.performTracking(a)}},iframeLoaded:function(a){jQuery(document).trigger("MEDIAPLEX_COMPLETE");return true},trimServicePoid:function(a){if(a!=null){var b=a.split(" ");if(b.length>2){return b[2]}}return a},setIds:function(b,a){var c=this;c.pageId=a;c.flowId=b}});function parseVersionString(e){if(typeof(e)!="string"){return false}var a=e.split(".");var c=parseInt(a[0])||0;var d=parseInt(a[1])||0;var b=parseInt(a[2])||0;return{major:c,minor:d,patch:b}}function vMinMet(a,b){minimum=parseVersionString(a);running=parseVersionString(b);if(running.major!=minimum.major){return(running.major>minimum.major)}else{if(running.minor!=minimum.minor){return(running.minor>minimum.minor)}else{if(running.patch!=minimum.patch){return(running.patch>minimum.patch)}else{return true}}}}var SiriusValidator=Class.extend({validator:null,theForm:null,params:null,init:function(b){var a=this;this.params=b;this.theForm=b.theForm;this.defaultErrorString=null;if(b.handleSuccess!=null){this.handleSuccess=b.handleSuccess}if(b.submitButton==null){this.params.submitButton=this.theForm.find(":submit")}if(b.backButton==null){this.params.backButton=this.theForm.find(":reset")}if(this.validator==null){this.validator=this.theForm.validate({submitHandler:(a.submitHandler==null)?null:function(c){a.submitHandler(c,a)},invalidHandler:this.invalidHandler,highlight:function(e,c,d){a.highlight(e,c,d)},unhighlight:function(e,c,d){a.unhighlight(e,c,d)},errorPlacement:function(c,d){a.errorPlacement(c,d)},messages:b.messages,errorElement:"div",errorClass:"field-error-msg",meta:"rules",validClass:"wearevalid"})}this.addListeners();this.processSubmitButton("wearevalid")},addListeners:function(){var a=this;this.theForm.find("input:text").keyup(function(){a.processSubmitButton("wearevalid")});this.theForm.find("input:password").keyup(function(){a.processSubmitButton("wearevalid")});this.theForm.find("input:checkbox").livequery("click",function(b){a.processSubmitButton("wearevalid")});this.theForm.find("textarea").keyup(function(){a.processSubmitButton("wearevalid")});this.theForm.find("input:radio").livequery("click",function(b){a.processSubmitButton("wearevalid")});this.theForm.find("select").change(function(){a.processSubmitButton("wearevalid")});this.theForm.find("select").keyup(function(){a.processSubmitButton("wearevalid")});this.theForm.find("input:text").bind("paste",function(){setTimeout(function(){a.processSubmitButton("wearevalid")},100)})},submitHandler:function(b,a){if(a==null){a=this}jQuery(".error-msg",this.theForm).hide();jQuery(b).ajaxSubmit({dataType:"json",success:function(c){a.processResult(c)}})},pageScrollTop:function(){var a=false;jQuery(".ui-dialog").each(function(){if(jQuery(this).is(":visible")){a=true}});if(!a){jQuery("html,body").animate({scrollTop:jQuery(".error-msg").offset().top-100},"slow")}},invalidHandler:function(c,b){var d=b.numberOfInvalids();if(d){jQuery(".error-msg",this.theForm).show();var a=false;jQuery(".ui-dialog").each(function(){if(jQuery(this).is(":visible")){a=true}});if(!a){jQuery("html,body").animate({scrollTop:jQuery(".error-msg").offset().top-100},"slow")}}else{jQuery(".error-msg",this.theForm).hide()}},highlight:function(c,a,b){jQuery(c).parents(".form-item").addClass("error");if(jQuery(c).parents(".form-item").find(".creditcard-instructions").length>0){jQuery(c).parents(".form-item").find(".creditcard-instructions").hide()}jQuery(c).removeClass(b)},unhighlight:function(c,a,b){jQuery(c).parents(".form-item").removeClass("error");if(jQuery(c).parents(".form-item").find(".creditcard-instructions").length>0){jQuery(c).parents(".form-item").find(".creditcard-instructions").show()}jQuery(c).addClass(b)},highlight:function(c,a,b){jQuery(c).parents(".swap-item").addClass("error");if(jQuery(c).parents(".swap-item").find(".creditcard-instructions").length>0){jQuery(c).parents(".swap-item").find(".creditcard-instructions").hide()}jQuery(c).removeClass(b)},unhighlight:function(c,a,b){jQuery(c).parents(".swap-item").removeClass("error");if(jQuery(c).parents(".swap-item").find(".creditcard-instructions").length>0){jQuery(c).parents(".swap-item").find(".creditcard-instructions").show()}jQuery(c).addClass(b)},errorPlacement:function(a,b){var c=b.parents(".input-group");if(c.length>0){c.find(".field-error-msg").remove();c.append(a)}else{a.insertAfter(b);a.css("width",b.css("width"))}},processSubmitButton:function(e){if(this.params.submitButton!=null){var d=this.theForm.find(".required:blank").not(":hidden");var f=this.theForm.find("input:checkbox.required:unchecked").not(":hidden");var h=new Array();var a=this.theForm.find("input:radio").next();for(i=0;i<a.length;i++){if(jQuery(a[i]).is(":visible")){var c=jQuery(a[i]).prev();h.push(c[0].name)}}jQuery.unique(h);var j=true;for(i=0;i<h.length;i++){if(jQuery("input[name='"+h[i]+"']:checked").length==0){j=false;break}}if(d.length>0||f.length>0||!j){this.params.submitButton.parent().hide();this.params.submitButton.parent().next().show()}else{this.params.submitButton.parent().show();this.params.submitButton.parent().next().hide();if(this.params.backButton){this.params.backButton.removeAttr("disabled").removeClass("ui-state-disabled").addClass("ui-state-active")}}var b=jQuery("#termSelectionPage").val();if(b=="true"){var g=jQuery("#termChanged").val();if(g&&g!="true"){jQuery("#proceedDisabled").show();jQuery("#proceed").hide()}else{if(g&&g=="true"){jQuery("#proceedDisabled").hide();jQuery("#proceed").show()}}jQuery("#termSelectionPage").val("false")}}jQuery(".error-msg",this.theForm).hide()},processResult:function(a,b){if(a.result!=null&&!a.result.success){return this.handleFailure(a,b)}else{return this.handleSuccess(a)}},handleSuccess:function(a){return true},handleFailure:function(d,j,g,m){if(j==null){j=this.organiseErrors(d.result.fieldErrors)}var k=null;var l=null;var c=null;var b=null;if(d.result.result!=null&&d.result.result.captchaCounter!=null){var a=d.result.result.captchaCounter;c={captchaCounter:a}}if(d.result.result!=null&&d.result.result.instructionalText!=null){var f=d.result.result.instructionalText;if(c==null){c={instructionalText:f}}else{c.instructionalText=f}}this.validator.showErrors(j);if(d.result.portalErrorMessage!=null){k=d.result.portalErrorMessage;tracker.performErrorTracking(k)}if(d.result.errors.length>0){var e="";l=d.result.errors[0];for(var h=0;h<d.result.errors.length;h++){e=e+d.result.errors[h];if((h+1)!=d.result.errors.length){e=e+"<br/><br/>"}}if(this.defaultErrorString==null){this.defaultErrorString=jQuery(".error-msg",this.theForm).html()}jQuery(".error-msg",this.theForm).html(e);jQuery(".error-msg",this.theForm).show();this.pageScrollTop();if(k==null){tracker.performErrorTracking(e)}}else{if(d.result.fieldErrors.length>0){if(this.defaultErrorString!=null){jQuery(".error-msg",this.theForm).html(this.defaultErrorString)}if(d.result.fieldErrors[0][0]!="username"&&d.result.fieldErrors[0][0]!="nucaptcha-answer"){jQuery(".error-msg",this.theForm).show();this.pageScrollTop()}if(d.result.fieldErrors[0][0]=="activation.user.userName"){var e=d.result.fieldErrors[0][1];tracker.performErrorTracking(e);jQuery(document).trigger("TRACK_ERROR",[d.result.portalErrorMessage,l,m,null,c])}if(d.result.fieldErrors[0][0]=="activation.esnDetails.esn"){jQuery(".field-error-msg").css("width","420px");if(jQuery(".field-error-msg").parent(".swap-item-esn").length>0){jQuery(".field-error-msg").css("width",jQuery(".field-error-msg").parent(".swap-item-esn").css("width"));jQuery(".field-error-msg").css("font-size","11px");jQuery(".field-error-msg").css("font-weight","normal")}}}}if(d.result.fieldErrors.length>0&&d.result.fieldErrors[0][0]=="activation.esnOrVin"){if(d.result.esn_vin!=null){b=d.result.esn_vin}else{b=jQuery("#radioId").val()}}if(g==null&&m==null){jQuery(document).trigger("TRACK_ERROR",[k,l,d.result.fieldErrors,b,c])}else{if(g==null&&m!=null){jQuery(document).trigger("TRACK_ERROR",[k,l,m,b,c])}}return false},organiseErrors:function(b){var a=new Object();jQuery.each(b,function(){a[this[0]]=this[1][0]});return a}});var ClientValidator=SiriusValidator.extend({validator:null,theForm:null,params:null,init:function(b){var a=this;this.params=b;this.theForm=b.theForm;this.defaultErrorString=null;if(b.handleSuccess!=null){this.handleSuccess=b.handleSuccess}if(b.submitButton==null){this.params.submitButton=this.theForm.find(":submit")}if(b.backButton==null){this.params.backButton=this.theForm.find(":reset")}if(this.validator==null){this.validator=this.theForm.validate({highlight:function(e,c,d){a.highlight(e,c,d)},unhighlight:function(e,c,d){a.unhighlight(e,c,d)},errorPlacement:function(c,d){a.errorPlacement(c,d)},messages:b.messages,errorElement:"div",errorClass:"field-error-msg",meta:"rules",validClass:"wearevalid"})}this.addListeners()},addListeners:function(){var c=this;var d=false;var a;if(this.params.inputFieldIDs==null){a=this.validator.settings.groups}else{a=this.params.inputFieldIDs}var e;var b=this.validator.settings.messages["activation.account.serviceContact.address.address"];this.theForm.find("input:text").blur(function(){c.processSubmitButton("wearevalid");var k=jQuery(this).attr("id");for(var f=0;f<a.length;f++){if(k==jQuery(a[f]).attr("id")){var j=jQuery(this).val().replace(/^\s+|\s+$/g,"");if(j.length==0){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"})}else{if(k.search("postalCode")!=-1){var g=new RegExp(/^\d{5}$|^\d{5}-\d{4}$/);if(!g.test(j)){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"})}}else{var h=new RegExp(/[^A-Za-z0-9'#\-\s.,\/]/g);if(h.test(j)){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"})}}}return false}}});this.theForm.find("textarea").focus(function(){e=true});this.theForm.find("textarea").blur(function(){e=false;c.processSubmitButton("wearevalid");var j=jQuery(this).attr("id");for(var f=0;f<a.length;f++){if(j==jQuery(a[f]).attr("id")){var h=jQuery(this).val().replace(/^\s+|\s+$/g,"");if(h.length==0){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").html(b.required);jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"})}else{var g=new RegExp(/[^A-Za-z0-9'#\-\s.,\/]/g);if(g.test(h)){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").html(b.invalid);jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"})}}return false}}});this.theForm.find("input:text").keyup(function(){c.processSubmitButton("wearevalid");if(d){d=false;return false}var g=jQuery(this).attr("id");if(jQuery("#validServiceAddress").val()=="false"&&g.search("address")!=-1){for(var f=0;f<a.length;f++){if(a[f].search("service")!=-1){if(g==jQuery(a[f]).attr("id")){for(var f=0;f<a.length;f++){if(a[f].search("service")!=-1&&a[f].search("address")!=-1){jQuery(a[f]).removeClass("form-field-error")}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");jQuery("#validServiceAddress").val(true);return false}}}}if(jQuery("#validBillingAddress").val()=="false"&&g.search("address")!=-1){for(var f=0;f<a.length;f++){if(a[f].search("billing")!=-1){if(g==jQuery(a[f]).attr("id")){for(var f=0;f<a.length;f++){if(a[f].search("billing")!=-1&&a[f].search("address")!=-1){jQuery(a[f]).removeClass("form-field-error")}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");jQuery("#validBillingAddress").val(true);return false}}}}for(var f=0;f<a.length;f++){if(g==jQuery(a[f]).attr("id")){jQuery(this).removeClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").hide();if(g.search("service")!=-1&&a[f].search("address")!=-1){for(var f=0;f<a.length;f++){if(a[f].search("service")!=-1&&a[f].search("address")!=-1){if(jQuery(a[f]).hasClass("form-field-error")){return false}}}}if(g.search("billing")!=-1&&a[f].search("address")!=-1){for(var f=0;f<a.length;f++){if(a[f].search("billing")!=-1&&a[f].search("address")!=-1){if(jQuery(a[f]).hasClass("form-field-error")){return false}}}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");return false}}});this.theForm.find("input:password").keyup(function(){c.processSubmitButton("wearevalid")});this.theForm.find("input:checkbox").livequery("click",function(f){c.processSubmitButton("wearevalid")});this.theForm.find("textarea").keyup(function(){c.processSubmitButton("wearevalid");if(d){d=false;return false}var g=jQuery(this).attr("id");if(jQuery("#validServiceAddress").val()=="false"&&g.search("address")!=-1){for(var f=0;f<a.length;f++){if(a[f].search("service")!=-1){if(g==jQuery(a[f]).attr("id")){for(var f=0;f<a.length;f++){if(a[f].search("service")!=-1&&a[f].search("address")!=-1){jQuery(a[f]).removeClass("form-field-error")}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");jQuery("#validServiceAddress").val(true);return false}}}}if(jQuery("#validBillingAddress").val()=="false"&&g.search("address")!=-1){for(var f=0;f<a.length;f++){if(a[f].search("billing")!=-1){if(g==jQuery(a[f]).attr("id")){for(var f=0;f<a.length;f++){if(a[f].search("billing")!=-1&&a[f].search("address")!=-1){jQuery(a[f]).removeClass("form-field-error")}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");jQuery("#validBillingAddress").val(true);return false}}}}for(var f=0;f<a.length;f++){if(g==jQuery(a[f]).attr("id")){jQuery(this).removeClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").hide();if(g.search("service")!=-1&&a[f].search("address")!=-1){for(var f=0;f<a.length;f++){if(a[f].search("service")!=-1&&a[f].search("address")!=-1){if(jQuery(a[f]).hasClass("form-field-error")){return false}}}}if(g.search("billing")!=-1&&a[f].search("address")!=-1){for(var f=0;f<a.length;f++){if(a[f].search("billing")!=-1&&a[f].search("address")!=-1){if(jQuery(a[f]).hasClass("form-field-error")){return false}}}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");return false}}});this.theForm.find("input:radio").livequery("click",function(f){c.processSubmitButton("wearevalid")});this.theForm.find("select").change(function(){c.processSubmitButton("wearevalid");var h=jQuery(this).attr("id");for(var f=0;f<a.length;f++){if(h==jQuery(a[f]).attr("id")){var g=jQuery(this).val().replace(/^\s+|\s+$/g,"");if(g.length==0){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"});return false}}}if(jQuery("#validServiceAddress").val()=="false"&&h.search("address")!=-1){for(var f=0;f<a.length;f++){if(a[f].search("service")!=-1){if(h==jQuery(a[f]).attr("id")){for(var f=0;f<a.length;f++){if(a[f].search("service")!=-1&&a[f].search("address")!=-1){jQuery(a[f]).removeClass("form-field-error")}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");jQuery("#validServiceAddress").val(true);return false}}}}if(jQuery("#validBillingAddress").val()=="false"&&h.search("address")!=-1){for(var f=0;f<a.length;f++){if(a[f].search("billing")!=-1){if(h==jQuery(a[f]).attr("id")){for(var f=0;f<a.length;f++){if(a[f].search("billing")!=-1&&a[f].search("address")!=-1){jQuery(a[f]).removeClass("form-field-error")}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");jQuery("#validBillingAddress").val(true);return false}}}}for(var f=0;f<a.length;f++){if(h==jQuery(a[f]).attr("id")){jQuery(this).removeClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").hide();if(h.search("service")!=-1&&a[f].search("address")!=-1){for(var f=0;f<a.length;f++){if(a[f].search("service")!=-1&&a[f].search("address")!=-1){if(jQuery(a[f]).hasClass("form-field-error")){return false}}}}if(h.search("billing")!=-1&&a[f].search("address")!=-1){for(var f=0;f<a.length;f++){if(a[f].search("billing")!=-1&&a[f].search("address")!=-1){if(jQuery(a[f]).hasClass("form-field-error")){return false}}}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");return false}}});this.theForm.find("select").blur(function(){c.processSubmitButton("wearevalid");var h=jQuery(this).attr("id");for(var f=0;f<a.length;f++){if(h==jQuery(a[f]).attr("id")){var g=jQuery(this).val().replace(/^\s+|\s+$/g,"");if(g.length==0){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"});return false}}}if(jQuery("#validServiceAddress").val()=="false"&&h.search("address")!=-1){for(var f=0;f<a.length;f++){if(a[f].search("service")!=-1){if(h==jQuery(a[f]).attr("id")){for(var f=0;f<a.length;f++){if(a[f].search("service")!=-1&&a[f].search("address")!=-1){jQuery(a[f]).removeClass("form-field-error")}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");jQuery("#validServiceAddress").val(true);return false}}}}if(jQuery("#validBillingAddress").val()=="false"&&h.search("address")!=-1){for(var f=0;f<a.length;f++){if(a[f].search("billing")!=-1){if(h==jQuery(a[f]).attr("id")){for(var f=0;f<a.length;f++){if(a[f].search("billing")!=-1&&a[f].search("address")!=-1){jQuery(a[f]).removeClass("form-field-error")}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");jQuery("#validBillingAddress").val(true);return false}}}}for(var f=0;f<a.length;f++){if(h==jQuery(a[f]).attr("id")){jQuery(this).removeClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").hide();if(h.search("service")!=-1&&a[f].search("address")!=-1){for(var f=0;f<a.length;f++){if(a[f].search("service")!=-1&&a[f].search("address")!=-1){if(jQuery(a[f]).hasClass("form-field-error")){return false}}}}if(h.search("billing")!=-1&&a[f].search("address")!=-1){for(var f=0;f<a.length;f++){if(a[f].search("billing")!=-1&&a[f].search("address")!=-1){if(jQuery(a[f]).hasClass("form-field-error")){return false}}}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");return false}}});this.theForm.find("input:text").bind("paste",function(){setTimeout(function(){c.processSubmitButton("wearevalid")},100)});this.theForm.bind("keypress",function(j){if(j.keyCode==13&&!e){var h=new RegExp(/[^A-Za-z0-9'#\-\s.,\/]/g);var l=new Array();if(jQuery("html").find("#sameAsServiceAddress").is(":checked")){for(var f=0;f<a.length;f++){if(a[f].search("service")!=-1){l.push(a[f])}}}else{l=a}for(var f=0;f<l.length;f++){var k=jQuery(l[f]).val().replace(/^\s+|\s+$/g,"");if(k.length==0){jQuery(l[f]).addClass("form-field-error");jQuery(l[f]).parent().find("div.field-error-msg").slideDown(100);jQuery(l[f]).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"});d=true;return false}if(h.test(k)){jQuery(l[f]).addClass("form-field-error");jQuery(l[f]).parent().find("div.field-error-msg").slideDown(100);jQuery(l[f]).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"});d=true;return false}if(a[f].search("postalCode")!=-1){var g=new RegExp(/^\d{5}$|^\d{5}-\d{4}$/);var k=jQuery(a[f]).val().replace(/^\s+|\s+$/g,"");if(!g.test(k)){jQuery(l[f]).addClass("form-field-error");jQuery(l[f]).parent().find("div.field-error-msg").slideDown(100);jQuery(l[f]).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"});d=true;return false}}}}})},processSubmitButton:function(p){var f;if(this.params.inputFieldIDs==null){f=this.validator.settings.groups}else{f=this.params.inputFieldIDs}if(this.params.submitButton!=null){var g=this.theForm.find(".required:blank").not(":hidden");var v=this.theForm.find("input:checkbox.required:unchecked").not(":hidden");var q=new Array();var n=this.theForm.find("input:radio").next();for(u=0;u<n.length;u++){if(jQuery(n[u]).is(":visible")){var j=jQuery(n[u]).prev();q.push(j[0].name)}}jQuery.unique(q);var a=true;for(u=0;u<q.length;u++){if(jQuery("input[name='"+q[u]+"']:checked").length==0){a=false;break}}var d;var o;var e=true;var l=true;var k=new RegExp(/^\d{5}$|^\d{5}-\d{4}$/);var h=new RegExp(/[^A-Za-z0-9'#\-\s.,\/]/g);var t=false;var w=false;for(var u=0;u<f.length;u++){var c=jQuery(f[u]).attr("id");if(c.search("service")!=-1&&c.search("postalCode")!=-1){d=jQuery(f[u]).val().replace(/^\s+|\s+$/g,"");if(!k.test(d)){e=false}}if(c.search("billing")!=-1&&c.search("postalCode")!=-1){o=jQuery(f[u]).val().replace(/^\s+|\s+$/g,"");if(!k.test(o)){l=false}}}var x=new Array();if(this.theForm.find("#sameAsServiceAddress").is(":checked")){for(var u=0;u<f.length;u++){if(f[u].search("service")!=-1){x.push(f[u])}}}else{x=f}for(var u=0;u<x.length;u++){var m=jQuery(x[u]).val().replace(/^\s+|\s+$/g,"");if(m.length==0){w=true;break}else{if(h.test(m)){t=true;break}}}jQuery("#proceedDisabled").find(".text-bar").html("<p>Please complete all required information before continuing.</p>");if(this.theForm.find("#sameAsServiceAddress").is(":checked")){for(var u=0;u<g.length;u++){var m=jQuery(g[u]).attr("id");if(m.search("billing")!=-1){g.splice(jQuery.inArray(m,g),1);u--}}if(g.length>0||v.length>0||!a||t){if(jQuery("#package").html()!=null&&jQuery("#package").is(":visible")){if(jQuery.inArray("internet-listening",q)>-1&&jQuery("input[name='internet-listening']:checked").length==0&&jQuery("input[name='radio-package']:checked").length>0){jQuery("#proceedDisabled").find(".text-bar").html("<p>Please select an Internet Listening option before continuing.</p>")}else{jQuery("#proceedDisabled").find(".text-bar").html("<p>Please complete all required information before continuing.</p>")}}this.params.submitButton.parent().hide();this.params.submitButton.parent().next().show()}else{this.params.submitButton.parent().show();this.params.submitButton.parent().next().hide();if(this.params.backButton){this.params.backButton.removeAttr("disabled").removeClass("ui-state-disabled").addClass("ui-state-active")}if(jQuery("#renewlater").is(":visible")){this.params.submitButton.parent().hide()}}}else{if(g.length>0||v.length>0||!a||!e||!l||w||t){if(jQuery("#package").html()!=null&&jQuery("#package").is(":visible")){if(jQuery.inArray("internet-listening",q)>-1&&jQuery("input[name='internet-listening']:checked").length==0&&jQuery("input[name='radio-package']:checked").length>0){jQuery("#proceedDisabled").find(".text-bar").html("<p>Please select an Internet Listening option before continuing.</p>")}else{jQuery("#proceedDisabled").find(".text-bar").html("<p>Please complete all required information before continuing.</p>")}}this.params.submitButton.parent().hide();this.params.submitButton.parent().next().show()}else{this.params.submitButton.parent().show();this.params.submitButton.parent().next().hide();if(jQuery("#error-status-1550").is(":visible")){this.params.submitButton.parent().hide();this.params.submitButton.parent().next().show()}if(this.params.backButton){this.params.backButton.removeAttr("disabled").removeClass("ui-state-disabled").addClass("ui-state-active")}if(jQuery("#renewlater").is(":visible")){this.params.submitButton.parent().hide()}}}var r=jQuery("#termSelectionPage").val();if(r=="true"){var b=jQuery("#termChanged").val();if(b&&b!="true"){jQuery("#proceedDisabled").show();jQuery("#proceed").hide()}else{if(b&&b=="true"){jQuery("#proceedDisabled").hide();jQuery("#proceed").show()}}jQuery("#termSelectionPage").val("false")}}jQuery(".error-msg",this.theForm).hide()}});var UpdateAddressValidator=SiriusValidator.extend({validator:null,theForm:null,params:null,init:function(g){var c=this;this.params=g;this.theForm=g.theForm;this.defaultErrorString=null;var b=g.inputFieldIDs;var f=g.emailRequiredMessage;var h=g.emailFormatMessage;var a=g.addressRequiredMessage;var e=g.addressInvalidMessage;var d=g.cardNameInvalidMessage;if(g.handleSuccess!=null){this.handleSuccess=g.handleSuccess}if(g.submitButton==null){this.params.submitButton=this.theForm.find(":submit")}if(g.backButton==null){this.params.backButton=this.theForm.find(":reset")}if(this.validator==null){this.validator=this.theForm.validate({highlight:function(l,j,k){c.highlight(l,j,k)},unhighlight:function(l,j,k){c.unhighlight(l,j,k)},errorPlacement:function(j,k){c.errorPlacement(j,k)},messages:g.messages,errorElement:"div",errorClass:"field-error-msg",meta:"rules",validClass:"wearevalid"})}this.addListeners(b,this.theForm,h,f,a,e,d);this.processSubmitButton("wearevalid")},addListeners:function(h,d,e,f,g,k,a){var j=this;var b=false;var c;this.theForm.find("input:text").blur(function(){j.processSubmitButton("wearevalid");var t=jQuery(this).attr("id");for(var n=0;n<h.length;n++){if(t==jQuery(h[n]).attr("id")){var r=jQuery(this).val().replace(/^\s+|\s+$/g,"");var q=new RegExp(/^[A-Za-z0-9]([A-Za-z0-9_-]|(\.[A-Za-z0-9]))+@[A-Za-z0-9](([A-Za-z0-9]|(-[A-Za-z0-9]))+)\.([A-Za-z]{2,6})(\.([A-Za-z]{2}))?$/);var l=new RegExp(/^([0-9]{10})$/);var o=new RegExp(/^\d{5}$|^\d{5}-\d{4}$/);var p=new RegExp(/[^A-Za-z0-9'#\-\s.,\/]/g);var m=new RegExp(/^[a-zA-Z',\\.\-\s\\]{2,255}$/);if(jQuery("html").find("#isValidAddress").val()=="true"){if(jQuery(h[n]).hasClass("form-field-error")&&t.search("postalCode")!=-1){if(o.test(r)){jQuery(this).trigger("keyup")}}else{if(jQuery(h[n]).hasClass("form-field-error")&&t.search("city")!=-1){if(!p.test(r)){jQuery(this).trigger("keyup")}}else{if(jQuery(h[n]).hasClass("form-field-error")){if(r.length!=0){jQuery(this).trigger("keyup")}}}}}if(r.length==0){jQuery(this).addClass("form-field-error");if(t.search("email")!=-1){if(!(jQuery(this).parent().find("div.field-error-msg").html().length>0)){jQuery(this).parent().find("div.field-error-msg").html(f)}}jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("tr.form-item").children("td.required").addClass("error");jQuery(this).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(this).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active")}else{if(p.test(r)&&t.search("email")==-1){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("tr.form-item").children("td.required").addClass("error");jQuery(this).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(this).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active")}else{if(t.search("email")!=-1){if(!q.test(r)){if(!(jQuery(this).parent().find("div.field-error-msg").html().length>0)){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").html(e);jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("tr.form-item").children("td.required").addClass("error");jQuery(this).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(this).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"})}d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active")}}if(t.search("phone")!=-1){if(!l.test(r)){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("tr.form-item").children("td.required").addClass("error");jQuery(this).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(this).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active")}}if(t.search("postalCode")!=-1){if(!o.test(r)){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("tr.form-item").children("td.required").addClass("error");jQuery(this).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(this).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active")}}if(t.search("nameOnCard")!=-1&&!m.test(r)){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").html(a);jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("tr.form-item").children("td.required").addClass("error");jQuery(this).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(this).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active")}}}jQuery(this).parents("tr.form-item").next().find("td.field-error-msg").children("span").hide();return false}}});this.theForm.find("textarea").focus(function(){c=true});this.theForm.find("textarea").blur(function(){j.processSubmitButton("wearevalid");c=false;var m=new RegExp(/[^A-Za-z0-9'#\-\s.,\/]/g);var o=jQuery(this).attr("id");for(var l=0;l<h.length;l++){if(o==jQuery(h[l]).attr("id")){var n=jQuery(this).val().replace(/^\s+|\s+$/g,"");if(n.length==0){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").html(g);jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("tr.form-item").children("td.required").addClass("error");jQuery(this).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(this).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active")}else{if(m.test(n)){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").html(k);jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("tr.form-item").children("td.required").addClass("error");jQuery(this).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(this).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active")}}return false}}});this.theForm.find("input:text").keyup(function(){j.processSubmitButton("wearevalid");if(b){b=false;return false}var n=jQuery(this).attr("id");if(jQuery("html").find("#isValidAddress").val()=="false"){for(var l=0;l<h.length;l++){if(n==jQuery(h[l]).attr("id")){for(var l=0;l<h.length;l++){if(h[l].search("address")!=-1||h[l].search("Address")!=-1){jQuery(h[l]).removeClass("form-field-error");jQuery(h[l]).parents("tr.form-item").children("td.required").removeClass("error");jQuery(h[l]).parents("div.form-item").find("label").removeClass("error");jQuery(h[l]).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:""})}}jQuery("html").find("#isValidAddress").val(true);return false}}}for(var l=0;l<h.length;l++){if(n==jQuery(h[l]).attr("id")){jQuery(this).removeClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").hide();jQuery(this).parents("tr.form-item").children("td.required").removeClass("error");jQuery(this).parents("div.form-item").find("label").removeClass("error");jQuery(this).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:""});var m=new Array();for(var l=0;l<h.length;l++){m[l]=jQuery(h[l]).val().replace(/^\s+|\s+$/g,"")}for(var l=0;l<h.length;l++){if(jQuery(h[l]).hasClass("form-field-error")){d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");return false}}return false}}});this.theForm.find("input:password").keyup(function(){});this.theForm.find("input:checkbox").livequery("click",function(l){});this.theForm.find("textarea").keyup(function(){j.processSubmitButton("wearevalid");if(b){b=false;return false}var n=jQuery(this).attr("id");if(jQuery("html").find("#isValidAddress").val()=="false"){for(var l=0;l<h.length;l++){if(n==jQuery(h[l]).attr("id")){for(var l=0;l<h.length;l++){if(h[l].search("address")!=-1||h[l].search("Address")!=-1){jQuery(h[l]).removeClass("form-field-error");jQuery(h[l]).parents("tr.form-item").children("td.required").removeClass("error");jQuery(h[l]).parents("div.form-item").find("label").removeClass("error");jQuery(h[l]).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:""})}}jQuery("html").find("#isValidAddress").val(true);return false}}}for(var l=0;l<h.length;l++){if(n==jQuery(h[l]).attr("id")){jQuery(this).removeClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").hide();jQuery(this).parents("tr.form-item").children("td.required").removeClass("error");jQuery(this).parents("div.form-item").find("label").removeClass("error");jQuery(this).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:""});var m=new Array();for(var l=0;l<h.length;l++){m[l]=jQuery(h[l]).val().replace(/^\s+|\s+$/g,"")}for(var l=0;l<h.length;l++){if(jQuery(h[l]).hasClass("form-field-error")){d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");return false}}return false}}});this.theForm.find("input:radio").livequery("click",function(l){});this.theForm.find("select").change(function(){j.processSubmitButton("wearevalid");var o=jQuery(this).attr("id");if(jQuery("html").find("#isValidAddress").val()=="false"){for(var l=0;l<h.length;l++){if(o==jQuery(h[l]).attr("id")){for(var l=0;l<h.length;l++){if(h[l].search("address")!=-1||h[l].search("Address")!=-1){jQuery(h[l]).removeClass("form-field-error");jQuery(h[l]).parents("tr.form-item").children("td.required").removeClass("error");jQuery(h[l]).parents("div.form-item").find("label").removeClass("error");jQuery(h[l]).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:""})}}jQuery("html").find("#isValidAddress").val(true)}}}for(var l=0;l<h.length;l++){if(o==jQuery(h[l]).attr("id")){var n=jQuery(this).val().replace(/^\s+|\s+$/g,"");if(n.length==0){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("tr.form-item").children("td.required").addClass("error");jQuery(this).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(this).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");return false}else{jQuery(this).removeClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").hide();jQuery(this).parents("tr.form-item").children("td.required").removeClass("error");jQuery(this).parents("div.form-item").find("label").removeClass("error");jQuery(this).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:""})}var m=new Array();for(var l=0;l<h.length;l++){m[l]=jQuery(h[l]).val().replace(/^\s+|\s+$/g,"")}for(var l=0;l<m.length;l++){if(m[l].length==0){d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");return false}else{for(var l=0;l<h.length;l++){if(jQuery(h[l]).hasClass("form-field-error")){d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");return false}}}}return false}}});this.theForm.find("select").blur(function(){j.processSubmitButton("wearevalid");var o=jQuery(this).attr("id");for(var l=0;l<h.length;l++){if(o==jQuery(h[l]).attr("id")){var n=jQuery(this).val().replace(/^\s+|\s+$/g,"");if(n.length==0){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("tr.form-item").children("td.required").addClass("error");jQuery(this).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(this).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");return false}else{jQuery(this).removeClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").hide();jQuery(this).parents("tr.form-item").children("td.required").removeClass("error");jQuery(this).parents("div.form-item").find("label").removeClass("error");jQuery(this).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:""})}var m=new Array();for(var l=0;l<h.length;l++){m[l]=jQuery(h[l]).val().replace(/^\s+|\s+$/g,"")}for(var l=0;l<m.length;l++){if(m[l].length==0){d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");return false}else{for(var l=0;l<h.length;l++){if(jQuery(h[l]).hasClass("form-field-error")){d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");return false}}}}return false}}});this.theForm.find("input:text").bind("paste",function(){jQuery(this).trigger("keyup")});this.theForm.find("input:image").bind("click",function(){var p=new RegExp(/[^A-Za-z0-9'#\-\s.,\/]/g);var o=true;for(var m=0;m<h.length;m++){var r=jQuery(h[m]).val().replace(/^\s+|\s+$/g,"");if(r.length==0){jQuery(h[m]).addClass("form-field-error");jQuery(h[m]).parent().find("div.field-error-msg").slideDown(100);jQuery(h[m]).parents("tr.form-item").children("td.required").addClass("error");jQuery(h[m]).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(h[m]).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");o=false}if(p.test(r)){jQuery(h[m]).addClass("form-field-error");jQuery(h[m]).parent().find("div.field-error-msg").slideDown(100);jQuery(h[m]).parents("tr.form-item").children("td.required").addClass("error");jQuery(h[m]).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(h[m]).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");o=false}if(h[m].search("email")!=-1){var q=new RegExp(/^[A-Za-z0-9]([A-Za-z0-9_-]|(\.[A-Za-z0-9]))+@[A-Za-z0-9](([A-Za-z0-9]|(-[A-Za-z0-9]))+)\.([A-Za-z]{2,6})(\.([A-Za-z]{2}))?$/);var r=jQuery(h[m]).val().replace(/^\s+|\s+$/g,"");if(r.length==0){jQuery(h[m]).addClass("form-field-error");jQuery(h[m]).parent().find("div.field-error-msg").html(f);jQuery(h[m]).parent().find("div.field-error-msg").slideDown(100);jQuery(h[m]).parents("tr.form-item").children("td.required").addClass("error");jQuery(h[m]).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(h[m]).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");return false}if(!q.test(r)){jQuery(h[m]).addClass("form-field-error");jQuery(h[m]).parent().find("div.field-error-msg").html(e);jQuery(h[m]).parent().find("div.field-error-msg").slideDown(100);jQuery(h[m]).parents("tr.form-item").children("td.required").addClass("error");jQuery(h[m]).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(h[m]).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");return false}}if(h[m].search("phone")!=-1){var l=new RegExp(/^([0-9]{10})$/);var r=jQuery(h[m]).val().replace(/^\s+|\s+$/g,"");if(!l.test(r)){jQuery(h[m]).addClass("form-field-error");jQuery(h[m]).parent().find("div.field-error-msg").slideDown(100);jQuery(h[m]).parents("tr.form-item").children("td.required").addClass("error");jQuery(h[m]).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(h[m]).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");return false}}if(h[m].search("postalCode")!=-1){var n=new RegExp(/^\d{5}$|^\d{5}-\d{4}$/);var r=jQuery(h[m]).val().replace(/^\s+|\s+$/g,"");if(!n.test(r)){jQuery(h[m]).addClass("form-field-error");jQuery(h[m]).parent().find("div.field-error-msg").slideDown(100);jQuery(h[m]).parents("tr.form-item").children("td.required").addClass("error");jQuery(h[m]).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(h[m]).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");return false}}}return(o)?submitMe(this):false});this.theForm.bind("keypress",function(p){if(p.keyCode==13&&!c){var o=new RegExp(/[^A-Za-z0-9'#\-\s.,\/]/g);for(var m=0;m<h.length;m++){var r=jQuery(h[m]).val().replace(/^\s+|\s+$/g,"");if(r.length==0){jQuery(h[m]).addClass("form-field-error");jQuery(h[m]).parent().find("div.field-error-msg").slideDown(100);jQuery(h[m]).parents("tr.form-item").children("td.required").addClass("error");jQuery(h[m]).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(h[m]).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");b=true}if(o.test(r)){jQuery(h[m]).addClass("form-field-error");jQuery(h[m]).parent().find("div.field-error-msg").slideDown(100);jQuery(h[m]).parents("tr.form-item").children("td.required").addClass("error");jQuery(h[m]).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(h[m]).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");b=true}if(h[m].search("email")!=-1){var q=new RegExp(/^[A-Za-z0-9]([A-Za-z0-9_-]|(\.[A-Za-z0-9]))+@[A-Za-z0-9](([A-Za-z0-9]|(-[A-Za-z0-9]))+)\.([A-Za-z]{2,6})(\.([A-Za-z]{2}))?$/);var r=jQuery(h[m]).val().replace(/^\s+|\s+$/g,"");if(r.length==0){jQuery(h[m]).addClass("form-field-error");jQuery(h[m]).parent().find("div.field-error-msg").html(f);jQuery(h[m]).parent().find("div.field-error-msg").slideDown(100);jQuery(h[m]).parents("tr.form-item").children("td.required").addClass("error");jQuery(h[m]).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(h[m]).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");b=true;return false}if(!q.test(r)){jQuery(h[m]).addClass("form-field-error");jQuery(h[m]).parent().find("div.field-error-msg").html(e);jQuery(h[m]).parent().find("div.field-error-msg").slideDown(100);jQuery(h[m]).parents("tr.form-item").children("td.required").addClass("error");jQuery(h[m]).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(h[m]).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");b=true;return false}}if(h[m].search("phone")!=-1){var l=new RegExp(/^([0-9]{10})$/);var r=jQuery(h[m]).val().replace(/^\s+|\s+$/g,"");if(!l.test(r)){jQuery(h[m]).addClass("form-field-error");jQuery(h[m]).parent().find("div.field-error-msg").slideDown(100);jQuery(h[m]).parents("tr.form-item").children("td.required").addClass("error");jQuery(h[m]).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(h[m]).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");b=true;return false}}if(h[m].search("postalCode")!=-1){var n=new RegExp(/^\d{5}$|^\d{5}-\d{4}$/);var r=jQuery(h[m]).val().replace(/^\s+|\s+$/g,"");if(!n.test(r)){jQuery(h[m]).addClass("form-field-error");jQuery(h[m]).parent().find("div.field-error-msg").slideDown(100);jQuery(h[m]).parents("tr.form-item").children("td.required").addClass("error");jQuery(h[m]).parents("div.form-item").find("label").addClass("error").css({"background-image":"none"});jQuery(h[m]).parents("tr.form-item").children("td.mid-grey").children("span.required").css({color:"#cf0000"});d.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"});d.find("input:image").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");b=true;return false}}}if(b){return false}}})},processSubmitButton:function(b){if(this.params.submitButton!=null){var a=this.theForm.find(".required:blank").not(":hidden");if(a.length>0){this.theForm.find(":submit").attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"})}else{this.theForm.find(":submit").removeAttr("disabled").removeClass("ui-state-disabled").removeClass("ui-state-active").css({"border-width":"0px"})}}},highlight:function(c,a,b){jQuery(c).parents(".form-item").addClass("error");if(jQuery(c).parents(".form-item").find(".creditcard-instructions").length>0){jQuery(c).parents(".form-item").find(".creditcard-instructions").hide()}jQuery(c).removeClass(b)},unhighlight:function(c,a,b){jQuery(c).parents(".form-item").removeClass("error");if(jQuery(c).parents(".form-item").find(".creditcard-instructions").length>0){jQuery(c).parents(".form-item").find(".creditcard-instructions").show()}jQuery(c).addClass(b)},errorPlacement:function(a,b){var c=b.parents(".input-group");if(c.length>0){c.find(".field-error-msg").remove();c.append(a)}else{a.insertAfter(b);a.css("width",b.css("width"))}}});var ResponsiveAddressValidator=SiriusValidator.extend({validator:null,theForm:null,params:null,init:function(c){var b=this;this.params=c;this.theForm=c.theForm;this.defaultErrorString=null;var a=c.inputFieldIDs;if(c.handleSuccess!=null){this.handleSuccess=c.handleSuccess}if(c.submitButton==null){this.params.submitButton=this.theForm.find(":submit")}if(c.backButton==null){this.params.backButton=this.theForm.find(":reset")}if(this.validator==null){this.validator=this.theForm.validate({highlight:function(f,d,e){b.highlight(f,d,e)},unhighlight:function(f,d,e){b.unhighlight(f,d,e)},errorPlacement:function(d,e){b.errorPlacement(d,e)},messages:c.messages,errorElement:"div",errorClass:"field-error-msg",meta:"rules",validClass:"wearevalid"})}this.addListeners(a,this.theForm)},addListeners:function(a,d){var b=this;var c=false;this.theForm.find("input:text").keyup(function(){jQuery("html").find("#isValidAddress").val(true);var g=jQuery(this).attr("id");var f=jQuery(this).val().replace(/^\s+|\s+$/g,"");if(g!="cardNumber"&&!b.hasError(g,f)&&f.length!=0){jQuery(this).removeClass("form-field-error");jQuery(this).next("div#fieldErrorDiv").hide();if(g=="zipCode"){jQuery("#fieldErrorZip[name='fieldErrorZip']").hide()}}else{if(g=="cardNumber"&&f.length!=0){var e=new RegExp(/[^0-9'*]/g);if(!e.test(f)){jQuery(this).removeClass("form-field-error");jQuery(this).next("div#fieldErrorDiv").hide()}}}return false});this.theForm.find("textarea").focus(function(){c=true});this.theForm.find("textarea").blur(function(){c=false});this.theForm.find("textarea").keyup(function(){var f=jQuery(this).attr("id");var e=jQuery(this).val().replace(/^\s+|\s+$/g,"");if(!b.hasError(f,e)&&e.length!=0){jQuery(this).removeClass("form-field-error");jQuery(this).next("div#fieldErrorDiv").hide()}return false});this.theForm.find("input:password").keyup(function(){});this.theForm.find("input:checkbox").livequery("click",function(e){});this.theForm.find("input:radio").livequery("click",function(e){});this.theForm.find("select").change(function(){jQuery("#skipValidation").val("false");jQuery("html").find("#isValidAddress").val(true);var e=jQuery(this).attr("id");if(jQuery(this).val()!=""||jQuery(this).val()!="-1"){if(e.search("Month")!="-1"){jQuery("#expireMonth").removeClass("form-field-error");jQuery("#fieldErrorDiv[name='fieldErrorDate']").hide();jQuery("div[name='dateError']").hide()}else{if(e.search("Year")!="-1"){jQuery("#expireYear").removeClass("form-field-error");jQuery("#fieldErrorDiv[name='fieldErrorDate']").hide();jQuery("div[name='dateError']").hide()}else{if(e.search("cardType")!="-1"){jQuery("#cardType").removeClass("form-field-error");jQuery("#fieldErrorDiv[name='cardTypeError']").hide()}else{if(e.search("state")!="-1"){jQuery("#state").removeClass("form-field-error");if(jQuery(window).width()<=420){jQuery("#fieldErrorStateSmall[name='fieldErrorStateSmall']").hide()}else{jQuery("#fieldErrorState[name='fieldErrorState']").hide()}}}}}}return false});this.theForm.find("input:text").bind("paste",function(){jQuery(this).trigger("keyup")});this.theForm.find(":submit").bind("click",function(){var g=true;for(var e=0;e<a.length;e++){var h=jQuery(a[e]).val().replace(/^\s+|\s+$/g,"");if(h.length==0){if(a[e].search("state")==-1){jQuery(a[e]).next("div#fieldErrorDiv").show();jQuery(a[e]).addClass("form-field-error");if(a[e]=="#zipCode"){jQuery("#fieldErrorZip[name='fieldErrorZip']").show()}g=false}}if(jQuery("#cardType option:selected").text()=="Card Type"){jQuery("#cardType").addClass("form-field-error");jQuery("#fieldErrorDiv[name='cardTypeError']").show();g=false}if(jQuery("#expireMonth option:selected").text()=="Month"){jQuery("#expireMonth").addClass("form-field-error");jQuery("#fieldErrorDiv[name='fieldErrorDate']").show();jQuery("div[name='dateError']").hide();g=false}if(jQuery("#expireYear option:selected").text()=="Year"){jQuery("#expireYear").addClass("form-field-error");jQuery("#fieldErrorDiv[name='fieldErrorDate']").show();jQuery("div[name='dateError']").hide();g=false}if(jQuery("#statedropdown option:selected").text()=="State"){jQuery("#state").addClass("form-field-error");if(jQuery(window).width()<=420){jQuery("#fieldErrorStateSmall[name='fieldErrorStateSmall']").show()}else{jQuery("#fieldErrorState[name='fieldErrorState']").show()}g=false}if(a[e].search("cardNumber")==-1&&b.hasError(a[e],h)){jQuery(a[e]).addClass("form-field-error");jQuery(a[e]).next("div#fieldErrorDiv").show();if(a[e]=="#zipCode"){jQuery("#fieldErrorZip[name='fieldErrorZip']").show()}g=false}if(a[e].search("cardNumber")!=-1){var f=new RegExp(/[^0-9'*]/g);var h=jQuery(a[e]).val().replace(/^\s+|\s+$/g,"");if(f.test(h)){jQuery(a[e]).next("div#fieldErrorDiv").show();jQuery(a[e]).addClass("form-field-error");g=false}}}if(g){return submitMe(this)}else{jQuery("[placeholder]").blur();return false}});this.theForm.bind("keypress",function(f){if(f.keyCode==13&&!c){return false}})},hasEmptyFields:function(a){var d=false;for(var b=0;b<a.length;b++){if(a[b].search("state")==-1){if(a[b].search("address2")==-1){var c=jQuery(a[b]).val().replace(/^\s+|\s+$/g,"");if(c.length==0){d=true}}}else{if(jQuery("#statedropdown option:selected").text()=="State"){d=true}}}return d},hasSpecialChar:function(b){var a=false;var d=new RegExp(/[^A-Za-z0-9'#\-\s.,\/]/g);for(var c=0;c<b.length;c++){if(b[c].search("state")==-1){var e=jQuery(b[c]).val().replace(/^\s+|\s+$/g,"");if(d.test(e)){a=true}}}return a},isZipCodeFormatted:function(a){var e=true;var c=new RegExp(/^\d{5}$|^\d{5}-\d{4}$/);for(var b=0;b<a.length;b++){if(a[b].search("zipCode")!=-1){var d=jQuery(a[b]).val().replace(/^\s+|\s+$/g,"");if(!c.test(d)&&d.length!=0){e=false}}}return e},hasError:function(d,c){var b=new RegExp(/[^A-Za-z0-9'#\-\s.,\/]/g);var a=new RegExp(/^\d{5}$|^\d{5}-\d{4}$/);if(d.search("address2")!=-1){if(c.length!=0){if(b.test(c)){return true}}}if(d.search("zipCode")!=-1){if(!a.test(c)&&c.length!=0){return true}}if(b.test(c)){return true}return false},highlight:function(c,a,b){jQuery(c).parents(".form-item").addClass("error");if(jQuery(c).parents(".form-item").find(".creditcard-instructions").length>0){jQuery(c).parents(".form-item").find(".creditcard-instructions").hide()}jQuery(c).removeClass(b)},unhighlight:function(c,a,b){jQuery(c).parents(".form-item").removeClass("error");if(jQuery(c).parents(".form-item").find(".creditcard-instructions").length>0){jQuery(c).parents(".form-item").find(".creditcard-instructions").show()}jQuery(c).addClass(b)},errorPlacement:function(a,b){var c=b.parents(".input-group");if(c.length>0){c.find(".field-error-msg").remove();c.append(a)}else{a.insertAfter(b);a.css("width",b.css("width"))}}});var FlowManagerValidator=ClientValidator.extend({init:function(b){var a=this;this.params=b;this.validator=b.validator;this.validator.settings.invalidHandler=function(d,c){a.invalidHandler(d,c)};this.validator.settings.highlight=function(e,c,d){a.highlight(e,c,d)};this.validator.settings.unhighlight=function(e,c,d){a.unhighlight(e,c,d)};this.validator.settings.validClass="wearevalid";this.validator.settings.errorElement="div";this.validator.settings.errorClass="field-error-msg";this.validator.settings.errorPlacement=function(c,d){a.errorPlacement(c,d)},jQuery.validator.addMethod("channelsRequired",function(d,c){if(jQuery(c).is(":checked")){return $(c).parents(".subTable").length}},"");jQuery(document).bind("PAGE_CHANGE",function(){a.processSubmitButton(a.validator.settings.validClass)});this._super(b)}});var UsernameValidator=SiriusValidator.extend({processSubmitButton:function(b){var a=false;if(this.params.phone1!=null){if(this.params.phone1.val()==""){a=true}}if(this.params.phone2!=null){if(this.params.phone2.val()==""){a=true}}if(this.params.phone3!=null){if(this.params.phone3.val()==""){a=true}}if(this.params.namePopup.val()==""){a=true}if(a){this.params.submitButton.hide();this.params.submitButton.next().show()}else{this.params.submitButton.show();this.params.submitButton.next().hide()}}});var EVSValidator=SiriusValidator.extend({processSubmitButton:function(a){this.params.submitButton.show()}});var ForgotPasswordValidator=SiriusValidator.extend({handleSuccess:function(b){if(b.result.result.action=="updatePassword"){document.location.href=this.params.updatePasswordUrl;jQuery("#chatAccount").val("dummyAccount")}else{if(b.result.result.action=="login"){document.location.href=this.params.loginUrl;jQuery("#chatAccount").val("dummyAccount")}else{if(b.result.result.action=="wrongAnswers"){jQuery("#chatAccount").val("dummyAccount");document.location.href=this.params.wrongAnswersUrl+b.result.result.parameters}else{if(b.result.result.action=="userNotFound"){document.location.href=this.params.searchUrl}else{if(b.result.result.action=="registration"){jQuery("#chatAccount").val("dummyAccount");document.location.href=this.params.registrationUrl}else{if(b.result.result.action=="question"){jQuery("#chatAccount").val("dummyAccount");var d=b.result.result.parameters;var e=d.substring(2);var c;var a;if(d.indexOf("1")==0){jQuery("#first-question-msg").show();jQuery("#second-question-msg").hide();jQuery("#third-question-msg").hide();a=tracker.buildFullTrackingId(null,null,null,"security_question1");c="security_question1"}else{if(d.indexOf("2")==0){jQuery("#first-question-msg").hide();jQuery("#second-question-msg").show();jQuery("#third-question-msg").hide();a=tracker.buildFullTrackingId(null,null,null,"security_question2");c="security_question2"}else{if(d.indexOf("3")==0){jQuery("#first-question-msg").hide();jQuery("#second-question-msg").hide();jQuery("#third-question-msg").show();a=tracker.buildFullTrackingId(null,null,null,"security_question3");c="security_question3"}}}tracker.performTracking(a);jQuery("#security-question-div").text(e);jQuery("#answer-field").val("");jQuery("#search-div").hide();jQuery("#question-div").show();jQuery("#back-button-div").hide();jQuery("#validate-answer-field").val("true");jQuery("#proceed").hide();jQuery("#proceedDisabled").show();jQuery("#answer-field").addClass("required");jQuery(".new-account-continue span").replaceWith("<span>Submit</span>");jQuery("#answer-field").focus();jQuery(document).trigger("PAGE_LOAD",[c,null,jQuery("#"+c),null]);setupChatParameters(b)}}}}}}return true}});var ForgotUsernameValidator=SiriusValidator.extend({handleSuccess:function(b){if(b.result.result.action=="login"){document.location.href=this.params.loginUrl;jQuery("#chatAccount").val("dummyAccount")}else{if(b.result.result.action=="wrongAnswers"){document.location.href=this.params.wrongAnswersUrl+b.result.result.parameters;jQuery("#chatAccount").val("dummyAccount")}else{if(b.result.result.action=="registration"){jQuery("#chatAccount").val("dummyAccount");document.location.href=this.params.registrationUrl}else{if(b.result.result.action=="question"){jQuery("#chatAccount").val("dummyAccount");var d=b.result.result.parameters;var e=d.substring(2);var c;var a;if(d.indexOf("1")==0){jQuery("#first-question-msg").show();jQuery("#second-question-msg").hide();jQuery("#third-question-msg").hide();a=tracker.buildFullTrackingId(null,null,null,"security_question1");c="security_question1";if(b.result.result.chatWidgetResult!=null&&b.result.result.chatWidgetResult.chatEnabled!=null&&b.result.result.chatWidgetResult.chatEnabled=="yes"){jQuery("#chatlive").show()}}else{if(d.indexOf("2")==0){jQuery("#first-question-msg").hide();jQuery("#second-question-msg").show();jQuery("#third-question-msg").hide();a=tracker.buildFullTrackingId(null,null,null,"security_question2");c="security_question2"}else{if(d.indexOf("3")==0){jQuery("#first-question-msg").hide();jQuery("#second-question-msg").hide();jQuery("#third-question-msg").show();a=tracker.buildFullTrackingId(null,null,null,"security_question3");c="security_question3"}}}tracker.performTracking(a);jQuery("#security-question-div").text(e);jQuery("#answer-field").val("");jQuery("#search-div").hide();jQuery("#question-div").show();jQuery("#back-button-div").hide();jQuery("#validate-answer-field").val("true");jQuery("#proceed").hide();jQuery("#proceedDisabled").show();jQuery("#answer-field").addClass("required");jQuery(".new-account-continue span").replaceWith("<span>Submit</span>");jQuery("#answer-field").focus();jQuery(document).trigger("PAGE_LOAD",[c,null,jQuery("#"+c),null]);setupChatParameters(b)}}}}return true}});var StepUpValidator=SiriusValidator.extend({handleSuccess:function(b){if(b.result.result.redirectUrl!=null){document.location.href=b.result.result.redirectUrl}else{if(b.result.result.action=="login"){document.location.href=this.params.loginUrl;jQuery("#chatAccount").val("dummyAccount")}else{if(b.result.result.action=="wrongAnswers"){jQuery("#chatAccount").val("dummyAccount");document.location.href=this.params.wrongAnswersUrl+b.result.result.parameters}else{if(b.result.result.action=="streamlinedregistration"){jQuery("#chatAccount").val("dummyAccount");document.location.href=this.params.streamregistrationUrl}else{if(b.result.result.action=="question"){jQuery("#chatAccount").val("dummyAccount");var d=b.result.result.parameters;var e=d.substring(2);var c;var a;if(d.indexOf("1")==0){jQuery("#first-question-msg").show();jQuery("#second-question-msg").hide();jQuery("#third-question-msg").hide();a=tracker.buildFullTrackingId(null,null,null,"securityq1");c=""}else{if(d.indexOf("2")==0){jQuery("#first-question-msg").hide();jQuery("#second-question-msg").show();jQuery("#third-question-msg").hide();a=tracker.buildFullTrackingId(null,null,null,"securityq2");c="securityq2"}else{if(d.indexOf("3")==0){jQuery("#first-question-msg").hide();jQuery("#second-question-msg").hide();jQuery("#third-question-msg").show();a=tracker.buildFullTrackingId(null,null,null,"securityq3");c="securityq3"}}}tracker.performTracking(a);jQuery("#security-question-div").text(e);jQuery("#answer-field").val("");jQuery("#question-div").show();jQuery("#back-button-div").hide();jQuery("#validate-answer-field").val("true");jQuery("#proceed").hide();jQuery("#proceedDisabled").show();jQuery("#answer-field").addClass("required");jQuery(".new-account-continue span").replaceWith("<span>Submit</span>");jQuery("#answer-field").focus();jQuery(document).trigger("PAGE_LOAD",[c,null,jQuery("#"+c),null]);setupChatParameters(b)}}}}}return true}});var LoginValidator=SiriusValidator.extend({validator:null,theForm:null,params:null,init:function(b){var a=this;this.params=b;this.theForm=b.theForm;this.defaultErrorString=null;if(b.handleSuccess!=null){this.handleSuccess=b.handleSuccess}if(b.submitButton==null){this.params.submitButton=this.theForm.find(":submit")}if(this.validator==null){this.validator=this.theForm.validate({submitHandler:(a.submitHandler==null)?null:function(c){a.submitHandler(c,a)},highlight:function(e,c,d){a.highlight(e,c,d)},unhighlight:function(e,c,d){a.unhighlight(e,c,d)},errorPlacement:function(c,d){a.errorPlacement(c,d)},messages:b.messages,errorElement:"div",errorClass:"field-error-msg",meta:"rules",validClass:"wearevalid"})}},errorPlacement:function(a,b){var c=this.theForm.find("#errorDiv");var e=this.theForm.find("input#nucaptcha-answer").attr("id");var d=jQuery(b).attr("id");if(d=="nucaptcha-answer"){a.text("Entered code does not match. Please try again.").css("padding-top","8px");a.insertAfter(b)}else{a.insertBefore(c)}a.css("width",b.css("width")).css("font-weight","normal")},addListeners:function(){var b=this;var a;if(this.params.inputFieldIDs==null){a=this.validator.settings.groups}else{a=this.params.inputFieldIDs}this.theForm.find("input:text").blur(function(){b.processSubmitButton("wearevalid");var g=jQuery(this).attr("id");for(var c=0;c<a.length;c++){if(g==jQuery(a[c]).attr("id")){var f=jQuery(this).val().replace(/^\s+|\s+$/g,"");if(f.length==0){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"})}else{if(g.search("postalCode")!=-1){var d=new RegExp(/^\d{5}$|^\d{5}-\d{4}$/);if(!d.test(f)){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"})}}else{var e=new RegExp(/[^A-Za-z0-9'#\-\s.,\/]/g);if(e.test(f)){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"})}}}return false}}})},processSubmitButton:function(b){if(this.params.submitButton!=null){var d=this.theForm.find(".required").not(":hidden");var a=[];jQuery.each(d,function(){if(jQuery(this).val()==null||jQuery(this).val()==""||jQuery(this).val()==jQuery(this).attr("placeholder")){a.push(this)}});var c=new Array();var f=this.theForm.find("input:radio").next();for(i=0;i<f.length;i++){if(jQuery(f[i]).is(":visible")){var e=jQuery(f[i]).prev();c.push(e[0].name)}}jQuery.unique(c)}},highlight:function(c,a,b){jQuery(c).addClass("form-field-error");jQuery(this).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"})},unhighlight:function(c,a,b){jQuery(c).removeClass("form-field-error");jQuery(this).parents("div.form-item").find("label.required").removeClass("error").css({"background-image":"url(images/label-required.gif)"});jQuery(".error-msg",this.theForm).hide()},handleSuccess:function(a){if(a.result.result.redirectUrl=="twoaccounts"){this.params.twoAccountsDialog.dialog("open");var b="Overlay: Choose Platform";jQuery(document).trigger("OVERLAY_OPEN",b);tracker.performTracking(tracker.buildFullTrackingId(null,null,null,"intercept"))}else{jQuery(document).bind("MEDIAPLEX_COMPLETE",function(){if(a.result.result.redirectUrl=="addtrialactivationselectpackage_initialViewPreowned.action"){jQuery("#addTrialActivationForm").submit()}else{document.location.href=a.result.result.redirectUrl}});jQuery(document).trigger("SUCCESSFUL_LOGIN",[a.result.result.deviceType])}return true},handleFailure:function(a){var c=this;var d="";var e=true;if(a.result.result.nuCaptchaData!=null&&a.result.result.nuCaptchaData!=""){jQuery("#captchaData").html(a.result.result.nuCaptchaData);c.overrideCaptchaElements(e,c);a.result.result.captchaCounter="captcha_counter";jQuery("#rememberme").removeClass("padtopfive")}else{jQuery("#captchaData").html("");jQuery("#rememberme").addClass("padtopfive")}for(var b=0;b<a.result.errors.length;b++){d=d+a.result.errors[b]}if(this.params&&this.params.submitButton){jQuery(this.params.submitButton).removeAttr("disabled").addClass("ui-state-active").removeClass("ui-state-disabled");jQuery("body").css("cursor","auto")}if(d.length>0){tracker.performErrorTracking(d)}c.processSubmitButton("wearevalid");this._super(a)},submitHandler:function(b,a){if(this.params&&this.params.submitButton){jQuery(this.params.submitButton).attr("disabled","disabled").addClass("ui-state-disabled").removeClass("ui-state-active");jQuery("body").css("cursor","progress")}this._super(b,a)},addCaptchaListener:function(){var a=this;this.theForm.find("#nucaptcha-answer").keyup(function(){a.processSubmitButton("wearevalid")})},overrideCaptchaElements:function(b,a){a.overrideCaptchaButtons(b,a);jQuery("#new-challenge").attr("href","#");jQuery("#new-challenge").unbind("click");jQuery("#new-challenge").bind("click",function(){ncCmdNewChallenge("");a.overrideCaptchaElements(b,a)});jQuery("#player-mode").attr("href","#");jQuery("#player-mode").unbind("click");jQuery("#player-mode").bind("click",function(){ncCmdToggleAudio("");b=!b;a.overrideCaptchaElements(b,a)});jQuery("#audio-listen-again").attr("href","#");jQuery("#audio-listen-again").unbind("click");jQuery("#audio-listen-again").bind("click",function(){ncCmdRefresh("");a.overrideCaptchaElements(b,a)});jQuery("#audio-new-challenge").attr("href","#");jQuery("#audio-new-challenge").unbind("click");jQuery("#audio-new-challenge").bind("click",function(){ncCmdNewChallenge("");a.overrideCaptchaElements(b,a)});jQuery("div.pm-audio div#media-container").css("padding","5px");jQuery("div#media-container a.cmd-audio").css("white-space","nowrap");jQuery("div#media-container a.cmd-audio").css("display","block")},overrideCaptchaButtons:function(b,a){jQuery("#nucaptcha-answer").addClass("inputbox required wearevalid");jQuery("#nucaptcha-answer").attr("placeholder","Type the code shown above");jQuery("#new-challenge").text("Try a New Code");jQuery("#player-mode").css("text-decoration","none");if(b){jQuery("#player-mode").html("<span class='disabledCaptchaLink'><strong>Visual Code</strong></span> | <span class='enabledCaptchaLink'><strong>Audio Code</strong></span>");document.getElementById("nucaptcha-media").style.visibility="visible"}else{jQuery("#player-mode").html("<span class='enabledCaptchaLink'><strong>Visual Code</strong></span> | <span class='disabledCaptchaLink'><strong>Audio Code</strong></span>");document.getElementById("nucaptcha-media").style.height="0px";document.getElementById("nucaptcha-media").style.width="0px"}jQuery("#new-challenge").addClass("darkColorLinks");jQuery("#player-mode").addClass("darkColorLinks")}});var OemValidator=SiriusValidator.extend({handleSuccess:function(a){if(a.result.result.showDialogForAccountsWithCC){ccOemDialog.showDialog()}else{document.location.href=a.result.result.callbackUrl}},handleFailure:function(a){var b=a.result.portalErrorMessage;if(b!=null&&b.length>0){tracker.performErrorTracking(b)}var c=jQuery("#accountIdentifier").val();if(c!=null&&c.length<14){a.result.esn_vin=c}this._super(a)}});var OemDialogValidator=SiriusValidator.extend({invalidHandler:function(b,a){var d=a.numberOfInvalids();if(d){var c=jQuery("#errorParagraphDialog").html();if(c.indexOf("<")!=-1){c=jQuery("#errorParagraphDialog").html().substring(0,c.indexOf("<"));jQuery("#errorParagraphDialog").html(c)}jQuery("#errorParagraphDialog").show()}else{jQuery("#errorParagraphDialog").hide()}},handleSuccess:function(a){document.location.href=this.params.successUrl},handleFailure:function(a){var c="";for(var b=0;b<a.result.errors.length;b++){c=c+a.result.errors[b]}if(c.length>0){tracker.performErrorTracking(c)}this._super(a)}});var OemAccountSetupValidator=SiriusValidator.extend({addListeners:function(){var c=this;var d=false;var b;if(this.params.inputFieldIDs==null){b=this.validator.settings.groups}else{b=this.params.inputFieldIDs}var f;var a=this.params.addressRequiredMessage;var e=this.params.addressInvalidMessage;this.theForm.find("input:text").blur(function(){c.processSubmitButton("wearevalid");var l=jQuery(this).attr("id");for(var g=0;g<b.length;g++){if(l==jQuery(b[g]).attr("id")){var k=jQuery(this).val().replace(/^\s+|\s+$/g,"");if(k.length==0){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"})}else{if(l.search("postalCode")!=-1){var h=new RegExp(/^\d{5}$|^\d{5}-\d{4}$/);if(!h.test(k)){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"})}}else{var j=new RegExp(/[^A-Za-z0-9'#\-\s.,\/]/g);if(j.test(k)){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"})}}}return false}}});this.theForm.find("textarea").focus(function(){f=true});this.theForm.find("textarea").blur(function(){f=false;c.processSubmitButton("wearevalid");var k=jQuery(this).attr("id");for(var g=0;g<b.length;g++){if(k==jQuery(b[g]).attr("id")){var j=jQuery(this).val().replace(/^\s+|\s+$/g,"");if(j.length==0){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").html(a);jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"})}else{var h=new RegExp(/[^A-Za-z0-9'#\-\s.,\/]/g);if(h.test(j)){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").html(e);jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"})}}return false}}});this.theForm.find("input:text").keyup(function(){c.processSubmitButton("wearevalid");if(d){d=false;return false}var h=jQuery(this).attr("id");if(jQuery("#validServiceAddress").val()=="false"&&h.search("address")!=-1){for(var g=0;g<b.length;g++){if(b[g].search("service")!=-1){if(h==jQuery(b[g]).attr("id")){for(var g=0;g<b.length;g++){if(b[g].search("service")!=-1&&b[g].search("address")!=-1){jQuery(b[g]).removeClass("form-field-error")}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");jQuery("#validServiceAddress").val(true);return false}}}}if(jQuery("#validBillingAddress").val()=="false"&&h.search("address")!=-1){for(var g=0;g<b.length;g++){if(b[g].search("billing")!=-1){if(h==jQuery(b[g]).attr("id")){for(var g=0;g<b.length;g++){if(b[g].search("billing")!=-1&&b[g].search("address")!=-1){jQuery(b[g]).removeClass("form-field-error")}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");jQuery("#validBillingAddress").val(true);return false}}}}for(var g=0;g<b.length;g++){if(h==jQuery(b[g]).attr("id")){jQuery(this).removeClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").hide();if(h.search("service")!=-1&&b[g].search("address")!=-1){for(var g=0;g<b.length;g++){if(b[g].search("service")!=-1&&b[g].search("address")!=-1){if(jQuery(b[g]).hasClass("form-field-error")){return false}}}}if(h.search("billing")!=-1&&b[g].search("address")!=-1){for(var g=0;g<b.length;g++){if(b[g].search("billing")!=-1&&b[g].search("address")!=-1){if(jQuery(b[g]).hasClass("form-field-error")){return false}}}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");return false}}});this.theForm.find("input:password").keyup(function(){c.processSubmitButton("wearevalid")});this.theForm.find("input:checkbox").livequery("click",function(g){c.processSubmitButton("wearevalid")});this.theForm.find("textarea").keyup(function(){c.processSubmitButton("wearevalid");if(d){d=false;return false}var h=jQuery(this).attr("id");if(jQuery("#validServiceAddress").val()=="false"&&h.search("address")!=-1){for(var g=0;g<b.length;g++){if(b[g].search("service")!=-1){if(h==jQuery(b[g]).attr("id")){for(var g=0;g<b.length;g++){if(b[g].search("service")!=-1&&b[g].search("address")!=-1){jQuery(b[g]).removeClass("form-field-error")}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");jQuery("#validServiceAddress").val(true);return false}}}}if(jQuery("#validBillingAddress").val()=="false"&&h.search("address")!=-1){for(var g=0;g<b.length;g++){if(b[g].search("billing")!=-1){if(h==jQuery(b[g]).attr("id")){for(var g=0;g<b.length;g++){if(b[g].search("billing")!=-1&&b[g].search("address")!=-1){jQuery(b[g]).removeClass("form-field-error")}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");jQuery("#validBillingAddress").val(true);return false}}}}for(var g=0;g<b.length;g++){if(h==jQuery(b[g]).attr("id")){jQuery(this).removeClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").hide();if(h.search("service")!=-1&&b[g].search("address")!=-1){for(var g=0;g<b.length;g++){if(b[g].search("service")!=-1&&b[g].search("address")!=-1){if(jQuery(b[g]).hasClass("form-field-error")){return false}}}}if(h.search("billing")!=-1&&b[g].search("address")!=-1){for(var g=0;g<b.length;g++){if(b[g].search("billing")!=-1&&b[g].search("address")!=-1){if(jQuery(b[g]).hasClass("form-field-error")){return false}}}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");return false}}});this.theForm.find("input:radio").livequery("click",function(g){c.processSubmitButton("wearevalid")});this.theForm.find("select").change(function(){c.processSubmitButton("wearevalid");var j=jQuery(this).attr("id");for(var g=0;g<b.length;g++){if(j==jQuery(b[g]).attr("id")){var h=jQuery(this).val().replace(/^\s+|\s+$/g,"");if(h.length==0){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"});return false}}}if(jQuery("#validServiceAddress").val()=="false"&&j.search("address")!=-1){for(var g=0;g<b.length;g++){if(b[g].search("service")!=-1){if(j==jQuery(b[g]).attr("id")){for(var g=0;g<b.length;g++){if(b[g].search("service")!=-1&&b[g].search("address")!=-1){jQuery(b[g]).removeClass("form-field-error")}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");jQuery("#validServiceAddress").val(true);return false}}}}if(jQuery("#validBillingAddress").val()=="false"&&j.search("address")!=-1){for(var g=0;g<b.length;g++){if(b[g].search("billing")!=-1){if(j==jQuery(b[g]).attr("id")){for(var g=0;g<b.length;g++){if(b[g].search("billing")!=-1&&b[g].search("address")!=-1){jQuery(b[g]).removeClass("form-field-error")}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");jQuery("#validBillingAddress").val(true);return false}}}}for(var g=0;g<b.length;g++){if(j==jQuery(b[g]).attr("id")){jQuery(this).removeClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").hide();if(j.search("service")!=-1&&b[g].search("address")!=-1){for(var g=0;g<b.length;g++){if(b[g].search("service")!=-1&&b[g].search("address")!=-1){if(jQuery(b[g]).hasClass("form-field-error")){return false}}}}if(j.search("billing")!=-1&&b[g].search("address")!=-1){for(var g=0;g<b.length;g++){if(b[g].search("billing")!=-1&&b[g].search("address")!=-1){if(jQuery(b[g]).hasClass("form-field-error")){return false}}}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");return false}}});this.theForm.find("select").blur(function(){c.processSubmitButton("wearevalid");var j=jQuery(this).attr("id");for(var g=0;g<b.length;g++){if(j==jQuery(b[g]).attr("id")){var h=jQuery(this).val().replace(/^\s+|\s+$/g,"");if(h.length==0){jQuery(this).addClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").slideDown(100);jQuery(this).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"});return false}}}if(jQuery("#validServiceAddress").val()=="false"&&j.search("address")!=-1){for(var g=0;g<b.length;g++){if(b[g].search("service")!=-1){if(j==jQuery(b[g]).attr("id")){for(var g=0;g<b.length;g++){if(b[g].search("service")!=-1&&b[g].search("address")!=-1){jQuery(b[g]).removeClass("form-field-error")}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");jQuery("#validServiceAddress").val(true);return false}}}}if(jQuery("#validBillingAddress").val()=="false"&&j.search("address")!=-1){for(var g=0;g<b.length;g++){if(b[g].search("billing")!=-1){if(j==jQuery(b[g]).attr("id")){for(var g=0;g<b.length;g++){if(b[g].search("billing")!=-1&&b[g].search("address")!=-1){jQuery(b[g]).removeClass("form-field-error")}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");jQuery("#validBillingAddress").val(true);return false}}}}for(var g=0;g<b.length;g++){if(j==jQuery(b[g]).attr("id")){jQuery(this).removeClass("form-field-error");jQuery(this).parent().find("div.field-error-msg").hide();if(j.search("service")!=-1&&b[g].search("address")!=-1){for(var g=0;g<b.length;g++){if(b[g].search("service")!=-1&&b[g].search("address")!=-1){if(jQuery(b[g]).hasClass("form-field-error")){return false}}}}if(j.search("billing")!=-1&&b[g].search("address")!=-1){for(var g=0;g<b.length;g++){if(b[g].search("billing")!=-1&&b[g].search("address")!=-1){if(jQuery(b[g]).hasClass("form-field-error")){return false}}}}jQuery(this).parents("div.form-item").find("label.required").removeClass("error");return false}}});this.theForm.find("input:text").bind("paste",function(){setTimeout(function(){c.processSubmitButton("wearevalid")},100)});this.theForm.bind("keypress",function(k){if(k.keyCode==13&&!f){var j=new RegExp(/[^A-Za-z0-9'#\-\s.,\/]/g);var m=new Array();if(jQuery("html").find("#sameAsServiceAddress").is(":checked")){for(var g=0;g<b.length;g++){if(b[g].search("service")!=-1){m.push(b[g])}}}else{m=b}for(var g=0;g<m.length;g++){var l=jQuery(m[g]).val().replace(/^\s+|\s+$/g,"");if(l.length==0){jQuery(m[g]).addClass("form-field-error");jQuery(m[g]).parent().find("div.field-error-msg").slideDown(100);jQuery(m[g]).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"});d=true;return false}if(j.test(l)){jQuery(m[g]).addClass("form-field-error");jQuery(m[g]).parent().find("div.field-error-msg").slideDown(100);jQuery(m[g]).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"});d=true;return false}if(b[g].search("postalCode")!=-1){var h=new RegExp(/^\d{5}$|^\d{5}-\d{4}$/);var l=jQuery(b[g]).val().replace(/^\s+|\s+$/g,"");if(!h.test(l)){jQuery(m[g]).addClass("form-field-error");jQuery(m[g]).parent().find("div.field-error-msg").slideDown(100);jQuery(m[g]).parents("div.form-item").find("label.required").addClass("error").css({"background-image":"url(images/label-required.gif)"});d=true;return false}}}}})},processResult:function(a){if(a.result!=null&&!a.result.success){return this.handleFailure(a)}else{return this.handleSuccess(a)}},handleSuccess:function(a){jQuery("#serviceAddressError").html("");jQuery("#billingAddressError").html("");document.location.href=this.params.successUrl},handleFailure:function(b){var f=null;if(b.result.errors.length>0){var e="";f=b.result.errors[0];for(var d=0;d<b.result.errors.length;d++){e=e+b.result.errors[d]}tracker.performErrorTracking(e)}var c=b.result.fieldErrors;var a=null;b.result.fieldErrors=this.organiseErrors(b.result.fieldErrors);if(b.result.fieldErrors.verificationStatus!=null){evsValidatorManager.validateEmail(b.result.fieldErrors)}validateAvs(formValidator,b.result.fieldErrors,b.result.result);if(b.result.fieldErrors.username!=null){var e=b.result.fieldErrors.username;tracker.performErrorTracking(e);jQuery(document).trigger("TRACK_ERROR",[b.result.portalErrorMessage,f,c]);a=true;delete b.result.fieldErrors.username;usernameManager.showUsernameDialog()}if(c.length>0){if(c[0][0]!="username"){jQuery(".error-msg").show();this.pageScrollTop()}}this._super(b,b.result.fieldErrors,a,c)},processSubmitButton:function(p){var f;if(this.params.inputFieldIDs==null){f=this.validator.settings.groups}else{f=this.params.inputFieldIDs}if(this.params.submitButton!=null){var g=this.theForm.find(".required:blank").not(":hidden");var v=this.theForm.find("input:checkbox.required:unchecked").not(":hidden");var q=new Array();var n=this.theForm.find("input:radio").next();for(u=0;u<n.length;u++){if(jQuery(n[u]).is(":visible")){var j=jQuery(n[u]).prev();q.push(j[0].name)}}jQuery.unique(q);var a=true;for(u=0;u<q.length;u++){if(jQuery("input[name='"+q[u]+"']:checked").length==0){a=false;break}}var d;var o;var e=true;var l=true;var k=new RegExp(/^\d{5}$|^\d{5}-\d{4}$/);var h=new RegExp(/[^A-Za-z0-9'#\-\s.,\/]/g);var t=false;var w=false;for(var u=0;u<f.length;u++){var c=jQuery(f[u]).attr("id");if(c.search("service")!=-1&&c.search("postalCode")!=-1){d=jQuery(f[u]).val().replace(/^\s+|\s+$/g,"");if(!k.test(d)){e=false}}if(c.search("billing")!=-1&&c.search("postalCode")!=-1){o=jQuery(f[u]).val().replace(/^\s+|\s+$/g,"");if(!k.test(o)){l=false}}}var x=new Array();if(this.theForm.find("#sameAsServiceAddress").is(":checked")){for(var u=0;u<f.length;u++){if(f[u].search("service")!=-1){x.push(f[u])}}}else{x=f}for(var u=0;u<x.length;u++){var m=jQuery(x[u]).val().replace(/^\s+|\s+$/g,"");if(m.length==0){w=true;break}else{if(h.test(m)){t=true;break}}}if(this.theForm.find("#sameAsServiceAddress").is(":checked")){for(var u=0;u<g.length;u++){var m=jQuery(g[u]).attr("id");if(m.search("billing")!=-1){g.splice(jQuery.inArray(m,g),1);u--}}if(g.length>0||v.length>0||!a||!e||w||t){this.params.submitButton.parent().hide();this.params.submitButton.parent().next().show()}else{this.params.submitButton.parent().show();this.params.submitButton.parent().next().hide();if(this.params.backButton){this.params.backButton.removeAttr("disabled").removeClass("ui-state-disabled").addClass("ui-state-active")}}}else{if(g.length>0||v.length>0||!a||!e||!l||w||t){this.params.submitButton.parent().hide();this.params.submitButton.parent().next().show()}else{this.params.submitButton.parent().show();this.params.submitButton.parent().next().hide();if(this.params.backButton){this.params.backButton.removeAttr("disabled").removeClass("ui-state-disabled").addClass("ui-state-active")}}}var r=jQuery("#termSelectionPage").val();if(r=="true"){var b=jQuery("#termChanged").val();if(b&&b!="true"){jQuery("#proceedDisabled").show();jQuery("#proceed").hide()}else{if(b&&b=="true"){jQuery("#proceedDisabled").hide();jQuery("#proceed").show()}}jQuery("#termSelectionPage").val("false")}}jQuery(".error-msg",this.theForm).hide()}});jQuery.validator.addMethod("creditcard",function(e,b){if(this.optional(b)){return"dependency-mismatch"}if(e.indexOf("***********")!=-1){return true}if(/[^0-9-x]+/.test(e)){return false}var f=0,d=0,a=false;e=e.replace(/\D/g,"");for(var g=e.length-1;g>=0;g--){var c=e.charAt(g);var d=parseInt(c,10);if(a){if((d*=2)>9){d-=9}}f+=d;a=!a}return(f%10)==0});function maskCCNum(e){var b="";if(e!=null&&""!=e){var b="*";var a=e.length;if(a>0){var d=e.length-4;var f=e.substring(d,a);var c=0;for(c=1;c<d;c++){b+="*"}b+=f}}if(b!="null"){return b}else{return""}}function setupChatParameters(jsonResult){if(jsonResult.result.result.chatWidgetResult!=null&&jsonResult.result.result.chatWidgetResult.chatEnabled!=null){jQuery("#floatChat").val("");jQuery("#floatlayer").hide();jQuery("#divId").remove();if(jsonResult.result.result.chatWidgetResult.chatEnabled=="yes"){if(jsonResult.result.result.chatWidgetResult.enableStaticChat=="yes"){jQuery("#chatlive").show()}if(jsonResult.result.result.chatWidgetResult.enableFloatingChat=="yes"){jQuery("#floatChat").val("true");eval(setFloatLayers())}if(jsonResult.result.result.chatWidgetResult.enableProactivePriority=="yes"){enableProactiveChatPriority="yes";defaultIdleTime=data.result.idleTime;clearproactive=setInterval("invokeProactiveChatWidget()",1000)}if(jsonResult.result.result.chatWidgetResult.enableProactiveGeneral=="yes"){enableProactiveChatGeneral="yes";defaultIdleTime=data.result.idleTime;clearproactive=setInterval("invokeProactiveChatWidget()",1000)}}}}var WinbackPromoSelection=Class.extend({packages:null,linkedSirExists:false,isDataAddOnExists:false,init:function(c,b,f){var a=this;this.packages=c;this.linkedSirExists=b;this.isDataAddOnExists=f;var e=new RadioButtons();var d=new CheckBoxes();var g=false;if(jQuery(".add-sir")&&jQuery(".add-sir").css("display")!="block"&&jQuery(".data-addons")&&jQuery(".data-addons").css("display")!="block"){jQuery(".add-ons").hide();jQuery("#addonHeaderText").hide()}jQuery("input.package-select").click(function(){var l=jQuery(this).val();jQuery(document).trigger("PROMO_CHANGE",[l]);if(jQuery(this).is(".infotainment")){if(jQuery(this).is(".bundle")){var o=jQuery(this).attr("infotainment-bundle");if(o!=null){jQuery("input.infotainment[infotainment-component~=' "+o+" ']:checkbox:checked").each(function(){this.checked=false;jQuery(this).next("a.checkbox").removeClass("checked")})}}else{var j=jQuery(this).attr("infotainment-component");if(j!=null){var n=j.split(" ");jQuery.each(n,function(q,r){jQuery("input.infotainment.bundle[infotainment-bundle='"+jQuery.trim(r)+"']:checkbox:checked").each(function(){this.checked=false;jQuery(this).next("a.checkbox").removeClass("checked")})})}}}if(jQuery(this).is(".addon")){jQuery(document).trigger("WINBACK_ADDON_CHANGE")}else{if(jQuery(this).is(".infotainment")&&jQuery(this).is(".checkbox")){var m=jQuery("input[name='radio-package'].styled:radio:checked");m.attr("checked",false);m.next("a.radio").removeClass("checked")}else{if(jQuery(this).is(".audio")){var p=[];var k=jQuery("input[name='radio-package'].infotainment.base.radio.styled:checked");if(k.val()!=null){p.push(k.val())}jQuery("input[name='radio-package'].infotainment.base.styled:checkbox:checked").each(function(){var r=this.value;var q=c[r];p.push(r);this.checked=false;jQuery(this).next("a.checkbox").removeClass("checked")});if(p!=null){jQuery.each(p,function(){var r=jQuery('input[name="infotainment-options"].styled.package-select[value="'+this+'"]').next();r.click();var q=c[this];if(q.isPartOfTrial=="true"){jQuery(".addon-nothanks").hide()}})}}}var h=a.getBasePackage();if(!h){a.setWinbackPromoSelection();a.setWinbackPromoSelectionDisplay()}else{jQuery(document).trigger("WINBACK_PACKAGE_CHANGE")}}});jQuery(document).bind("WINBACK_ADDON_CHANGE",function(h){if(flowManager!=null&&flowManager.packageSelection!=null){flowManager.packageSelection.dataNoThanks=null}a.setWinbackPromoSelection();a.setWinbackPromoSelectionDisplay()});jQuery(document).bind("WINBACK_PACKAGE_CHANGE",function(n){var k=a.getBasePackage();var j=jQuery("#selectedPackagePlanKey").val();if(!k.isSirOnly){var m=(k.isEligibleForLinkedSIR&&isSIRRequired)||(isSIRRequired);if(k.isAudioPackage){jQuery(".add-ons").show();jQuery(".add-on-header").show();if(m){jQuery(".add-sir").show()}if(a.isDataAddOnExists){jQuery(".data-addons").show()}if(m){if(jQuery(".add-sir")&&jQuery(".add-sir").css("display")!="block"&&jQuery(".data-addons")&&jQuery(".data-addons").css("display")!="block"){jQuery(".add-ons").hide();jQuery("#addonHeaderText").hide()}if(isSIRRequired){if(k.isPartOfTrial=="true"){jQuery("#addOnSubtitle").hide()}jQuery("#internet-radio-options").hide();jQuery(".sir-not-required").hide();jQuery("input[name='internet-listening']:radio:checked").each(function(){this.checked=false;jQuery(this).next("a.radio").removeClass("checked")});jQuery("#sir-included").show();jQuery("[id=package_name]").each(function(){jQuery(this).html(k.name)});jQuery("#is-login-same-as-account-credentials").hide();jQuery("#linked-sir-info").hide();jQuery("#linked-sir-form").hide();if(b){jQuery("#linked-sir-info").show()}else{jQuery("#linked-sir-form").show()}}else{jQuery("#internet-radio-options").show();jQuery(".sir-not-required").show();jQuery("#sir-included").hide();var h=jQuery('input[name="internet-listening"].styled:radio:checked').val();if(h){jQuery('input[name="internet-listening"].styled:radio:checked').trigger("click")}else{jQuery("#linked-sir-form").hide();jQuery("#is-login-same-as-account-credentials").hide();jQuery("#linked-sir-info").hide()}jQuery("#addOnSubtitle").show()}}}if(!m&&!a.isDataAddOnExists){jQuery(".add-ons").hide();jQuery("#addonHeaderText").hide()}}else{a.hideSIRAddOn()}a.setWinbackPromoSelection();a.setWinbackPromoSelectionDisplay();var l=jQuery("#selectedPackagePlanKey").val()})},setWinbackPromoSelection:function(){var b=flowManager.packageSelection.packages;var a="";var c=jQuery("input.styled.package-select:checked");jQuery.each(c,function(){var d=this.value;var e=b[d];if(e!=null){if(a==""){a=e.package_name}else{a=a+","+e.package_name}}});jQuery("#selectedPackagePlanKey").val(a)},getWinbackPromoSelection:function(){if(jQuery("#selectedPackagePlanKey").val()!=null&&jQuery("#selectedPackagePlanKey").val()!=""){var a=jQuery("#selectedPackagePlanKey").val().split(",");var c=new Array();var b=flowManager.packageSelection.packages;jQuery.each(a,function(){c[this]=b[this]});return c}return null},getBasePackage:function(){var b=jQuery('input[name="radio-package"].styled:radio:checked').val();if(b==null){jQuery('input[name="radio-package"].infotainment.styled:checkbox:checked').each(function(){b=this.value})}var a=flowManager.packageSelection.packages[b];return a},hideSIRAddOn:function(){jQuery("input[name='internet-listening']:radio:checked").each(function(){this.checked=false;jQuery(this).next("a.radio").removeClass("checked")});jQuery(".add-sir").hide()},hideInfotainmentAddOn:function(){jQuery("input[name='infotainment-options'].infotainment.addon.styled:checkbox:checked").each(function(){this.checked=false;jQuery(this).next("a.checkbox").removeClass("checked")});var a=jQuery("input[name='infotainment-options'].infotainment.addon.styled:radio:checked");a.attr("checked",false);a.next("a.radio").removeClass("checked");jQuery(".data-addons").hide()},setWinbackPromoSelectionDisplay:function(){jQuery("[id$=_fName]").addClass("hiddentypeSubscription");jQuery("[id$=_fName]").removeClass("typeSubscription");jQuery("[id$=_fstartDate]").addClass("hiddentypeSubscription");jQuery("[id$=_fstartDate]").removeClass("typeSubscriptionDate");jQuery("[id$=_fstartDate]").removeClass("typeSubscription");jQuery("[id$=_fTerm]").addClass("hiddentypeSubscription");jQuery("[id$=_fTerm]").removeClass("typeSubscription");var a=jQuery("input[name='radio-package'].audio.styled:radio:checked").val();var g=flowManager.packageSelection.packages[a];var l=jQuery("input[name='radio-package'].infotainment.styled:checked");var e=jQuery("input[name='infotainment-options'].infotainment.styled:checked");var c=jQuery('input[name="internet-listening"].styled:radio:checked').val();if(!c&&this.linkedSirExists){c=sirPackageName}var b=flowManager.packageSelection.packages[c];if(g!=null){if(g.isSirOnly=="true"){jQuery("#internet-selection").html(g.name).addClass("bold")}else{if(g.isEligibleForLinkedSIR||isSIRRequired){jQuery("#sir-selection").show();if(isSIRRequired=="true"){jQuery("#internet-selection").html(g.sirIncludedMsg).removeClass("bold")}else{if(b!=null&&b.isPartOfTrial=="false"){jQuery("#internet-selection").html(b.name);jQuery("#internet-selection").addClass("bold");jQuery("#internet_fName").addClass("typeSubscription bold").removeClass("hiddentypeSubscription");jQuery("#internet_fName").html(b.name);jQuery("#internet_fstartDate").addClass("typeSubscriptionDate").addClass("typeSubscription").removeClass("hiddentypeSubscription");jQuery("#internet_fTerm").addClass("typeSubscription").removeClass("hiddentypeSubscription")}else{if(b!=null&&b.isPartOfTrial=="true"){jQuery("#internet-selection").html("")}else{}}}}else{jQuery("#internet-selection").html("");jQuery("#sir-selection").hide()}}jQuery("#special-offer-selection").html("");jQuery("#audio-selection").html("");if(g.isPartOfTrial=="false"){jQuery("#audio-selection").addClass("bold");if(g.isAddOnUpgrade){jQuery("#audio-selection").html(g.name+"&nbsp;"+upgradeSuffix)}else{jQuery("#audio-selection").html(g.name)}}if(isWinbackFollowOn=="true"){jQuery("#audio_fTerm").html(g.term_desc)}else{jQuery("#existing-audio.typeSubscriptionTerm").html(g.term_desc)}jQuery("#audio_fName").addClass("typeSubscription bold").removeClass("hiddentypeSubscription");jQuery("#audio_fName").html(g.name);jQuery("#audio_fstartDate").addClass("typeSubscriptionDate").addClass("typeSubscription").removeClass("hiddentypeSubscription");jQuery("#audio_fTerm").addClass("typeSubscription").removeClass("hiddentypeSubscription");var d=jQuery("#audio-selection").html();if(d==""||d==null){jQuery("#audio-selection").css({height:"0px"})}else{jQuery("#audio-selection").css({height:"18px"})}}else{jQuery("#audio-selection").html(noAudioMessage).removeClass("bold")}var j=false;var h=false;var f=flowManager.packageSelection.packages;var k="";if(l&&l.length>0){jQuery.each(l,function(){var m=this.value;var n=f[m];if(n!=null&&n.isPartOfTrial=="false"){k=k+"<div>"+n.name+"</div>";h=true}if(n.isPartOfTrial=="true"){j=true}var o="#data_"+this.value+"_fName";jQuery(o).addClass("typeSubscription").removeClass("hiddentypeSubscription");var q="#data_"+this.value+"_fstartDate";jQuery(q).addClass("typeSubscriptionDate").addClass("typeSubscription").removeClass("hiddentypeSubscription");var p="#data_"+this.value+"_fTerm";jQuery(p).addClass("typeSubscription").removeClass("hiddentypeSubscription")})}else{if(e){jQuery.each(e,function(){var m=this.value;var n=f[m];if(n!=null&&n.isPartOfTrial=="false"){k=k+"<div>"+n.name+"</div>";h=true}if(n!=null&&n.isPartOfTrial=="true"){j=true}var o="#data_"+this.value+"_fName";jQuery(o).addClass("typeSubscription").removeClass("hiddentypeSubscription");var q="#data_"+this.value+"_fstartDate";jQuery(q).addClass("typeSubscriptionDate").addClass("typeSubscription").removeClass("hiddentypeSubscription");var p="#data_"+this.value+"_fTerm";jQuery(p).addClass("typeSubscription").removeClass("hiddentypeSubscription")})}}flowManager.alignCurrentAndNewSubscriptionBoxes()}});